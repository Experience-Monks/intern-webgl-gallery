{"version":3,"sources":["webpack://_N_E/./node_modules/three/examples/jsm/libs/fflate.module.js","webpack://_N_E/./node_modules/three/examples/jsm/curves/NURBSUtils.js","webpack://_N_E/./node_modules/three/examples/jsm/curves/NURBSCurve.js","webpack://_N_E/./node_modules/three/examples/jsm/loaders/FBXLoader.js","webpack://_N_E/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://_N_E/./src/pages/gallery/artwork1/artwork.js","webpack://_N_E/./node_modules/three/examples/jsm/shaders/FilmShader.js","webpack://_N_E/./node_modules/three/examples/jsm/postprocessing/FilmPass.js"],"names":["ch2","durl","c","URL","createObjectURL","Blob","type","cwk","u","Worker","revokeObjectURL","e","encodeURI","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","start","b","i","r","j","_a","fl","revfl","_b","fd","revfd","rev","x","hMap","cd","mb","s","length","l","co","le","rvb","sv","r_1","v","m","flt","fdt","flm","flrm","fdm","fdrm","a","bits","d","p","o","bits16","shft","slc","n","set","subarray","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","Math","max","final","f","pos","bt","lm","dm","lbt","dbt","tbts","t","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","add","dsym","end","wbits","wbits16","hTree","push","t2","slice","et","sort","i0","i1","i2","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","w","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","ll","dl","flen","ftlen","dtlen","llm","lcts","it","clct","len","dst","deo","dflt","lvl","plvl","pre","post","lst","ceil","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","lin","din","crct","k","crc","cr","adler","dopt","level","mem","log","mrg","wcln","fn","fnStr","td","toString","ks","indexOf","lastIndexOf","replace","split","st_1","prototype","spInd","ch","wrkr","fns","init","id","cb","td_1","msg","transfer","onerror","error","onmessage","data","postMessage","wk","constructor","buffer","cbfs","bInflt","inflateSync","pbf","gu8","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zlv","size","cbify","opts","err","terminate","consume","astrm","strm","ondata","ev","astrmify","call","b2","b4","b8","filename","mtime","floor","Date","now","charCodeAt","flg","zs","lv","AsyncCmpStrm","this","Deflate","chunk","AsyncDeflate","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","AsyncGzip","gzip","gzipSync","Gunzip","AsyncGunzip","gunzip","gunzipSync","Zlib","AsyncZlib","zlib","zlibSync","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_1","apply","arguments","AsyncDecompress","decompress","decompressSync","fltn","val","Array","isArray","te","TextEncoder","TextDecoder","tds","decode","stream","dutf8","String","fromCharCode","DecodeUTF8","np","EncodeUTF8","strToU8","str","latin1","ar_1","encode","ar","ai","strFromU8","dbf","slzh","zh","z","fnl","es","z64e","sc","su","off","exfl","ex","wzh","ce","extra","col","exl","os","flag","compression","y","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","attrs","exf","wzf","ZipPassThrough","process","ZipDeflate","AsyncZipDeflate","Zip","file","com","comment","hl","header","chks","pAll","_i","chks_1","chk","ind","uf","nxt","dd","splice","zip","Object","keys","tot","slft","files","term","tAll","cbf","oe","cdl","badd","loc","_loop_1","ms","cbl","zipSync","UnzipPassThrough","UnzipInflate","AsyncUnzipInflate","_","sz","Unzip","onfile","0","toAdd","is","oc","_loop_2","sig","this_1","bf","cmp_1","chks_2","unshift","d_1","sc_1","su_1","fn_1","file_1","name","ctr","chks_3","originalSize","register","decoder","unzip","_loop_3","c_1","no","infl","unzipSync","c_2","NURBSUtils","key","value","U","low","high","mid","span","N","left","right","saved","rv","temp","P","findSpan","calcBasisFunctions","C","point","Nj","wNj","zeroArr","ders","ndu","_i2","_r","_j","_r2","s1","s2","_i3","rk","pk","j2","_j3","_j2","_k","_j4","nd","du","CK","nders","calcBasisFunctionDerivatives","Pw","clone","_point","multiplyScalar","_k2","nom","denom","_j5","_j6","Pders","Aders","wders","_i4","sub","calcKoverI","divideScalar","calcBSplineDerivatives","calcRationalCurveDerivatives","q","V","target","uspan","vspan","Nu","Nv","Sw","_l","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","result","Super","NewTarget","fbxTree","connections","sceneGraph","_Curve","NURBSCurve","_super","degree","knots","controlPoints","startKnot","endKnot","_this","optionalTarget","undefined","hpoint","calcBSplinePoint","tangent","calcNURBSDerivatives","copy","normalize","_Loader","FBXLoader","manager","url","onLoad","onProgress","onError","scope","path","extractUrlBase","loader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","parse","console","itemError","FBXBuffer","CORRECT","byteLength","convertArrayBufferToString","isFbxFormatBinary","FBXText","text","cursor","read","offset","isFbxFormatASCII","Error","getFbxVersion","textureLoader","resourcePath","setCrossOrigin","crossOrigin","FBXTreeParser","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","parseScene","connectionMap","Map","Connections","forEach","rawConnection","fromID","toID","relationship","has","parents","children","parentRelationship","ID","get","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","parseInt","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","image","parseImage","_id","pop","content","fileName","extension","toLowerCase","getHandler","warn","array","window","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","wrapT","values","Scaling","repeat","currentPath","FileName","materialMap","materialNodes","Material","material","parseMaterial","materialNode","ShadingModel","parameters","parseParameters","setValues","BumpFactor","bumpScale","Diffuse","color","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","aoMap","map","encoding","displacementMap","emissiveMap","normalMap","envMap","mapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transformLink","TransformLink","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","filter","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","connection","parent","bindSkeleton","createAmbientLight","setupMorphMaterials","traverse","node","userData","transformData","parentMatrix","matrix","parentMatrixWorld","matrixWorld","transform","generateTransform","applyMatrix4","updateWorldMatrix","animations","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","sanitizeNodeName","getTransformData","bone","_loop","subBone","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","setFocalLength","lightAttribute","LightType","Color","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","angle","PI","InnerAngle","degToRad","penumbra","OuterAngle","CastShadows","castShadow","geometry","attributes","vertexColors","FBX_Deformer","skinning","normalizeSkinWeights","reduce","geo","linewidth","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","rotation","Lcl_Rotation","postRotation","PostRotation","scale","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","position","lookAt","bindMatrices","parsePoseNodes","_loop2","geoConnParent","bind","BindPoseNode","Pose","poseNodes","PoseNode","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","g","isMesh","morphAttributes","setupMorphMaterial","index","uuid","matUuid","sharedMat","mat","clonedMat","GeometryParser","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","vertex","setAttribute","colors","weightsIndices","vertexWeights","normal","normalMatrix","getNormalMatrix","normalAttribute","applyNormalMatrix","uvs","uvBuffer","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","count","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","uv","UV","parseUVs","weightTable","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","_data","genFace","_loop3","parentGeo","parentGeoNode","morphTargetsRelative","rawTarget","morphGeoNode","genMorphGeometry","morphPositionsSparse","morphPositions","Float32Array","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","order","Order","isNaN","KnotVector","pointsValues","Points","Form","vertices","getPoints","positions","toArray","AnimationParser","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","match","curveNode","curves","rawCurves","animationCurve","times","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","_loop4","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","_modelID","_rawModel","_node","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","concat","generateTracks","decompose","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","interpolateRotations","setFromEuler","invert","quaternion","euler","quaternionValues","premultiply","multiply","morphNum","getObjectByName","morphTargetDictionary","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","time","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","TextParser","nodeStack","currentIndent","currentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","popStack","parseNodePropertyContinued","property","nodeName","trim","nodeAttrs","parseNodeAttr","currentNode","getCurrentNode","pushStack","contentLine","propName","propValue","connProps","from","to","rest","append","elem","setCurrentProp","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","getPrevNode","BinaryParser","reader","skip","version","getUint32","endOfContent","parseNode","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","reader2","BinaryReader","littleEndian","dv","DataView","nullByte","decodeText","FBXTree","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lParentLX","lGlobalT","setPosition","makeRotationFromEuler","_array","_array2","lLRM","lParentGRM","extractRotation","lParentTM","copyPosition","lParentGSM","lParentGRSM","lLSM","lGlobalRS","lParentLSM","setFromMatrixScale","lParentLSM_inv","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a1","a2","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","parser","itemStart","_onError","itemEnd","gltf","callback","extensions","plugins","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","json","JSON","asset","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","KHR_DRACO_MESH_COMPRESSION","KHR_TEXTURE_TRANSFORM","KHR_MESH_QUANTIZATION","setExtensions","setPlugins","GLTFRegistry","objects","object","remove","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","GLTFLightsExtension","cache","refs","uses","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","range","spot","innerConeAngle","outerConeAngle","decay","createUniqueName","Promise","resolve","self","_loadLight","then","_getNodeRef","GLTFMaterialsUnlitExtension","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","all","GLTFMaterialsClearcoatExtension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","GLTFMaterialsTransmissionExtension","transmissionFactor","transmission","transmissionTexture","GLTFTextureBasisUExtension","textureIndex","textureDef","source","options","loadTextureImage","GLTFTextureWebPExtension","isSupported","uri","handler","detectSupport","Image","src","onload","GLTFMeshoptCompression","bufferView","bufferViews","extensionDef","getDependency","supported","ready","res","byteOffset","stride","byteStride","decodeGltfBuffer","mode","BINARY_EXTENSION_CHUNK_TYPES","GLTFBinaryExtension","body","headerView","magic","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","GLTFDracoMeshCompressionExtension","preload","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","_attributeName","_threeAttributeName","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","_attributeName2","attribute","GLTFTextureTransformExtension","texCoord","needsUpdate","_MeshStandardMaterial","GLTFMeshStandardSGMaterial","_super2","params","_this2","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","setHex","glossiness","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","defineProperties","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","GLTFMaterialsPbrSpecularGlossinessExtension","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","fog","lightMap","lightMapIntensity","aoMapIntensity","normalMapType","normalScale","displacementBias","envMapIntensity","refractionRatio","GLTFMeshQuantizationExtension","_Interpolant","GLTFCubicSplineInterpolant","_super3","parameterPositions","sampleValues","sampleSize","resultBuffer","valueSize","beforeStart_","copySampleValue_","afterEnd_","interpolate_","t0","t1","stride2","stride3","pp","ppp","offset1","offset0","s3","s0","p0","m0","p1","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","INTERPOLATION","CUBICSPLINE","LINEAR","STEP","ALPHA_MODES","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","assign","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","_il2","createPrimitiveKey","primitiveDef","dracoExtension","createAttributesKey","attributesKey","getNormalizedComponentScale","GLTFParser","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scene","scenes","cameras","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","ref","func","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","reject","bufferViewDef","accessorIndex","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","ibCacheKey","ib","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","webkitURL","sourceURI","isObjectURL","hasAlpha","mimeType","colorType","blob","isImageBitmapLoader","imageBitmap","flipY","format","sampler","samplers","magFilter","minFilter","mapName","mapDef","gltfReference","extendTexture","useVertexTangents","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","pointsMaterial","sizeAttenuation","isLine","_cacheKey","lineMaterial","_cacheKey2","cachedMaterial","flatShading","morphNormals","vertexTangents","uv2","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","side","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","cached","promise","geometryPromise","meshIndex","depthTest","loadGeometries","results","geometries","_il3","_material","skinWeight","toTrianglesDrawMode","assignFinalMaterial","group","_i5","_il4","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","input","output","inputAccessors","outputAccessors","targets","_i6","_il5","inputAccessor","outputAccessor","updateMatrix","matrixAutoUpdate","TypedKeyframeTrack","targetName","interpolation","outputArray","scaled","jl","_jl","track","createInterpolant","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","meshPromise","createNodeMesh","createNodeAttachment","sceneIndex","sceneDef","nodeIds","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","boneInverses","jointNode","assignAttributeAccessor","gltfAttributeName","setIndex","box","boxScale","maxDisplacement","vector","_accessor","_min","_max","_boxScale","expandByVector","boundingBox","sphere","getCenter","center","radius","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","_il","_target","pendingAccessor","_pendingAccessor","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","_i7","getX","_i8","newGeometry","__jsx","createElement","inputEl","quote","current","offsetWidth","offsetHeight","renderer","setSize","document","getElementById","domElement","quote_index","renderScene","RenderPass","bloomPass","UnrealBloomPass","threshold","renderToScreen","filmPass","FilmPass","composer","EffectComposer","addPass","titleWrapper","textWrapper","gsap","timeline","innerHTML","ease","duration","delay","onComplete","updateTXT","mixer","mixer_birds","obj","clips","findByName","clipAction","play","birds","invertBirds","orignalpos_birds","rot_bird","cross","particleGeometry","posArray","particlesCnt","random","particlematerial","blending","particleMesh","randomPointInSphere","normalizationFactor","sqrt","sphereGeometry","material_sphere","ambientLight","shadow","near","far","addEventListener","event","mouseY","clientX","mouseX","clientY","delta","elapsedTime","clock","yoyo","tl2","render","canvas","clientWidth","clientHeight","needResize","resizeRendererToDisplaySize","updateProjectionMatrix","cos","sin","getDelta","update","getElapsedTime","requestAnimationFrame","main","Fragment","FilmShader","vertexShader","_Pass","noiseIntensity","scanlinesIntensity","scanlinesCount","grayscale","nIntensity","sIntensity","sCount","fsQuad","writeBuffer","readBuffer","deltaTime","setRenderTarget","clear","Pass"],"mappings":"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","file":"static/chunks/11.e53328edc0809ac7ba83.js","sourcesContent":["/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.6.9\n*/\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\n\nvar durl = function durl(c) {\n  return URL.createObjectURL(new Blob([c], {\n    type: 'text/javascript'\n  }));\n};\n\nvar cwk = function cwk(u) {\n  return new Worker(u);\n};\n\ntry {\n  URL.revokeObjectURL(durl(''));\n} catch (e) {\n  // We're in Deno or a very old browser\n  durl = function durl(c) {\n    return 'data:application/javascript;charset=UTF-8,' + encodeURI(c);\n  }; // If Deno, this is necessary; if not, this changes nothing\n\n\n  cwk = function cwk(u) {\n    return new Worker(u, {\n      type: 'module'\n    });\n  };\n}\n\nvar wk = function wk(c, id, msg, transfer, cb) {\n  var w = cwk(ch2[id] || (ch2[id] = durl(c)));\n\n  w.onerror = function (e) {\n    return cb(e.error, null);\n  };\n\n  w.onmessage = function (e) {\n    return cb(null, e.data);\n  };\n\n  w.postMessage(msg, transfer);\n  return w;\n}; // aliases for shorter compressed code (most minifers don't do this)\n\n\nvar u8 = Uint8Array,\n    u16 = Uint16Array,\n    u32 = Uint32Array; // fixed length extra bits\n\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0,\n/* unused */\n0, 0,\n/* impossible */\n0]); // fixed distance extra bits\n// see fleb note\n\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13,\n/* unused */\n0, 0]); // code length index map\n\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]); // get base, reverse index map from extra bits\n\nvar freb = function freb(eb, start) {\n  var b = new u16(31);\n\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  } // numbers here are at max 18 bits\n\n\n  var r = new u32(b[30]);\n\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n\n  return [b, r];\n};\n\nvar _a = freb(fleb, 2),\n    fl = _a[0],\n    revfl = _a[1]; // we can ignore the fact that the other numbers are wrong; they never happen anyway\n\n\nfl[28] = 258, revfl[258] = 28;\n\nvar _b = freb(fdeb, 0),\n    fd = _b[0],\n    revfd = _b[1]; // map of value to reverse (assuming 16 bits)\n\n\nvar rev = new u16(32768);\n\nfor (var i = 0; i < 32768; ++i) {\n  // reverse table algorithm from SO\n  var x = (i & 0xAAAA) >>> 1 | (i & 0x5555) << 1;\n  x = (x & 0xCCCC) >>> 2 | (x & 0x3333) << 2;\n  x = (x & 0xF0F0) >>> 4 | (x & 0x0F0F) << 4;\n  rev[i] = ((x & 0xFF00) >>> 8 | (x & 0x00FF) << 8) >>> 1;\n} // create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\n\n\nvar hMap = function hMap(cd, mb, r) {\n  var s = cd.length; // index\n\n  var i = 0; // u16 \"map\": index -> # of codes with bit length = index\n\n  var l = new u16(mb); // length of cd must be 288 (total # of codes)\n\n  for (; i < s; ++i) {\n    ++l[cd[i] - 1];\n  } // u16 \"map\": index -> minimum code for bit length = index\n\n\n  var le = new u16(mb);\n\n  for (i = 0; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n\n  var co;\n\n  if (r) {\n    // u16 \"map\": index -> number of actual bits, symbol for code\n    co = new u16(1 << mb); // bits to remove for reverser\n\n    var rvb = 15 - mb;\n\n    for (i = 0; i < s; ++i) {\n      // ignore 0 lengths\n      if (cd[i]) {\n        // num encoding both symbol and bits read\n        var sv = i << 4 | cd[i]; // free bits\n\n        var r_1 = mb - cd[i]; // start value\n\n        var v = le[cd[i] - 1]++ << r_1; // m is end value\n\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          // every 16 bit value starting with the code yields the same result\n          co[rev[v] >>> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        co[i] = rev[le[cd[i] - 1]++] >>> 15 - cd[i];\n      }\n    }\n  }\n\n  return co;\n}; // fixed length tree\n\n\nvar flt = new u8(288);\n\nfor (var i = 0; i < 144; ++i) {\n  flt[i] = 8;\n}\n\nfor (var i = 144; i < 256; ++i) {\n  flt[i] = 9;\n}\n\nfor (var i = 256; i < 280; ++i) {\n  flt[i] = 7;\n}\n\nfor (var i = 280; i < 288; ++i) {\n  flt[i] = 8;\n} // fixed distance tree\n\n\nvar fdt = new u8(32);\n\nfor (var i = 0; i < 32; ++i) {\n  fdt[i] = 5;\n} // fixed length map\n\n\nvar flm = /*#__PURE__*/hMap(flt, 9, 0),\n    flrm = /*#__PURE__*/hMap(flt, 9, 1); // fixed distance map\n\nvar fdm = /*#__PURE__*/hMap(fdt, 5, 0),\n    fdrm = /*#__PURE__*/hMap(fdt, 5, 1); // find max of array\n\nvar max = function max(a) {\n  var m = a[0];\n\n  for (var i = 1; i < a.length; ++i) {\n    if (a[i] > m) m = a[i];\n  }\n\n  return m;\n}; // read d, starting at bit p and mask with m\n\n\nvar bits = function bits(d, p, m) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8) >> (p & 7) & m;\n}; // read d, starting at bit p continuing for at least 16 bits\n\n\nvar bits16 = function bits16(d, p) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >> (p & 7);\n}; // get end of byte\n\n\nvar shft = function shft(p) {\n  return (p / 8 | 0) + (p & 7 && 1);\n}; // typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\n\n\nvar slc = function slc(v, s, e) {\n  if (s == null || s < 0) s = 0;\n  if (e == null || e > v.length) e = v.length; // can't use .constructor in case user-supplied\n\n  var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n}; // expands raw DEFLATE data\n\n\nvar inflt = function inflt(dat, buf, st) {\n  // source length\n  var sl = dat.length;\n  if (!sl || st && !st.l && sl < 5) return buf || new u8(0); // have to estimate size\n\n  var noBuf = !buf || st; // no state\n\n  var noSt = !st || st.i;\n  if (!st) st = {}; // Assumes roughly 33% compression ratio average\n\n  if (!buf) buf = new u8(sl * 3); // ensure buffer can fit at least l elements\n\n  var cbuf = function cbuf(l) {\n    var bl = buf.length; // need to increase size to fit\n\n    if (l > bl) {\n      // Double or set to necessary, whichever is greater\n      var nbuf = new u8(Math.max(bl * 2, l));\n      nbuf.set(buf);\n      buf = nbuf;\n    }\n  }; //  last chunk         bitpos           bytes\n\n\n  var final = st.f || 0,\n      pos = st.p || 0,\n      bt = st.b || 0,\n      lm = st.l,\n      dm = st.d,\n      lbt = st.m,\n      dbt = st.n; // total bits\n\n  var tbts = sl * 8;\n\n  do {\n    if (!lm) {\n      // BFINAL - this is only 1 when last chunk is next\n      st.f = final = bits(dat, pos, 1); // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n\n      var type = bits(dat, pos + 1, 3);\n      pos += 3;\n\n      if (!type) {\n        // go to end of byte boundary\n        var s = shft(pos) + 4,\n            l = dat[s - 4] | dat[s - 3] << 8,\n            t = s + l;\n\n        if (t > sl) {\n          if (noSt) throw 'unexpected EOF';\n          break;\n        } // ensure size\n\n\n        if (noBuf) cbuf(bt + l); // Copy over uncompressed data\n\n        buf.set(dat.subarray(s, t), bt); // Get new bitpos, update byte count\n\n        st.b = bt += l, st.p = pos = t * 8;\n        continue;\n      } else if (type == 1) lm = flrm, dm = fdrm, lbt = 9, dbt = 5;else if (type == 2) {\n        //  literal                            lengths\n        var hLit = bits(dat, pos, 31) + 257,\n            hcLen = bits(dat, pos + 10, 15) + 4;\n        var tl = hLit + bits(dat, pos + 5, 31) + 1;\n        pos += 14; // length+distance tree\n\n        var ldt = new u8(tl); // code length tree\n\n        var clt = new u8(19);\n\n        for (var i = 0; i < hcLen; ++i) {\n          // use index map to get real code\n          clt[clim[i]] = bits(dat, pos + i * 3, 7);\n        }\n\n        pos += hcLen * 3; // code lengths bits\n\n        var clb = max(clt),\n            clbmsk = (1 << clb) - 1; // code lengths map\n\n        var clm = hMap(clt, clb, 1);\n\n        for (var i = 0; i < tl;) {\n          var r = clm[bits(dat, pos, clbmsk)]; // bits read\n\n          pos += r & 15; // symbol\n\n          var s = r >>> 4; // code length to copy\n\n          if (s < 16) {\n            ldt[i++] = s;\n          } else {\n            //  copy   count\n            var c = 0,\n                n = 0;\n            if (s == 16) n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];else if (s == 17) n = 3 + bits(dat, pos, 7), pos += 3;else if (s == 18) n = 11 + bits(dat, pos, 127), pos += 7;\n\n            while (n--) {\n              ldt[i++] = c;\n            }\n          }\n        } //    length tree                 distance tree\n\n\n        var lt = ldt.subarray(0, hLit),\n            dt = ldt.subarray(hLit); // max length bits\n\n        lbt = max(lt); // max dist bits\n\n        dbt = max(dt);\n        lm = hMap(lt, lbt, 1);\n        dm = hMap(dt, dbt, 1);\n      } else throw 'invalid block type';\n\n      if (pos > tbts) {\n        if (noSt) throw 'unexpected EOF';\n        break;\n      }\n    } // Make sure the buffer can hold this + the largest possible addition\n    // Maximum chunk size (practically, theoretically infinite) is 2^17;\n\n\n    if (noBuf) cbuf(bt + 131072);\n    var lms = (1 << lbt) - 1,\n        dms = (1 << dbt) - 1;\n    var lpos = pos;\n\n    for (;; lpos = pos) {\n      // bits read, code\n      var c = lm[bits16(dat, pos) & lms],\n          sym = c >>> 4;\n      pos += c & 15;\n\n      if (pos > tbts) {\n        if (noSt) throw 'unexpected EOF';\n        break;\n      }\n\n      if (!c) throw 'invalid length/literal';\n      if (sym < 256) buf[bt++] = sym;else if (sym == 256) {\n        lpos = pos, lm = null;\n        break;\n      } else {\n        var add = sym - 254; // no extra bits needed if less\n\n        if (sym > 264) {\n          // index\n          var i = sym - 257,\n              b = fleb[i];\n          add = bits(dat, pos, (1 << b) - 1) + fl[i];\n          pos += b;\n        } // dist\n\n\n        var d = dm[bits16(dat, pos) & dms],\n            dsym = d >>> 4;\n        if (!d) throw 'invalid distance';\n        pos += d & 15;\n        var dt = fd[dsym];\n\n        if (dsym > 3) {\n          var b = fdeb[dsym];\n          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n        }\n\n        if (pos > tbts) {\n          if (noSt) throw 'unexpected EOF';\n          break;\n        }\n\n        if (noBuf) cbuf(bt + 131072);\n        var end = bt + add;\n\n        for (; bt < end; bt += 4) {\n          buf[bt] = buf[bt - dt];\n          buf[bt + 1] = buf[bt + 1 - dt];\n          buf[bt + 2] = buf[bt + 2 - dt];\n          buf[bt + 3] = buf[bt + 3 - dt];\n        }\n\n        bt = end;\n      }\n    }\n\n    st.l = lm, st.p = lpos, st.b = bt;\n    if (lm) final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n  } while (!final);\n\n  return bt == buf.length ? buf : slc(buf, 0, bt);\n}; // starting at p, write the minimum number of bits that can hold v to d\n\n\nvar wbits = function wbits(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n}; // starting at p, write the minimum number of bits (>8) that can hold v to d\n\n\nvar wbits16 = function wbits16(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n  d[o + 2] |= v >>> 16;\n}; // creates code lengths from a frequency table\n\n\nvar hTree = function hTree(d, mb) {\n  // Need extra info to make a tree\n  var t = [];\n\n  for (var i = 0; i < d.length; ++i) {\n    if (d[i]) t.push({\n      s: i,\n      f: d[i]\n    });\n  }\n\n  var s = t.length;\n  var t2 = t.slice();\n  if (!s) return [et, 0];\n\n  if (s == 1) {\n    var v = new u8(t[0].s + 1);\n    v[t[0].s] = 1;\n    return [v, 1];\n  }\n\n  t.sort(function (a, b) {\n    return a.f - b.f;\n  }); // after i2 reaches last ind, will be stopped\n  // freq must be greater than largest possible number of symbols\n\n  t.push({\n    s: -1,\n    f: 25001\n  });\n  var l = t[0],\n      r = t[1],\n      i0 = 0,\n      i1 = 1,\n      i2 = 2;\n  t[0] = {\n    s: -1,\n    f: l.f + r.f,\n    l: l,\n    r: r\n  }; // efficient algorithm from UZIP.js\n  // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n  // symbols that combined have high freq, will start processing i2 (high-freq,\n  // non-composite) symbols instead\n  // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n\n  while (i1 != s - 1) {\n    l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n    r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n    t[i1++] = {\n      s: -1,\n      f: l.f + r.f,\n      l: l,\n      r: r\n    };\n  }\n\n  var maxSym = t2[0].s;\n\n  for (var i = 1; i < s; ++i) {\n    if (t2[i].s > maxSym) maxSym = t2[i].s;\n  } // code lengths\n\n\n  var tr = new u16(maxSym + 1); // max bits in tree\n\n  var mbt = ln(t[i1 - 1], tr, 0);\n\n  if (mbt > mb) {\n    // more algorithms from UZIP.js\n    // TODO: find out how this code works (debt)\n    //  ind    debt\n    var i = 0,\n        dt = 0; //    left            cost\n\n    var lft = mbt - mb,\n        cst = 1 << lft;\n    t2.sort(function (a, b) {\n      return tr[b.s] - tr[a.s] || a.f - b.f;\n    });\n\n    for (; i < s; ++i) {\n      var i2_1 = t2[i].s;\n\n      if (tr[i2_1] > mb) {\n        dt += cst - (1 << mbt - tr[i2_1]);\n        tr[i2_1] = mb;\n      } else break;\n    }\n\n    dt >>>= lft;\n\n    while (dt > 0) {\n      var i2_2 = t2[i].s;\n      if (tr[i2_2] < mb) dt -= 1 << mb - tr[i2_2]++ - 1;else ++i;\n    }\n\n    for (; i >= 0 && dt; --i) {\n      var i2_3 = t2[i].s;\n\n      if (tr[i2_3] == mb) {\n        --tr[i2_3];\n        ++dt;\n      }\n    }\n\n    mbt = mb;\n  }\n\n  return [new u8(tr), mbt];\n}; // get the max length and assign length codes\n\n\nvar ln = function ln(n, l, d) {\n  return n.s == -1 ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1)) : l[n.s] = d;\n}; // length codes generation\n\n\nvar lc = function lc(c) {\n  var s = c.length; // Note that the semicolon was intentional\n\n  while (s && !c[--s]) {\n    ;\n  }\n\n  var cl = new u16(++s); //  ind      num         streak\n\n  var cli = 0,\n      cln = c[0],\n      cls = 1;\n\n  var w = function w(v) {\n    cl[cli++] = v;\n  };\n\n  for (var i = 1; i <= s; ++i) {\n    if (c[i] == cln && i != s) ++cls;else {\n      if (!cln && cls > 2) {\n        for (; cls > 138; cls -= 138) {\n          w(32754);\n        }\n\n        if (cls > 2) {\n          w(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);\n          cls = 0;\n        }\n      } else if (cls > 3) {\n        w(cln), --cls;\n\n        for (; cls > 6; cls -= 6) {\n          w(8304);\n        }\n\n        if (cls > 2) w(cls - 3 << 5 | 8208), cls = 0;\n      }\n\n      while (cls--) {\n        w(cln);\n      }\n\n      cls = 1;\n      cln = c[i];\n    }\n  }\n\n  return [cl.subarray(0, cli), s];\n}; // calculate the length of output from tree, code lengths\n\n\nvar clen = function clen(cf, cl) {\n  var l = 0;\n\n  for (var i = 0; i < cl.length; ++i) {\n    l += cf[i] * cl[i];\n  }\n\n  return l;\n}; // writes a fixed block\n// returns the new bit pos\n\n\nvar wfblk = function wfblk(out, pos, dat) {\n  // no need to write 00 as type: TypedArray defaults to 0\n  var s = dat.length;\n  var o = shft(pos + 2);\n  out[o] = s & 255;\n  out[o + 1] = s >>> 8;\n  out[o + 2] = out[o] ^ 255;\n  out[o + 3] = out[o + 1] ^ 255;\n\n  for (var i = 0; i < s; ++i) {\n    out[o + i + 4] = dat[i];\n  }\n\n  return (o + 4 + s) * 8;\n}; // writes a block\n\n\nvar wblk = function wblk(dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n  wbits(out, p++, final);\n  ++lf[256];\n\n  var _a = hTree(lf, 15),\n      dlt = _a[0],\n      mlb = _a[1];\n\n  var _b = hTree(df, 15),\n      ddt = _b[0],\n      mdb = _b[1];\n\n  var _c = lc(dlt),\n      lclt = _c[0],\n      nlc = _c[1];\n\n  var _d = lc(ddt),\n      lcdt = _d[0],\n      ndc = _d[1];\n\n  var lcfreq = new u16(19);\n\n  for (var i = 0; i < lclt.length; ++i) {\n    lcfreq[lclt[i] & 31]++;\n  }\n\n  for (var i = 0; i < lcdt.length; ++i) {\n    lcfreq[lcdt[i] & 31]++;\n  }\n\n  var _e = hTree(lcfreq, 7),\n      lct = _e[0],\n      mlcb = _e[1];\n\n  var nlcc = 19;\n\n  for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc) {\n    ;\n  }\n\n  var flen = bl + 5 << 3;\n  var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n  var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n  if (flen <= ftlen && flen <= dtlen) return wfblk(out, p, dat.subarray(bs, bs + bl));\n  var lm, ll, dm, dl;\n  wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n\n  if (dtlen < ftlen) {\n    lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n    var llm = hMap(lct, mlcb, 0);\n    wbits(out, p, nlc - 257);\n    wbits(out, p + 5, ndc - 1);\n    wbits(out, p + 10, nlcc - 4);\n    p += 14;\n\n    for (var i = 0; i < nlcc; ++i) {\n      wbits(out, p + 3 * i, lct[clim[i]]);\n    }\n\n    p += 3 * nlcc;\n    var lcts = [lclt, lcdt];\n\n    for (var it = 0; it < 2; ++it) {\n      var clct = lcts[it];\n\n      for (var i = 0; i < clct.length; ++i) {\n        var len = clct[i] & 31;\n        wbits(out, p, llm[len]), p += lct[len];\n        if (len > 15) wbits(out, p, clct[i] >>> 5 & 127), p += clct[i] >>> 12;\n      }\n    }\n  } else {\n    lm = flm, ll = flt, dm = fdm, dl = fdt;\n  }\n\n  for (var i = 0; i < li; ++i) {\n    if (syms[i] > 255) {\n      var len = syms[i] >>> 18 & 31;\n      wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n      if (len > 7) wbits(out, p, syms[i] >>> 23 & 31), p += fleb[len];\n      var dst = syms[i] & 31;\n      wbits16(out, p, dm[dst]), p += dl[dst];\n      if (dst > 3) wbits16(out, p, syms[i] >>> 5 & 8191), p += fdeb[dst];\n    } else {\n      wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n    }\n  }\n\n  wbits16(out, p, lm[256]);\n  return p + ll[256];\n}; // deflate options (nice << 13) | chain\n\n\nvar deo = /*#__PURE__*/new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]); // empty\n\nvar et = /*#__PURE__*/new u8(0); // compresses data into a raw DEFLATE buffer\n\nvar dflt = function dflt(dat, lvl, plvl, pre, post, lst) {\n  var s = dat.length;\n  var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post); // writing to this writes to the output buffer\n\n  var w = o.subarray(pre, o.length - post);\n  var pos = 0;\n\n  if (!lvl || s < 8) {\n    for (var i = 0; i <= s; i += 65535) {\n      // end\n      var e = i + 65535;\n\n      if (e < s) {\n        // write full block\n        pos = wfblk(w, pos, dat.subarray(i, e));\n      } else {\n        // write final block\n        w[i] = lst;\n        pos = wfblk(w, pos, dat.subarray(i, s));\n      }\n    }\n  } else {\n    var opt = deo[lvl - 1];\n    var n = opt >>> 13,\n        c = opt & 8191;\n    var msk_1 = (1 << plvl) - 1; //    prev 2-byte val map    curr 2-byte val map\n\n    var prev = new u16(32768),\n        head = new u16(msk_1 + 1);\n    var bs1_1 = Math.ceil(plvl / 3),\n        bs2_1 = 2 * bs1_1;\n\n    var hsh = function hsh(i) {\n      return (dat[i] ^ dat[i + 1] << bs1_1 ^ dat[i + 2] << bs2_1) & msk_1;\n    }; // 24576 is an arbitrary number of maximum symbols per block\n    // 424 buffer for last block\n\n\n    var syms = new u32(25000); // length/literal freq   distance freq\n\n    var lf = new u16(288),\n        df = new u16(32); //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n\n    var lc_1 = 0,\n        eb = 0,\n        i = 0,\n        li = 0,\n        wi = 0,\n        bs = 0;\n\n    for (; i < s; ++i) {\n      // hash value\n      // deopt when i > s - 3 - at end, deopt acceptable\n      var hv = hsh(i); // index mod 32768    previous index mod\n\n      var imod = i & 32767,\n          pimod = head[hv];\n      prev[imod] = pimod;\n      head[hv] = imod; // We always should modify head and prev, but only add symbols if\n      // this data is not yet processed (\"wait\" for wait index)\n\n      if (wi <= i) {\n        // bytes remaining\n        var rem = s - i;\n\n        if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n          pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n          li = lc_1 = eb = 0, bs = i;\n\n          for (var j = 0; j < 286; ++j) {\n            lf[j] = 0;\n          }\n\n          for (var j = 0; j < 30; ++j) {\n            df[j] = 0;\n          }\n        } //  len    dist   chain\n\n\n        var l = 2,\n            d = 0,\n            ch_1 = c,\n            dif = imod - pimod & 32767;\n\n        if (rem > 2 && hv == hsh(i - dif)) {\n          var maxn = Math.min(n, rem) - 1;\n          var maxd = Math.min(32767, i); // max possible length\n          // not capped at dif because decompressors implement \"rolling\" index population\n\n          var ml = Math.min(258, rem);\n\n          while (dif <= maxd && --ch_1 && imod != pimod) {\n            if (dat[i + l] == dat[i + l - dif]) {\n              var nl = 0;\n\n              for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl) {\n                ;\n              }\n\n              if (nl > l) {\n                l = nl, d = dif; // break out early when we reach \"nice\" (we are satisfied enough)\n\n                if (nl > maxn) break; // now, find the rarest 2-byte sequence within this\n                // length of literals and search for that instead.\n                // Much faster than just using the start\n\n                var mmd = Math.min(dif, nl - 2);\n                var md = 0;\n\n                for (var j = 0; j < mmd; ++j) {\n                  var ti = i - dif + j + 32768 & 32767;\n                  var pti = prev[ti];\n                  var cd = ti - pti + 32768 & 32767;\n                  if (cd > md) md = cd, pimod = ti;\n                }\n              }\n            } // check the previous match\n\n\n            imod = pimod, pimod = prev[imod];\n            dif += imod - pimod + 32768 & 32767;\n          }\n        } // d will be nonzero only when a match was found\n\n\n        if (d) {\n          // store both dist and len data in one Uint32\n          // Make sure this is recognized as a len/dist with 28th bit (2^28)\n          syms[li++] = 268435456 | revfl[l] << 18 | revfd[d];\n          var lin = revfl[l] & 31,\n              din = revfd[d] & 31;\n          eb += fleb[lin] + fdeb[din];\n          ++lf[257 + lin];\n          ++df[din];\n          wi = i + l;\n          ++lc_1;\n        } else {\n          syms[li++] = dat[i];\n          ++lf[dat[i]];\n        }\n      }\n    }\n\n    pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos); // this is the easiest way to avoid needing to maintain state\n\n    if (!lst && pos & 7) pos = wfblk(w, pos + 1, et);\n  }\n\n  return slc(o, 0, pre + shft(pos) + post);\n}; // CRC32 table\n\n\nvar crct = /*#__PURE__*/function () {\n  var t = new u32(256);\n\n  for (var i = 0; i < 256; ++i) {\n    var c = i,\n        k = 9;\n\n    while (--k) {\n      c = (c & 1 && 0xEDB88320) ^ c >>> 1;\n    }\n\n    t[i] = c;\n  }\n\n  return t;\n}(); // CRC32\n\n\nvar crc = function crc() {\n  var c = -1;\n  return {\n    p: function p(d) {\n      // closures have awful performance\n      var cr = c;\n\n      for (var i = 0; i < d.length; ++i) {\n        cr = crct[cr & 255 ^ d[i]] ^ cr >>> 8;\n      }\n\n      c = cr;\n    },\n    d: function d() {\n      return ~c;\n    }\n  };\n}; // Alder32\n\n\nvar adler = function adler() {\n  var a = 1,\n      b = 0;\n  return {\n    p: function p(d) {\n      // closures have awful performance\n      var n = a,\n          m = b;\n      var l = d.length;\n\n      for (var i = 0; i != l;) {\n        var e = Math.min(i + 2655, l);\n\n        for (; i < e; ++i) {\n          m += n += d[i];\n        }\n\n        n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n      }\n\n      a = n, b = m;\n    },\n    d: function d() {\n      a %= 65521, b %= 65521;\n      return (a & 255) << 24 | a >>> 8 << 16 | (b & 255) << 8 | b >>> 8;\n    }\n  };\n};\n\n; // deflate with opts\n\nvar dopt = function dopt(dat, opt, pre, post, st) {\n  return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 12 + opt.mem, pre, post, !st);\n}; // Walmart object spread\n\n\nvar mrg = function mrg(a, b) {\n  var o = {};\n\n  for (var k in a) {\n    o[k] = a[k];\n  }\n\n  for (var k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}; // worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\n\n\nvar wcln = function wcln(fn, fnStr, td) {\n  var dt = fn();\n  var st = fn.toString();\n  var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n\n  for (var i = 0; i < dt.length; ++i) {\n    var v = dt[i],\n        k = ks[i];\n\n    if (typeof v == 'function') {\n      fnStr += ';' + k + '=';\n      var st_1 = v.toString();\n\n      if (v.prototype) {\n        // for global objects\n        if (st_1.indexOf('[native code]') != -1) {\n          var spInd = st_1.indexOf(' ', 8) + 1;\n          fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n        } else {\n          fnStr += st_1;\n\n          for (var t in v.prototype) {\n            fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n          }\n        }\n      } else fnStr += st_1;\n    } else td[k] = v;\n  }\n\n  return [fnStr, td];\n};\n\nvar ch = []; // clone bufs\n\nvar cbfs = function cbfs(v) {\n  var tl = [];\n\n  for (var k in v) {\n    if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32) tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n  }\n\n  return tl;\n}; // use a worker to execute code\n\n\nvar wrkr = function wrkr(fns, init, id, cb) {\n  var _a;\n\n  if (!ch[id]) {\n    var fnStr = '',\n        td_1 = {},\n        m = fns.length - 1;\n\n    for (var i = 0; i < m; ++i) {\n      _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n    }\n\n    ch[id] = wcln(fns[m], fnStr, td_1);\n  }\n\n  var td = mrg({}, ch[id][1]);\n  return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n}; // base async inflate fn\n\n\nvar bInflt = function bInflt() {\n  return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8];\n};\n\nvar bDflt = function bDflt() {\n  return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf];\n}; // gzip extra\n\n\nvar gze = function gze() {\n  return [gzh, gzhl, wbytes, crc, crct];\n}; // gunzip extra\n\n\nvar guze = function guze() {\n  return [gzs, gzl];\n}; // zlib extra\n\n\nvar zle = function zle() {\n  return [zlh, wbytes, adler];\n}; // unzlib extra\n\n\nvar zule = function zule() {\n  return [zlv];\n}; // post buf\n\n\nvar pbf = function pbf(msg) {\n  return postMessage(msg, [msg.buffer]);\n}; // get u8\n\n\nvar gu8 = function gu8(o) {\n  return o && o.size && new u8(o.size);\n}; // async helper\n\n\nvar cbify = function cbify(dat, opts, fns, init, id, cb) {\n  var w = wrkr(fns, init, id, function (err, dat) {\n    w.terminate();\n    cb(err, dat);\n  });\n  w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n  return function () {\n    w.terminate();\n  };\n}; // auto stream\n\n\nvar astrm = function astrm(strm) {\n  strm.ondata = function (dat, final) {\n    return postMessage([dat, final], [dat.buffer]);\n  };\n\n  return function (ev) {\n    return strm.push(ev.data[0], ev.data[1]);\n  };\n}; // async stream attach\n\n\nvar astrmify = function astrmify(fns, strm, opts, init, id) {\n  var t;\n  var w = wrkr(fns, init, id, function (err, dat) {\n    if (err) w.terminate(), strm.ondata.call(strm, err);else {\n      if (dat[1]) w.terminate();\n      strm.ondata.call(strm, err, dat[0], dat[1]);\n    }\n  });\n  w.postMessage(opts);\n\n  strm.push = function (d, f) {\n    if (t) throw 'stream finished';\n    if (!strm.ondata) throw 'no stream handler';\n    w.postMessage([d, t = f], [d.buffer]);\n  };\n\n  strm.terminate = function () {\n    w.terminate();\n  };\n}; // read 2 bytes\n\n\nvar b2 = function b2(d, b) {\n  return d[b] | d[b + 1] << 8;\n}; // read 4 bytes\n\n\nvar b4 = function b4(d, b) {\n  return (d[b] | d[b + 1] << 8 | d[b + 2] << 16 | d[b + 3] << 24) >>> 0;\n};\n\nvar b8 = function b8(d, b) {\n  return b4(d, b) + b4(d, b + 4) * 4294967296;\n}; // write bytes\n\n\nvar wbytes = function wbytes(d, b, v) {\n  for (; v; ++b) {\n    d[b] = v, v >>>= 8;\n  }\n}; // gzip header\n\n\nvar gzh = function gzh(c, o) {\n  var fn = o.filename;\n  c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n\n  if (o.mtime != 0) wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n\n  if (fn) {\n    c[3] = 8;\n\n    for (var i = 0; i <= fn.length; ++i) {\n      c[i + 10] = fn.charCodeAt(i);\n    }\n  }\n}; // gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\n\n\nvar gzs = function gzs(d) {\n  if (d[0] != 31 || d[1] != 139 || d[2] != 8) throw 'invalid gzip data';\n  var flg = d[3];\n  var st = 10;\n  if (flg & 4) st += d[10] | (d[11] << 8) + 2;\n\n  for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++]) {\n    ;\n  }\n\n  return st + (flg & 2);\n}; // gzip length\n\n\nvar gzl = function gzl(d) {\n  var l = d.length;\n  return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n}; // gzip header length\n\n\nvar gzhl = function gzhl(o) {\n  return 10 + (o.filename && o.filename.length + 1 || 0);\n}; // zlib header\n\n\nvar zlh = function zlh(c, o) {\n  var lv = o.level,\n      fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n  c[0] = 120, c[1] = fl << 6 | (fl ? 32 - 2 * fl : 1);\n}; // zlib valid\n\n\nvar zlv = function zlv(d) {\n  if ((d[0] & 15) != 8 || d[0] >>> 4 > 7 || (d[0] << 8 | d[1]) % 31) throw 'invalid zlib data';\n  if (d[1] & 32) throw 'invalid zlib data: preset dictionaries not supported';\n};\n\nfunction AsyncCmpStrm(opts, cb) {\n  if (!cb && typeof opts == 'function') cb = opts, opts = {};\n  this.ondata = cb;\n  return opts;\n} // zlib footer: -4 to -0 is Adler32\n\n/**\n * Streaming DEFLATE compression\n */\n\n\nvar Deflate = /*#__PURE__*/function () {\n  function Deflate(opts, cb) {\n    if (!cb && typeof opts == 'function') cb = opts, opts = {};\n    this.ondata = cb;\n    this.o = opts || {};\n  }\n\n  Deflate.prototype.p = function (c, f) {\n    this.ondata(dopt(c, this.o, 0, 0, !f), f);\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Deflate.prototype.push = function (chunk, final) {\n    if (this.d) throw 'stream finished';\n    if (!this.ondata) throw 'no stream handler';\n    this.d = final;\n    this.p(chunk, final || false);\n  };\n\n  return Deflate;\n}();\n\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\n\nvar AsyncDeflate = /*#__PURE__*/function () {\n  function AsyncDeflate(opts, cb) {\n    astrmify([bDflt, function () {\n      return [astrm, Deflate];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Deflate(ev.data);\n      onmessage = astrm(strm);\n    }, 6);\n  }\n\n  return AsyncDeflate;\n}();\n\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt], function (ev) {\n    return pbf(deflateSync(ev.data[0], ev.data[1]));\n  }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\n\nexport function deflateSync(data, opts) {\n  return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\n\nvar Inflate = /*#__PURE__*/function () {\n  /**\n   * Creates an inflation stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Inflate(cb) {\n    this.s = {};\n    this.p = new u8(0);\n    this.ondata = cb;\n  }\n\n  Inflate.prototype.e = function (c) {\n    if (this.d) throw 'stream finished';\n    if (!this.ondata) throw 'no stream handler';\n    var l = this.p.length;\n    var n = new u8(l + c.length);\n    n.set(this.p), n.set(c, l), this.p = n;\n  };\n\n  Inflate.prototype.c = function (final) {\n    this.d = this.s.i = final || false;\n    var bts = this.s.b;\n    var dt = inflt(this.p, this.o, this.s);\n    this.ondata(slc(dt, bts, this.s.b), this.d);\n    this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n    this.p = slc(this.p, this.s.p / 8 | 0), this.s.p &= 7;\n  };\n  /**\n   * Pushes a chunk to be inflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the final chunk\n   */\n\n\n  Inflate.prototype.push = function (chunk, final) {\n    this.e(chunk), this.c(final);\n  };\n\n  return Inflate;\n}();\n\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\n\nvar AsyncInflate = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous inflation stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncInflate(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, function () {\n      return [astrm, Inflate];\n    }], this, 0, function () {\n      var strm = new Inflate();\n      onmessage = astrm(strm);\n    }, 7);\n  }\n\n  return AsyncInflate;\n}();\n\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt], function (ev) {\n    return pbf(inflateSync(ev.data[0], gu8(ev.data[1])));\n  }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function inflateSync(data, out) {\n  return inflt(data, out);\n} // before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n\n/**\n * Streaming GZIP compression\n */\n\nvar Gzip = /*#__PURE__*/function () {\n  function Gzip(opts, cb) {\n    this.c = crc();\n    this.l = 0;\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be GZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Gzip.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n\n  Gzip.prototype.p = function (c, f) {\n    this.c.p(c);\n    this.l += c.length;\n    var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n    if (this.v) gzh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n    this.ondata(raw, f);\n  };\n\n  return Gzip;\n}();\n\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\n\nvar AsyncGzip = /*#__PURE__*/function () {\n  function AsyncGzip(opts, cb) {\n    astrmify([bDflt, gze, function () {\n      return [astrm, Deflate, Gzip];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Gzip(ev.data);\n      onmessage = astrm(strm);\n    }, 8);\n  }\n\n  return AsyncGzip;\n}();\n\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt, gze, function () {\n    return [gzipSync];\n  }], function (ev) {\n    return pbf(gzipSync(ev.data[0], ev.data[1]));\n  }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\n\nexport function gzipSync(data, opts) {\n  if (!opts) opts = {};\n  var c = crc(),\n      l = data.length;\n  c.p(data);\n  var d = dopt(data, opts, gzhl(opts), 8),\n      s = d.length;\n  return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\n\nvar Gunzip = /*#__PURE__*/function () {\n  /**\n   * Creates a GUNZIP stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Gunzip(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be GUNZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Gunzip.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n\n    if (this.v) {\n      var s = this.p.length > 3 ? gzs(this.p) : 4;\n      if (s >= this.p.length && !final) return;\n      this.p = this.p.subarray(s), this.v = 0;\n    }\n\n    if (final) {\n      if (this.p.length < 8) throw 'invalid gzip stream';\n      this.p = this.p.subarray(0, -8);\n    } // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n\n\n    Inflate.prototype.c.call(this, final);\n  };\n\n  return Gunzip;\n}();\n\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\n\nvar AsyncGunzip = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous GUNZIP stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncGunzip(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, guze, function () {\n      return [astrm, Inflate, Gunzip];\n    }], this, 0, function () {\n      var strm = new Gunzip();\n      onmessage = astrm(strm);\n    }, 9);\n  }\n\n  return AsyncGunzip;\n}();\n\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt, guze, function () {\n    return [gunzipSync];\n  }], function (ev) {\n    return pbf(gunzipSync(ev.data[0]));\n  }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\n\nexport function gunzipSync(data, out) {\n  return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\n\nvar Zlib = /*#__PURE__*/function () {\n  function Zlib(opts, cb) {\n    this.c = adler();\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be zlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Zlib.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n\n  Zlib.prototype.p = function (c, f) {\n    this.c.p(c);\n    var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n    if (this.v) zlh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 4, this.c.d());\n    this.ondata(raw, f);\n  };\n\n  return Zlib;\n}();\n\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\n\nvar AsyncZlib = /*#__PURE__*/function () {\n  function AsyncZlib(opts, cb) {\n    astrmify([bDflt, zle, function () {\n      return [astrm, Deflate, Zlib];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Zlib(ev.data);\n      onmessage = astrm(strm);\n    }, 10);\n  }\n\n  return AsyncZlib;\n}();\n\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt, zle, function () {\n    return [zlibSync];\n  }], function (ev) {\n    return pbf(zlibSync(ev.data[0], ev.data[1]));\n  }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\n\nexport function zlibSync(data, opts) {\n  if (!opts) opts = {};\n  var a = adler();\n  a.p(data);\n  var d = dopt(data, opts, 2, 4);\n  return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\n\nvar Unzlib = /*#__PURE__*/function () {\n  /**\n   * Creates a Zlib decompression stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Unzlib(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be unzlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Unzlib.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n\n    if (this.v) {\n      if (this.p.length < 2 && !final) return;\n      this.p = this.p.subarray(2), this.v = 0;\n    }\n\n    if (final) {\n      if (this.p.length < 4) throw 'invalid zlib stream';\n      this.p = this.p.subarray(0, -4);\n    } // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n\n\n    Inflate.prototype.c.call(this, final);\n  };\n\n  return Unzlib;\n}();\n\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\n\nvar AsyncUnzlib = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous Zlib decompression stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncUnzlib(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, zule, function () {\n      return [astrm, Inflate, Unzlib];\n    }], this, 0, function () {\n      var strm = new Unzlib();\n      onmessage = astrm(strm);\n    }, 11);\n  }\n\n  return AsyncUnzlib;\n}();\n\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt, zule, function () {\n    return [unzlibSync];\n  }], function (ev) {\n    return pbf(unzlibSync(ev.data[0], gu8(ev.data[1])));\n  }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function unzlibSync(data, out) {\n  return inflt((zlv(data), data.subarray(2, -4)), out);\n} // Default algorithm for compression (used because having a known output size allows faster decompression)\n\nexport { gzip as compress, AsyncGzip as AsyncCompress }; // Default algorithm for compression (used because having a known output size allows faster decompression)\n\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\n\nvar Decompress = /*#__PURE__*/function () {\n  /**\n   * Creates a decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n  function Decompress(cb) {\n    this.G = Gunzip;\n    this.I = Inflate;\n    this.Z = Unzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Decompress.prototype.push = function (chunk, final) {\n    if (!this.ondata) throw 'no stream handler';\n\n    if (!this.s) {\n      if (this.p && this.p.length) {\n        var n = new u8(this.p.length + chunk.length);\n        n.set(this.p), n.set(chunk, this.p.length);\n      } else this.p = chunk;\n\n      if (this.p.length > 2) {\n        var _this_1 = this;\n\n        var cb = function cb() {\n          _this_1.ondata.apply(_this_1, arguments);\n        };\n\n        this.s = this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8 ? new this.G(cb) : (this.p[0] & 15) != 8 || this.p[0] >> 4 > 7 || (this.p[0] << 8 | this.p[1]) % 31 ? new this.I(cb) : new this.Z(cb);\n        this.s.push(this.p, final);\n        this.p = null;\n      }\n    } else this.s.push(chunk, final);\n  };\n\n  return Decompress;\n}();\n\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\n\nvar AsyncDecompress = /*#__PURE__*/function () {\n  /**\n  * Creates an asynchronous decompression stream\n  * @param cb The callback to call whenever data is decompressed\n  */\n  function AsyncDecompress(cb) {\n    this.G = AsyncGunzip;\n    this.I = AsyncInflate;\n    this.Z = AsyncUnzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  AsyncDecompress.prototype.push = function (chunk, final) {\n    Decompress.prototype.push.call(this, chunk, final);\n  };\n\n  return AsyncDecompress;\n}();\n\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzip(data, opts, cb) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflate(data, opts, cb) : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function decompressSync(data, out) {\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzipSync(data, out) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflateSync(data, out) : unzlibSync(data, out);\n} // flatten a directory structure\n\nvar fltn = function fltn(d, p, t, o) {\n  for (var k in d) {\n    var val = d[k],\n        n = p + k;\n    if (val instanceof u8) t[n] = [val, o];else if (Array.isArray(val)) t[n] = [val[0], mrg(o, val[1])];else fltn(val, n + '/', t, o);\n  }\n}; // text encoder\n\n\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/new TextEncoder(); // text decoder\n\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/new TextDecoder(); // text decoder stream\n\nvar tds = 0;\n\ntry {\n  td.decode(et, {\n    stream: true\n  });\n  tds = 1;\n} catch (e) {} // decode UTF8\n\n\nvar dutf8 = function dutf8(d) {\n  for (var r = '', i = 0;;) {\n    var c = d[i++];\n    var eb = (c > 127) + (c > 223) + (c > 239);\n    if (i + eb > d.length) return [r, slc(d, i - 1)];\n    if (!eb) r += String.fromCharCode(c);else if (eb == 3) {\n      c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | d[i++] & 63) - 65536, r += String.fromCharCode(55296 | c >> 10, 56320 | c & 1023);\n    } else if (eb & 1) r += String.fromCharCode((c & 31) << 6 | d[i++] & 63);else r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | d[i++] & 63);\n  }\n};\n/**\n * Streaming UTF-8 decoding\n */\n\n\nvar DecodeUTF8 = /*#__PURE__*/function () {\n  /**\n   * Creates a UTF-8 decoding stream\n   * @param cb The callback to call whenever data is decoded\n   */\n  function DecodeUTF8(cb) {\n    this.ondata = cb;\n    if (tds) this.t = new TextDecoder();else this.p = et;\n  }\n  /**\n   * Pushes a chunk to be decoded from UTF-8 binary\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  DecodeUTF8.prototype.push = function (chunk, final) {\n    if (!this.ondata) throw 'no callback';\n    final = !!final;\n\n    if (this.t) {\n      this.ondata(this.t.decode(chunk, {\n        stream: true\n      }), final);\n\n      if (final) {\n        if (this.t.decode().length) throw 'invalid utf-8 data';\n        this.t = null;\n      }\n\n      return;\n    }\n\n    if (!this.p) throw 'stream finished';\n    var dat = new u8(this.p.length + chunk.length);\n    dat.set(this.p);\n    dat.set(chunk, this.p.length);\n\n    var _a = dutf8(dat),\n        ch = _a[0],\n        np = _a[1];\n\n    if (final) {\n      if (np.length) throw 'invalid utf-8 data';\n      this.p = null;\n    } else this.p = np;\n\n    this.ondata(ch, final);\n  };\n\n  return DecodeUTF8;\n}();\n\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\n\nvar EncodeUTF8 = /*#__PURE__*/function () {\n  /**\n   * Creates a UTF-8 decoding stream\n   * @param cb The callback to call whenever data is encoded\n   */\n  function EncodeUTF8(cb) {\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be encoded to UTF-8\n   * @param chunk The string data to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  EncodeUTF8.prototype.push = function (chunk, final) {\n    if (!this.ondata) throw 'no callback';\n    if (this.d) throw 'stream finished';\n    this.ondata(strToU8(chunk), this.d = final || false);\n  };\n\n  return EncodeUTF8;\n}();\n\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\n\nexport function strToU8(str, latin1) {\n  if (latin1) {\n    var ar_1 = new u8(str.length);\n\n    for (var i = 0; i < str.length; ++i) {\n      ar_1[i] = str.charCodeAt(i);\n    }\n\n    return ar_1;\n  }\n\n  if (te) return te.encode(str);\n  var l = str.length;\n  var ar = new u8(str.length + (str.length >> 1));\n  var ai = 0;\n\n  var w = function w(v) {\n    ar[ai++] = v;\n  };\n\n  for (var i = 0; i < l; ++i) {\n    if (ai + 5 > ar.length) {\n      var n = new u8(ai + 8 + (l - i << 1));\n      n.set(ar);\n      ar = n;\n    }\n\n    var c = str.charCodeAt(i);\n    if (c < 128 || latin1) w(c);else if (c < 2048) w(192 | c >> 6), w(128 | c & 63);else if (c > 55295 && c < 57344) c = 65536 + (c & 1023 << 10) | str.charCodeAt(++i) & 1023, w(240 | c >> 18), w(128 | c >> 12 & 63), w(128 | c >> 6 & 63), w(128 | c & 63);else w(224 | c >> 12), w(128 | c >> 6 & 63), w(128 | c & 63);\n  }\n\n  return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\n\nexport function strFromU8(dat, latin1) {\n  if (latin1) {\n    var r = '';\n\n    for (var i = 0; i < dat.length; i += 16384) {\n      r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n    }\n\n    return r;\n  } else if (td) return td.decode(dat);else {\n    var _a = dutf8(dat),\n        out = _a[0],\n        ext = _a[1];\n\n    if (ext.length) throw 'invalid utf-8 data';\n    return out;\n  }\n}\n; // deflate bit flag\n\nvar dbf = function dbf(l) {\n  return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0;\n}; // skip local zip header\n\n\nvar slzh = function slzh(d, b) {\n  return b + 30 + b2(d, b + 26) + b2(d, b + 28);\n}; // read zip header\n\n\nvar zh = function zh(d, b, z) {\n  var fnl = b2(d, b + 28),\n      fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)),\n      es = b + 46 + fnl,\n      bs = b4(d, b + 20);\n\n  var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)],\n      sc = _a[0],\n      su = _a[1],\n      off = _a[2];\n\n  return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n}; // read zip64 extra field\n\n\nvar z64e = function z64e(d, b) {\n  for (; b2(d, b) != 1; b += 4 + b2(d, b + 2)) {\n    ;\n  }\n\n  return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n}; // extra field length\n\n\nvar exfl = function exfl(ex) {\n  var le = 0;\n\n  if (ex) {\n    for (var k in ex) {\n      var l = ex[k].length;\n      if (l > 65535) throw 'extra field too long';\n      le += l + 4;\n    }\n  }\n\n  return le;\n}; // write zip header\n\n\nvar wzh = function wzh(d, b, f, fn, u, c, ce, co) {\n  var fl = fn.length,\n      ex = f.extra,\n      col = co && co.length;\n  var exl = exfl(ex);\n  wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n  if (ce != null) d[b++] = 20, d[b++] = f.os;\n  d[b] = 20, b += 2; // spec compliance? what's that?\n\n  d[b++] = f.flag << 1 | (c == null && 8), d[b++] = u && 8;\n  d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n  var dt = new Date(f.mtime == null ? Date.now() : f.mtime),\n      y = dt.getFullYear() - 1980;\n  if (y < 0 || y > 119) throw 'date not in range 1980-2099';\n  wbytes(d, b, y << 25 | dt.getMonth() + 1 << 21 | dt.getDate() << 16 | dt.getHours() << 11 | dt.getMinutes() << 5 | dt.getSeconds() >>> 1), b += 4;\n\n  if (c != null) {\n    wbytes(d, b, f.crc);\n    wbytes(d, b + 4, c);\n    wbytes(d, b + 8, f.size);\n  }\n\n  wbytes(d, b + 12, fl);\n  wbytes(d, b + 14, exl), b += 16;\n\n  if (ce != null) {\n    wbytes(d, b, col);\n    wbytes(d, b + 6, f.attrs);\n    wbytes(d, b + 10, ce), b += 14;\n  }\n\n  d.set(fn, b);\n  b += fl;\n\n  if (exl) {\n    for (var k in ex) {\n      var exf = ex[k],\n          l = exf.length;\n      wbytes(d, b, +k);\n      wbytes(d, b + 2, l);\n      d.set(exf, b + 4), b += 4 + l;\n    }\n  }\n\n  if (col) d.set(co, b), b += col;\n  return b;\n}; // write zip footer (end of central directory)\n\n\nvar wzf = function wzf(o, b, c, d, e) {\n  wbytes(o, b, 0x6054B50); // skip disk\n\n  wbytes(o, b + 8, c);\n  wbytes(o, b + 10, c);\n  wbytes(o, b + 12, d);\n  wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\n\n\nvar ZipPassThrough = /*#__PURE__*/function () {\n  /**\n   * Creates a pass-through stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   */\n  function ZipPassThrough(filename) {\n    this.filename = filename;\n    this.c = crc();\n    this.size = 0;\n    this.compression = 0;\n  }\n  /**\n   * Processes a chunk and pushes to the output stream. You can override this\n   * method in a subclass for custom behavior, but by default this passes\n   * the data through. You must call this.ondata(err, chunk, final) at some\n   * point in this method.\n   * @param chunk The chunk to process\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipPassThrough.prototype.process = function (chunk, final) {\n    this.ondata(null, chunk, final);\n  };\n  /**\n   * Pushes a chunk to be added. If you are subclassing this with a custom\n   * compression algorithm, note that you must push data from the source\n   * file only, pre-compression.\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipPassThrough.prototype.push = function (chunk, final) {\n    if (!this.ondata) throw 'no callback - add to ZIP archive before pushing';\n    this.c.p(chunk);\n    this.size += chunk.length;\n    if (final) this.crc = this.c.d();\n    this.process(chunk, final || false);\n  };\n\n  return ZipPassThrough;\n}();\n\nexport { ZipPassThrough }; // I don't extend because TypeScript extension adds 1kB of runtime bloat\n\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\n\nvar ZipDeflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   * @param opts The compression options\n   */\n  function ZipDeflate(filename, opts) {\n    var _this_1 = this;\n\n    if (!opts) opts = {};\n    ZipPassThrough.call(this, filename);\n    this.d = new Deflate(opts, function (dat, final) {\n      _this_1.ondata(null, dat, final);\n    });\n    this.compression = 8;\n    this.flag = dbf(opts.level);\n  }\n\n  ZipDeflate.prototype.process = function (chunk, final) {\n    try {\n      this.d.push(chunk, final);\n    } catch (e) {\n      this.ondata(e, null, final);\n    }\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipDeflate.prototype.push = function (chunk, final) {\n    ZipPassThrough.prototype.push.call(this, chunk, final);\n  };\n\n  return ZipDeflate;\n}();\n\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\n\nvar AsyncZipDeflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   * @param opts The compression options\n   */\n  function AsyncZipDeflate(filename, opts) {\n    var _this_1 = this;\n\n    if (!opts) opts = {};\n    ZipPassThrough.call(this, filename);\n    this.d = new AsyncDeflate(opts, function (err, dat, final) {\n      _this_1.ondata(err, dat, final);\n    });\n    this.compression = 8;\n    this.flag = dbf(opts.level);\n    this.terminate = this.d.terminate;\n  }\n\n  AsyncZipDeflate.prototype.process = function (chunk, final) {\n    this.d.push(chunk, final);\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  AsyncZipDeflate.prototype.push = function (chunk, final) {\n    ZipPassThrough.prototype.push.call(this, chunk, final);\n  };\n\n  return AsyncZipDeflate;\n}();\n\nexport { AsyncZipDeflate }; // TODO: Better tree shaking\n\n/**\n * A zippable archive to which files can incrementally be added\n */\n\nvar Zip = /*#__PURE__*/function () {\n  /**\n   * Creates an empty ZIP archive to which files can be added\n   * @param cb The callback to call whenever data for the generated ZIP archive\n   *           is available\n   */\n  function Zip(cb) {\n    this.ondata = cb;\n    this.u = [];\n    this.d = 1;\n  }\n  /**\n   * Adds a file to the ZIP archive\n   * @param file The file stream to add\n   */\n\n\n  Zip.prototype.add = function (file) {\n    var _this_1 = this;\n\n    if (this.d & 2) throw 'stream finished';\n    var f = strToU8(file.filename),\n        fl = f.length;\n    var com = file.comment,\n        o = com && strToU8(com);\n    var u = fl != file.filename.length || o && com.length != o.length;\n    var hl = fl + exfl(file.extra) + 30;\n    if (fl > 65535) throw 'filename too long';\n    var header = new u8(hl);\n    wzh(header, 0, file, f, u);\n    var chks = [header];\n\n    var pAll = function pAll() {\n      for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\n        var chk = chks_1[_i];\n\n        _this_1.ondata(null, chk, false);\n      }\n\n      chks = [];\n    };\n\n    var tr = this.d;\n    this.d = 0;\n    var ind = this.u.length;\n    var uf = mrg(file, {\n      f: f,\n      u: u,\n      o: o,\n      t: function t() {\n        if (file.terminate) file.terminate();\n      },\n      r: function r() {\n        pAll();\n\n        if (tr) {\n          var nxt = _this_1.u[ind + 1];\n          if (nxt) nxt.r();else _this_1.d = 1;\n        }\n\n        tr = 1;\n      }\n    });\n    var cl = 0;\n\n    file.ondata = function (err, dat, final) {\n      if (err) {\n        _this_1.ondata(err, dat, final);\n\n        _this_1.terminate();\n      } else {\n        cl += dat.length;\n        chks.push(dat);\n\n        if (final) {\n          var dd = new u8(16);\n          wbytes(dd, 0, 0x8074B50);\n          wbytes(dd, 4, file.crc);\n          wbytes(dd, 8, cl);\n          wbytes(dd, 12, file.size);\n          chks.push(dd);\n          uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\n          if (tr) uf.r();\n          tr = 1;\n        } else if (tr) pAll();\n      }\n    };\n\n    this.u.push(uf);\n  };\n  /**\n   * Ends the process of adding files and prepares to emit the final chunks.\n   * This *must* be called after adding all desired files for the resulting\n   * ZIP file to work properly.\n   */\n\n\n  Zip.prototype.end = function () {\n    var _this_1 = this;\n\n    if (this.d & 2) {\n      if (this.d & 1) throw 'stream finishing';\n      throw 'stream finished';\n    }\n\n    if (this.d) this.e();else this.u.push({\n      r: function r() {\n        if (!(_this_1.d & 1)) return;\n\n        _this_1.u.splice(-1, 1);\n\n        _this_1.e();\n      },\n      t: function t() {}\n    });\n    this.d = 3;\n  };\n\n  Zip.prototype.e = function () {\n    var bt = 0,\n        l = 0,\n        tl = 0;\n\n    for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n      var f = _a[_i];\n      tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n    }\n\n    var out = new u8(tl + 22);\n\n    for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n      var f = _c[_b];\n      wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n      bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n    }\n\n    wzf(out, bt, this.u.length, tl, l);\n    this.ondata(null, out, true);\n    this.d = 2;\n  };\n  /**\n   * A method to terminate any internal workers used by the stream. Subsequent\n   * calls to add() will fail.\n   */\n\n\n  Zip.prototype.terminate = function () {\n    for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n      var f = _a[_i];\n      f.t();\n    }\n\n    this.d = 2;\n  };\n\n  return Zip;\n}();\n\nexport { Zip };\nexport function zip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  var r = {};\n  fltn(data, '', r, opts);\n  var k = Object.keys(r);\n  var lft = k.length,\n      o = 0,\n      tot = 0;\n  var slft = lft,\n      files = new Array(lft);\n  var term = [];\n\n  var tAll = function tAll() {\n    for (var i = 0; i < term.length; ++i) {\n      term[i]();\n    }\n  };\n\n  var cbf = function cbf() {\n    var out = new u8(tot + 22),\n        oe = o,\n        cdl = tot - o;\n    tot = 0;\n\n    for (var i = 0; i < slft; ++i) {\n      var f = files[i];\n\n      try {\n        var l = f.c.length;\n        wzh(out, tot, f, f.f, f.u, l);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        var loc = tot + badd;\n        out.set(f.c, loc);\n        wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n      } catch (e) {\n        return cb(e, null);\n      }\n    }\n\n    wzf(out, o, files.length, cdl, oe);\n    cb(null, out);\n  };\n\n  if (!lft) cbf();\n\n  var _loop_1 = function _loop_1(i) {\n    var fn = k[i];\n    var _a = r[fn],\n        file = _a[0],\n        p = _a[1];\n    var c = crc(),\n        size = file.length;\n    c.p(file);\n    var f = strToU8(fn),\n        s = f.length;\n    var com = p.comment,\n        m = com && strToU8(com),\n        ms = m && m.length;\n    var exl = exfl(p.extra);\n    var compression = p.level == 0 ? 0 : 8;\n\n    var cbl = function cbl(e, d) {\n      if (e) {\n        tAll();\n        cb(e, null);\n      } else {\n        var l = d.length;\n        files[i] = mrg(p, {\n          size: size,\n          crc: c.d(),\n          c: d,\n          f: f,\n          m: m,\n          u: s != fn.length || m && com.length != ms,\n          compression: compression\n        });\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n        if (! --lft) cbf();\n      }\n    };\n\n    if (s > 65535) cbl('filename too long', null);\n    if (!compression) cbl(null, file);else if (size < 160000) {\n      try {\n        cbl(null, deflateSync(file, p));\n      } catch (e) {\n        cbl(e, null);\n      }\n    } else term.push(deflate(file, p, cbl));\n  }; // Cannot use lft because it can decrease\n\n\n  for (var i = 0; i < slft; ++i) {\n    _loop_1(i);\n  }\n\n  return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\n\nexport function zipSync(data, opts) {\n  if (!opts) opts = {};\n  var r = {};\n  var files = [];\n  fltn(data, '', r, opts);\n  var o = 0;\n  var tot = 0;\n\n  for (var fn in r) {\n    var _a = r[fn],\n        file = _a[0],\n        p = _a[1];\n    var compression = p.level == 0 ? 0 : 8;\n    var f = strToU8(fn),\n        s = f.length;\n    var com = p.comment,\n        m = com && strToU8(com),\n        ms = m && m.length;\n    var exl = exfl(p.extra);\n    if (s > 65535) throw 'filename too long';\n    var d = compression ? deflateSync(file, p) : file,\n        l = d.length;\n    var c = crc();\n    c.p(file);\n    files.push(mrg(p, {\n      size: file.length,\n      crc: c.d(),\n      c: d,\n      f: f,\n      m: m,\n      u: s != fn.length || m && com.length != ms,\n      o: o,\n      compression: compression\n    }));\n    o += 30 + s + exl + l;\n    tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n  }\n\n  var out = new u8(tot + 22),\n      oe = o,\n      cdl = tot - o;\n\n  for (var i = 0; i < files.length; ++i) {\n    var f = files[i];\n    wzh(out, f.o, f, f.f, f.u, f.c.length);\n    var badd = 30 + f.f.length + exfl(f.extra);\n    out.set(f.c, f.o + badd);\n    wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n  }\n\n  wzf(out, o, files.length, cdl, oe);\n  return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\n\nvar UnzipPassThrough = /*#__PURE__*/function () {\n  function UnzipPassThrough() {}\n\n  UnzipPassThrough.prototype.push = function (data, final) {\n    this.ondata(null, data, final);\n  };\n\n  UnzipPassThrough.compression = 0;\n  return UnzipPassThrough;\n}();\n\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\n\nvar UnzipInflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE decompression that can be used in ZIP archives\n   */\n  function UnzipInflate() {\n    var _this_1 = this;\n\n    this.i = new Inflate(function (dat, final) {\n      _this_1.ondata(null, dat, final);\n    });\n  }\n\n  UnzipInflate.prototype.push = function (data, final) {\n    try {\n      this.i.push(data, final);\n    } catch (e) {\n      this.ondata(e, data, final);\n    }\n  };\n\n  UnzipInflate.compression = 8;\n  return UnzipInflate;\n}();\n\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\n\nvar AsyncUnzipInflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE decompression that can be used in ZIP archives\n   */\n  function AsyncUnzipInflate(_, sz) {\n    var _this_1 = this;\n\n    if (sz < 320000) {\n      this.i = new Inflate(function (dat, final) {\n        _this_1.ondata(null, dat, final);\n      });\n    } else {\n      this.i = new AsyncInflate(function (err, dat, final) {\n        _this_1.ondata(err, dat, final);\n      });\n      this.terminate = this.i.terminate;\n    }\n  }\n\n  AsyncUnzipInflate.prototype.push = function (data, final) {\n    if (this.i.terminate) data = slc(data, 0);\n    this.i.push(data, final);\n  };\n\n  AsyncUnzipInflate.compression = 8;\n  return AsyncUnzipInflate;\n}();\n\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\n\nvar Unzip = /*#__PURE__*/function () {\n  /**\n   * Creates a ZIP decompression stream\n   * @param cb The callback to call whenever a file in the ZIP archive is found\n   */\n  function Unzip(cb) {\n    this.onfile = cb;\n    this.k = [];\n    this.o = {\n      0: UnzipPassThrough\n    };\n    this.p = et;\n  }\n  /**\n   * Pushes a chunk to be unzipped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Unzip.prototype.push = function (chunk, final) {\n    var _this_1 = this;\n\n    if (!this.onfile) throw 'no callback';\n    if (!this.p) throw 'stream finished';\n\n    if (this.c > 0) {\n      var len = Math.min(this.c, chunk.length);\n      var toAdd = chunk.subarray(0, len);\n      this.c -= len;\n      if (this.d) this.d.push(toAdd, !this.c);else this.k[0].push(toAdd);\n      chunk = chunk.subarray(len);\n      if (chunk.length) return this.push(chunk, final);\n    } else {\n      var f = 0,\n          i = 0,\n          is = void 0,\n          buf = void 0;\n      if (!this.p.length) buf = chunk;else if (!chunk.length) buf = this.p;else {\n        buf = new u8(this.p.length + chunk.length);\n        buf.set(this.p), buf.set(chunk, this.p.length);\n      }\n      var l = buf.length,\n          oc = this.c,\n          add = oc && this.d;\n\n      var _loop_2 = function _loop_2() {\n        var _a;\n\n        var sig = b4(buf, i);\n\n        if (sig == 0x4034B50) {\n          f = 1, is = i;\n          this_1.d = null;\n          this_1.c = 0;\n          var bf = b2(buf, i + 6),\n              cmp_1 = b2(buf, i + 8),\n              u = bf & 2048,\n              dd = bf & 8,\n              fnl = b2(buf, i + 26),\n              es = b2(buf, i + 28);\n\n          if (l > i + 30 + fnl + es) {\n            var chks_2 = [];\n            this_1.k.unshift(chks_2);\n            f = 2;\n            var sc_1 = b4(buf, i + 18),\n                su_1 = b4(buf, i + 22);\n            var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n\n            if (sc_1 == 4294967295) {\n              _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n            } else if (dd) sc_1 = -1;\n\n            i += es;\n            this_1.c = sc_1;\n            var d_1;\n            var file_1 = {\n              name: fn_1,\n              compression: cmp_1,\n              start: function start() {\n                if (!file_1.ondata) throw 'no callback';\n                if (!sc_1) file_1.ondata(null, et, true);else {\n                  var ctr = _this_1.o[cmp_1];\n                  if (!ctr) throw 'unknown compression type ' + cmp_1;\n                  d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n\n                  d_1.ondata = function (err, dat, final) {\n                    file_1.ondata(err, dat, final);\n                  };\n\n                  for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\n                    var dat = chks_3[_i];\n                    d_1.push(dat, false);\n                  }\n\n                  if (_this_1.k[0] == chks_2 && _this_1.c) _this_1.d = d_1;else d_1.push(et, true);\n                }\n              },\n              terminate: function terminate() {\n                if (d_1 && d_1.terminate) d_1.terminate();\n              }\n            };\n            if (sc_1 >= 0) file_1.size = sc_1, file_1.originalSize = su_1;\n            this_1.onfile(file_1);\n          }\n\n          return \"break\";\n        } else if (oc) {\n          if (sig == 0x8074B50) {\n            is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n            return \"break\";\n          } else if (sig == 0x2014B50) {\n            is = i -= 4, f = 3, this_1.c = 0;\n            return \"break\";\n          }\n        }\n      };\n\n      var this_1 = this;\n\n      for (; i < l - 4; ++i) {\n        var state_1 = _loop_2();\n\n        if (state_1 === \"break\") break;\n      }\n\n      this.p = et;\n\n      if (oc < 0) {\n        var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n        if (add) add.push(dat, !!f);else this.k[+(f == 2)].push(dat);\n      }\n\n      if (f & 2) return this.push(buf.subarray(i), final);\n      this.p = buf.subarray(i);\n    }\n\n    if (final) {\n      if (this.c) throw 'invalid zip file';\n      this.p = null;\n    }\n  };\n  /**\n   * Registers a decoder with the stream, allowing for files compressed with\n   * the compression type provided to be expanded correctly\n   * @param decoder The decoder constructor\n   */\n\n\n  Unzip.prototype.register = function (decoder) {\n    this.o[decoder.compression] = decoder;\n  };\n\n  return Unzip;\n}();\n\nexport { Unzip };\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\n\nexport function unzip(data, cb) {\n  if (typeof cb != 'function') throw 'no callback';\n  var term = [];\n\n  var tAll = function tAll() {\n    for (var i = 0; i < term.length; ++i) {\n      term[i]();\n    }\n  };\n\n  var files = {};\n  var e = data.length - 22;\n\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) {\n      cb('invalid zip file', null);\n      return;\n    }\n  }\n\n  ;\n  var lft = b2(data, e + 8);\n  if (!lft) cb(null, {});\n  var c = lft;\n  var o = b4(data, e + 16);\n  var z = o == 4294967295;\n\n  if (z) {\n    e = b4(data, e - 12);\n\n    if (b4(data, e) != 0x6064B50) {\n      cb('invalid zip file', null);\n      return;\n    }\n\n    c = lft = b4(data, e + 32);\n    o = b4(data, e + 48);\n  }\n\n  var _loop_3 = function _loop_3(i) {\n    var _a = zh(data, o, z),\n        c_1 = _a[0],\n        sc = _a[1],\n        su = _a[2],\n        fn = _a[3],\n        no = _a[4],\n        off = _a[5],\n        b = slzh(data, off);\n\n    o = no;\n\n    var cbl = function cbl(e, d) {\n      if (e) {\n        tAll();\n        cb(e, null);\n      } else {\n        files[fn] = d;\n        if (! --lft) cb(null, files);\n      }\n    };\n\n    if (!c_1) cbl(null, slc(data, b, b + sc));else if (c_1 == 8) {\n      var infl = data.subarray(b, b + sc);\n\n      if (sc < 320000) {\n        try {\n          cbl(null, inflateSync(infl, new u8(su)));\n        } catch (e) {\n          cbl(e, null);\n        }\n      } else term.push(inflate(infl, {\n        size: su\n      }, cbl));\n    } else cbl('unknown compression type ' + c_1, null);\n  };\n\n  for (var i = 0; i < c; ++i) {\n    _loop_3(i);\n  }\n\n  return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\n\nexport function unzipSync(data) {\n  var files = {};\n  var e = data.length - 22;\n\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) throw 'invalid zip file';\n  }\n\n  ;\n  var c = b2(data, e + 8);\n  if (!c) return {};\n  var o = b4(data, e + 16);\n  var z = o == 4294967295;\n\n  if (z) {\n    e = b4(data, e - 12);\n    if (b4(data, e) != 0x6064B50) throw 'invalid zip file';\n    c = b4(data, e + 32);\n    o = b4(data, e + 48);\n  }\n\n  for (var i = 0; i < c; ++i) {\n    var _a = zh(data, o, z),\n        c_2 = _a[0],\n        sc = _a[1],\n        su = _a[2],\n        fn = _a[3],\n        no = _a[4],\n        off = _a[5],\n        b = slzh(data, off);\n\n    o = no;\n    if (!c_2) files[fn] = slc(data, b, b + sc);else if (c_2 == 8) files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));else throw 'unknown compression type ' + c_2;\n  }\n\n  return files;\n}","import _classCallCheck from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Vector4 } from 'three';\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\nvar NURBSUtils = /*#__PURE__*/function () {\n  function NURBSUtils() {\n    _classCallCheck(this, NURBSUtils);\n  }\n\n  _createClass(NURBSUtils, null, [{\n    key: \"findSpan\",\n\n    /*\n    Finds knot vector span.\n    \tp : degree\n    u : parametric value\n    U : knot vector\n    \treturns the span\n    */\n    value: function findSpan(p, u, U) {\n      var n = U.length - p - 1;\n\n      if (u >= U[n]) {\n        return n - 1;\n      }\n\n      if (u <= U[p]) {\n        return p;\n      }\n\n      var low = p;\n      var high = n;\n      var mid = Math.floor((low + high) / 2);\n\n      while (u < U[mid] || u >= U[mid + 1]) {\n        if (u < U[mid]) {\n          high = mid;\n        } else {\n          low = mid;\n        }\n\n        mid = Math.floor((low + high) / 2);\n      }\n\n      return mid;\n    }\n    /*\n    Calculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n    \tspan : span in which u lies\n    u    : parametric point\n    p    : degree\n    U    : knot vector\n    \treturns array[p+1] with basis functions values.\n    */\n\n  }, {\n    key: \"calcBasisFunctions\",\n    value: function calcBasisFunctions(span, u, p, U) {\n      var N = [];\n      var left = [];\n      var right = [];\n      N[0] = 1.0;\n\n      for (var j = 1; j <= p; ++j) {\n        left[j] = u - U[span + 1 - j];\n        right[j] = U[span + j] - u;\n        var saved = 0.0;\n\n        for (var r = 0; r < j; ++r) {\n          var rv = right[r + 1];\n          var lv = left[j - r];\n          var temp = N[r] / (rv + lv);\n          N[r] = saved + rv * temp;\n          saved = lv * temp;\n        }\n\n        N[j] = saved;\n      }\n\n      return N;\n    }\n    /*\n    Calculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n    \tp : degree of B-Spline\n    U : knot vector\n    P : control points (x, y, z, w)\n    u : parametric point\n    \treturns point for given u\n    */\n\n  }, {\n    key: \"calcBSplinePoint\",\n    value: function calcBSplinePoint(p, U, P, u) {\n      var span = this.findSpan(p, u, U);\n      var N = this.calcBasisFunctions(span, u, p, U);\n      var C = new Vector4(0, 0, 0, 0);\n\n      for (var j = 0; j <= p; ++j) {\n        var point = P[span - p + j];\n        var Nj = N[j];\n        var wNj = point.w * Nj;\n        C.x += point.x * wNj;\n        C.y += point.y * wNj;\n        C.z += point.z * wNj;\n        C.w += point.w * Nj;\n      }\n\n      return C;\n    }\n    /*\n    Calculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n    \tspan : span in which u lies\n    u    : parametric point\n    p    : degree\n    n    : number of derivatives to calculate\n    U    : knot vector\n    \treturns array[n+1][p+1] with basis functions derivatives\n    */\n\n  }, {\n    key: \"calcBasisFunctionDerivatives\",\n    value: function calcBasisFunctionDerivatives(span, u, p, n, U) {\n      var zeroArr = [];\n\n      for (var i = 0; i <= p; ++i) {\n        zeroArr[i] = 0.0;\n      }\n\n      var ders = [];\n\n      for (var _i = 0; _i <= n; ++_i) {\n        ders[_i] = zeroArr.slice(0);\n      }\n\n      var ndu = [];\n\n      for (var _i2 = 0; _i2 <= p; ++_i2) {\n        ndu[_i2] = zeroArr.slice(0);\n      }\n\n      ndu[0][0] = 1.0;\n      var left = zeroArr.slice(0);\n      var right = zeroArr.slice(0);\n\n      for (var j = 1; j <= p; ++j) {\n        left[j] = u - U[span + 1 - j];\n        right[j] = U[span + j] - u;\n        var saved = 0.0;\n\n        for (var _r = 0; _r < j; ++_r) {\n          var rv = right[_r + 1];\n          var lv = left[j - _r];\n          ndu[j][_r] = rv + lv;\n          var temp = ndu[_r][j - 1] / ndu[j][_r];\n          ndu[_r][j] = saved + rv * temp;\n          saved = lv * temp;\n        }\n\n        ndu[j][j] = saved;\n      }\n\n      for (var _j = 0; _j <= p; ++_j) {\n        ders[0][_j] = ndu[_j][p];\n      }\n\n      for (var _r2 = 0; _r2 <= p; ++_r2) {\n        var s1 = 0;\n        var s2 = 1;\n        var a = [];\n\n        for (var _i3 = 0; _i3 <= p; ++_i3) {\n          a[_i3] = zeroArr.slice(0);\n        }\n\n        a[0][0] = 1.0;\n\n        for (var k = 1; k <= n; ++k) {\n          var d = 0.0;\n          var rk = _r2 - k;\n          var pk = p - k;\n\n          if (_r2 >= k) {\n            a[s2][0] = a[s1][0] / ndu[pk + 1][rk];\n            d = a[s2][0] * ndu[rk][pk];\n          }\n\n          var j1 = rk >= -1 ? 1 : -rk;\n          var j2 = _r2 - 1 <= pk ? k - 1 : p - _r2;\n\n          for (var _j3 = j1; _j3 <= j2; ++_j3) {\n            a[s2][_j3] = (a[s1][_j3] - a[s1][_j3 - 1]) / ndu[pk + 1][rk + _j3];\n            d += a[s2][_j3] * ndu[rk + _j3][pk];\n          }\n\n          if (_r2 <= pk) {\n            a[s2][k] = -a[s1][k - 1] / ndu[pk + 1][_r2];\n            d += a[s2][k] * ndu[_r2][pk];\n          }\n\n          ders[k][_r2] = d;\n          var _j2 = s1;\n          s1 = s2;\n          s2 = _j2;\n        }\n      }\n\n      var r = p;\n\n      for (var _k = 1; _k <= n; ++_k) {\n        for (var _j4 = 0; _j4 <= p; ++_j4) {\n          ders[_k][_j4] *= r;\n        }\n\n        r *= p - _k;\n      }\n\n      return ders;\n    }\n    /*\n    \tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n    \t\tp  : degree\n    \tU  : knot vector\n    \tP  : control points\n    \tu  : Parametric points\n    \tnd : number of derivatives\n    \t\treturns array[d+1] with derivatives\n    \t*/\n\n  }, {\n    key: \"calcBSplineDerivatives\",\n    value: function calcBSplineDerivatives(p, U, P, u, nd) {\n      var du = nd < p ? nd : p;\n      var CK = [];\n      var span = this.findSpan(p, u, U);\n      var nders = this.calcBasisFunctionDerivatives(span, u, p, du, U);\n      var Pw = [];\n\n      for (var i = 0; i < P.length; ++i) {\n        var point = P[i].clone();\n        var w = point.w;\n        point.x *= w;\n        point.y *= w;\n        point.z *= w;\n        Pw[i] = point;\n      }\n\n      for (var k = 0; k <= du; ++k) {\n        var _point = Pw[span - p].clone().multiplyScalar(nders[k][0]);\n\n        for (var j = 1; j <= p; ++j) {\n          _point.add(Pw[span - p + j].clone().multiplyScalar(nders[k][j]));\n        }\n\n        CK[k] = _point;\n      }\n\n      for (var _k2 = du + 1; _k2 <= nd + 1; ++_k2) {\n        CK[_k2] = new Vector4(0, 0, 0);\n      }\n\n      return CK;\n    }\n    /*\n    Calculate \"K over I\"\n    \treturns k!/(i!(k-i)!)\n    */\n\n  }, {\n    key: \"calcKoverI\",\n    value: function calcKoverI(k, i) {\n      var nom = 1;\n\n      for (var j = 2; j <= k; ++j) {\n        nom *= j;\n      }\n\n      var denom = 1;\n\n      for (var _j5 = 2; _j5 <= i; ++_j5) {\n        denom *= _j5;\n      }\n\n      for (var _j6 = 2; _j6 <= k - i; ++_j6) {\n        denom *= _j6;\n      }\n\n      return nom / denom;\n    }\n    /*\n    Calculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n    \tPders : result of function calcBSplineDerivatives\n    \treturns array with derivatives for rational curve.\n    */\n\n  }, {\n    key: \"calcRationalCurveDerivatives\",\n    value: function calcRationalCurveDerivatives(Pders) {\n      var nd = Pders.length;\n      var Aders = [];\n      var wders = [];\n\n      for (var i = 0; i < nd; ++i) {\n        var point = Pders[i];\n        Aders[i] = new Vector3(point.x, point.y, point.z);\n        wders[i] = point.w;\n      }\n\n      var CK = [];\n\n      for (var k = 0; k < nd; ++k) {\n        var v = Aders[k].clone();\n\n        for (var _i4 = 1; _i4 <= k; ++_i4) {\n          v.sub(CK[k - _i4].clone().multiplyScalar(this.calcKoverI(k, _i4) * wders[_i4]));\n        }\n\n        CK[k] = v.divideScalar(wders[0]);\n      }\n\n      return CK;\n    }\n    /*\n    Calculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n    \tp  : degree\n    U  : knot vector\n    P  : control points in homogeneous space\n    u  : parametric points\n    nd : number of derivatives\n    \treturns array with derivatives.\n    */\n\n  }, {\n    key: \"calcNURBSDerivatives\",\n    value: function calcNURBSDerivatives(p, U, P, u, nd) {\n      var Pders = this.calcBSplineDerivatives(p, U, P, u, nd);\n      return this.calcRationalCurveDerivatives(Pders);\n    }\n    /*\n    Calculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n    \tp1, p2 : degrees of B-Spline surface\n    U1, U2 : knot vectors\n    P      : control points (x, y, z, w)\n    u, v   : parametric values\n    \treturns point for given (u, v)\n    */\n\n  }, {\n    key: \"calcSurfacePoint\",\n    value: function calcSurfacePoint(p, q, U, V, P, u, v, target) {\n      var uspan = this.findSpan(p, u, U);\n      var vspan = this.findSpan(q, v, V);\n      var Nu = this.calcBasisFunctions(uspan, u, p, U);\n      var Nv = this.calcBasisFunctions(vspan, v, q, V);\n      var temp = [];\n\n      for (var l = 0; l <= q; ++l) {\n        temp[l] = new Vector4(0, 0, 0, 0);\n\n        for (var k = 0; k <= p; ++k) {\n          var point = P[uspan - p + k][vspan - q + l].clone();\n          var w = point.w;\n          point.x *= w;\n          point.y *= w;\n          point.z *= w;\n          temp[l].add(point.multiplyScalar(Nu[k]));\n        }\n      }\n\n      var Sw = new Vector4(0, 0, 0, 0);\n\n      for (var _l = 0; _l <= q; ++_l) {\n        Sw.add(temp[_l].multiplyScalar(Nv[_l]));\n      }\n\n      Sw.divideScalar(Sw.w);\n      target.set(Sw.x, Sw.y, Sw.z);\n    }\n  }]);\n\n  return NURBSUtils;\n}();\n\nexport { NURBSUtils };","import _classCallCheck from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Curve, Vector3, Vector4 } from 'three';\nimport { NURBSUtils } from '../curves/NURBSUtils.js';\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nvar NURBSCurve = /*#__PURE__*/function (_Curve) {\n  _inherits(NURBSCurve, _Curve);\n\n  var _super = _createSuper(NURBSCurve);\n\n  function NURBSCurve(degree, knots\n  /* array of reals */\n  , controlPoints\n  /* array of Vector(2|3|4) */\n  , startKnot\n  /* index in knots */\n  , endKnot\n  /* index in knots */\n  ) {\n    var _this;\n\n    _classCallCheck(this, NURBSCurve);\n\n    _this = _super.call(this);\n    _this.degree = degree;\n    _this.knots = knots;\n    _this.controlPoints = []; // Used by periodic NURBS to remove hidden spans\n\n    _this.startKnot = startKnot || 0;\n    _this.endKnot = endKnot || _this.knots.length - 1;\n\n    for (var i = 0; i < controlPoints.length; ++i) {\n      // ensure Vector4 for control points\n      var point = controlPoints[i];\n      _this.controlPoints[i] = new Vector4(point.x, point.y, point.z, point.w);\n    }\n\n    return _this;\n  }\n\n  _createClass(NURBSCurve, [{\n    key: \"getPoint\",\n    value: function getPoint(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var point = optionalTarget;\n      var u = this.knots[this.startKnot] + t * (this.knots[this.endKnot] - this.knots[this.startKnot]); // linear mapping t->u\n      // following results in (wx, wy, wz, w) homogeneous point\n\n      var hpoint = NURBSUtils.calcBSplinePoint(this.degree, this.knots, this.controlPoints, u);\n\n      if (hpoint.w !== 1.0) {\n        // project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n        hpoint.divideScalar(hpoint.w);\n      }\n\n      return point.set(hpoint.x, hpoint.y, hpoint.z);\n    }\n  }, {\n    key: \"getTangent\",\n    value: function getTangent(t) {\n      var optionalTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Vector3();\n      var tangent = optionalTarget;\n      var u = this.knots[0] + t * (this.knots[this.knots.length - 1] - this.knots[0]);\n      var ders = NURBSUtils.calcNURBSDerivatives(this.degree, this.knots, this.controlPoints, u, 1);\n      tangent.copy(ders[1]).normalize();\n      return tangent;\n    }\n  }]);\n\n  return NURBSCurve;\n}(Curve);\n\nexport { NURBSCurve };","import _classCallCheck from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { AmbientLight, AnimationClip, Bone, BufferAttribute, BufferGeometry, ClampToEdgeWrapping, Color, DirectionalLight, EquirectangularReflectionMapping, Euler, FileLoader, Float32BufferAttribute, Group, Line, LineBasicMaterial, Loader, LoaderUtils, MathUtils, Matrix3, Matrix4, Mesh, MeshLambertMaterial, MeshPhongMaterial, NumberKeyframeTrack, Object3D, OrthographicCamera, PerspectiveCamera, PointLight, PropertyBinding, Quaternion, QuaternionKeyframeTrack, RepeatWrapping, Skeleton, SkinnedMesh, SpotLight, Texture, TextureLoader, Uint16BufferAttribute, Vector3, Vector4, VectorKeyframeTrack, sRGBEncoding } from 'three';\nimport * as fflate from '../libs/fflate.module.js';\nimport { NURBSCurve } from '../curves/NURBSCurve.js';\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\nvar fbxTree;\nvar connections;\nvar sceneGraph;\n\nvar FBXLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(FBXLoader, _Loader);\n\n  var _super = _createSuper(FBXLoader);\n\n  function FBXLoader(manager) {\n    _classCallCheck(this, FBXLoader);\n\n    return _super.call(this, manager);\n  }\n\n  _createClass(FBXLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var path = scope.path === '' ? LoaderUtils.extractUrlBase(url) : scope.path;\n      var loader = new FileLoader(this.manager);\n      loader.setPath(scope.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(scope.requestHeader);\n      loader.setWithCredentials(scope.withCredentials);\n      loader.load(url, function (buffer) {\n        try {\n          onLoad(scope.parse(buffer, path));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n\n          scope.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(FBXBuffer, path) {\n      if (isFbxFormatBinary(FBXBuffer)) {\n        fbxTree = new BinaryParser().parse(FBXBuffer);\n      } else {\n        var FBXText = convertArrayBufferToString(FBXBuffer);\n\n        if (!isFbxFormatASCII(FBXText)) {\n          throw new Error('THREE.FBXLoader: Unknown format.');\n        }\n\n        if (getFbxVersion(FBXText) < 7000) {\n          throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion(FBXText));\n        }\n\n        fbxTree = new TextParser().parse(FBXText);\n      } // console.log( fbxTree );\n\n\n      var textureLoader = new TextureLoader(this.manager).setPath(this.resourcePath || path).setCrossOrigin(this.crossOrigin);\n      return new FBXTreeParser(textureLoader, this.manager).parse(fbxTree);\n    }\n  }]);\n\n  return FBXLoader;\n}(Loader); // Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\n\n\nvar FBXTreeParser = /*#__PURE__*/function () {\n  function FBXTreeParser(textureLoader, manager) {\n    _classCallCheck(this, FBXTreeParser);\n\n    this.textureLoader = textureLoader;\n    this.manager = manager;\n  }\n\n  _createClass(FBXTreeParser, [{\n    key: \"parse\",\n    value: function parse() {\n      connections = this.parseConnections();\n      var images = this.parseImages();\n      var textures = this.parseTextures(images);\n      var materials = this.parseMaterials(textures);\n      var deformers = this.parseDeformers();\n      var geometryMap = new GeometryParser().parse(deformers);\n      this.parseScene(deformers, geometryMap, materials);\n      return sceneGraph;\n    } // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n    // and details the connection type\n\n  }, {\n    key: \"parseConnections\",\n    value: function parseConnections() {\n      var connectionMap = new Map();\n\n      if ('Connections' in fbxTree) {\n        var rawConnections = fbxTree.Connections.connections;\n        rawConnections.forEach(function (rawConnection) {\n          var fromID = rawConnection[0];\n          var toID = rawConnection[1];\n          var relationship = rawConnection[2];\n\n          if (!connectionMap.has(fromID)) {\n            connectionMap.set(fromID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var parentRelationship = {\n            ID: toID,\n            relationship: relationship\n          };\n          connectionMap.get(fromID).parents.push(parentRelationship);\n\n          if (!connectionMap.has(toID)) {\n            connectionMap.set(toID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var childRelationship = {\n            ID: fromID,\n            relationship: relationship\n          };\n          connectionMap.get(toID).children.push(childRelationship);\n        });\n      }\n\n      return connectionMap;\n    } // Parse FBXTree.Objects.Video for embedded image data\n    // These images are connected to textures in FBXTree.Objects.Textures\n    // via FBXTree.Connections.\n\n  }, {\n    key: \"parseImages\",\n    value: function parseImages() {\n      var images = {};\n      var blobs = {};\n\n      if ('Video' in fbxTree.Objects) {\n        var videoNodes = fbxTree.Objects.Video;\n\n        for (var nodeID in videoNodes) {\n          var videoNode = videoNodes[nodeID];\n          var id = parseInt(nodeID);\n          images[id] = videoNode.RelativeFilename || videoNode.Filename; // raw image data is in videoNode.Content\n\n          if ('Content' in videoNode) {\n            var arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0;\n            var base64Content = typeof videoNode.Content === 'string' && videoNode.Content !== '';\n\n            if (arrayBufferContent || base64Content) {\n              var image = this.parseImage(videoNodes[nodeID]);\n              blobs[videoNode.RelativeFilename || videoNode.Filename] = image;\n            }\n          }\n        }\n      }\n\n      for (var _id in images) {\n        var filename = images[_id];\n        if (blobs[filename] !== undefined) images[_id] = blobs[filename];else images[_id] = images[_id].split('\\\\').pop();\n      }\n\n      return images;\n    } // Parse embedded image data in FBXTree.Video.Content\n\n  }, {\n    key: \"parseImage\",\n    value: function parseImage(videoNode) {\n      var content = videoNode.Content;\n      var fileName = videoNode.RelativeFilename || videoNode.Filename;\n      var extension = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase();\n      var type;\n\n      switch (extension) {\n        case 'bmp':\n          type = 'image/bmp';\n          break;\n\n        case 'jpg':\n        case 'jpeg':\n          type = 'image/jpeg';\n          break;\n\n        case 'png':\n          type = 'image/png';\n          break;\n\n        case 'tif':\n          type = 'image/tiff';\n          break;\n\n        case 'tga':\n          if (this.manager.getHandler('.tga') === null) {\n            console.warn('FBXLoader: TGA loader not found, skipping ', fileName);\n          }\n\n          type = 'image/tga';\n          break;\n\n        default:\n          console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.');\n          return;\n      }\n\n      if (typeof content === 'string') {\n        // ASCII format\n        return 'data:' + type + ';base64,' + content;\n      } else {\n        // Binary Format\n        var array = new Uint8Array(content);\n        return window.URL.createObjectURL(new Blob([array], {\n          type: type\n        }));\n      }\n    } // Parse nodes in FBXTree.Objects.Texture\n    // These contain details such as UV scaling, cropping, rotation etc and are connected\n    // to images in FBXTree.Objects.Video\n\n  }, {\n    key: \"parseTextures\",\n    value: function parseTextures(images) {\n      var textureMap = new Map();\n\n      if ('Texture' in fbxTree.Objects) {\n        var textureNodes = fbxTree.Objects.Texture;\n\n        for (var nodeID in textureNodes) {\n          var texture = this.parseTexture(textureNodes[nodeID], images);\n          textureMap.set(parseInt(nodeID), texture);\n        }\n      }\n\n      return textureMap;\n    } // Parse individual node in FBXTree.Objects.Texture\n\n  }, {\n    key: \"parseTexture\",\n    value: function parseTexture(textureNode, images) {\n      var texture = this.loadTexture(textureNode, images);\n      texture.ID = textureNode.id;\n      texture.name = textureNode.attrName;\n      var wrapModeU = textureNode.WrapModeU;\n      var wrapModeV = textureNode.WrapModeV;\n      var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n      var valueV = wrapModeV !== undefined ? wrapModeV.value : 0; // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n      // 0: repeat(default), 1: clamp\n\n      texture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n      texture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n      if ('Scaling' in textureNode) {\n        var values = textureNode.Scaling.value;\n        texture.repeat.x = values[0];\n        texture.repeat.y = values[1];\n      }\n\n      return texture;\n    } // load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\n  }, {\n    key: \"loadTexture\",\n    value: function loadTexture(textureNode, images) {\n      var fileName;\n      var currentPath = this.textureLoader.path;\n      var children = connections.get(textureNode.id).children;\n\n      if (children !== undefined && children.length > 0 && images[children[0].ID] !== undefined) {\n        fileName = images[children[0].ID];\n\n        if (fileName.indexOf('blob:') === 0 || fileName.indexOf('data:') === 0) {\n          this.textureLoader.setPath(undefined);\n        }\n      }\n\n      var texture;\n      var extension = textureNode.FileName.slice(-3).toLowerCase();\n\n      if (extension === 'tga') {\n        var loader = this.manager.getHandler('.tga');\n\n        if (loader === null) {\n          console.warn('FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename);\n          texture = new Texture();\n        } else {\n          texture = loader.load(fileName);\n        }\n      } else if (extension === 'psd') {\n        console.warn('FBXLoader: PSD textures are not supported, creating placeholder texture for', textureNode.RelativeFilename);\n        texture = new Texture();\n      } else {\n        texture = this.textureLoader.load(fileName);\n      }\n\n      this.textureLoader.setPath(currentPath);\n      return texture;\n    } // Parse nodes in FBXTree.Objects.Material\n\n  }, {\n    key: \"parseMaterials\",\n    value: function parseMaterials(textureMap) {\n      var materialMap = new Map();\n\n      if ('Material' in fbxTree.Objects) {\n        var materialNodes = fbxTree.Objects.Material;\n\n        for (var nodeID in materialNodes) {\n          var material = this.parseMaterial(materialNodes[nodeID], textureMap);\n          if (material !== null) materialMap.set(parseInt(nodeID), material);\n        }\n      }\n\n      return materialMap;\n    } // Parse single node in FBXTree.Objects.Material\n    // Materials are connected to texture maps in FBXTree.Objects.Textures\n    // FBX format currently only supports Lambert and Phong shading models\n\n  }, {\n    key: \"parseMaterial\",\n    value: function parseMaterial(materialNode, textureMap) {\n      var ID = materialNode.id;\n      var name = materialNode.attrName;\n      var type = materialNode.ShadingModel; // Case where FBX wraps shading model in property object.\n\n      if (typeof type === 'object') {\n        type = type.value;\n      } // Ignore unused materials which don't have any connections.\n\n\n      if (!connections.has(ID)) return null;\n      var parameters = this.parseParameters(materialNode, textureMap, ID);\n      var material;\n\n      switch (type.toLowerCase()) {\n        case 'phong':\n          material = new MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new MeshLambertMaterial();\n          break;\n\n        default:\n          console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type);\n          material = new MeshPhongMaterial();\n          break;\n      }\n\n      material.setValues(parameters);\n      material.name = name;\n      return material;\n    } // Parse FBX material and return parameters suitable for a three.js material\n    // Also parse the texture map and return any textures associated with the material\n\n  }, {\n    key: \"parseParameters\",\n    value: function parseParameters(materialNode, textureMap, ID) {\n      var parameters = {};\n\n      if (materialNode.BumpFactor) {\n        parameters.bumpScale = materialNode.BumpFactor.value;\n      }\n\n      if (materialNode.Diffuse) {\n        parameters.color = new Color().fromArray(materialNode.Diffuse.value);\n      } else if (materialNode.DiffuseColor && (materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB')) {\n        // The blender exporter exports diffuse here instead of in materialNode.Diffuse\n        parameters.color = new Color().fromArray(materialNode.DiffuseColor.value);\n      }\n\n      if (materialNode.DisplacementFactor) {\n        parameters.displacementScale = materialNode.DisplacementFactor.value;\n      }\n\n      if (materialNode.Emissive) {\n        parameters.emissive = new Color().fromArray(materialNode.Emissive.value);\n      } else if (materialNode.EmissiveColor && (materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB')) {\n        // The blender exporter exports emissive color here instead of in materialNode.Emissive\n        parameters.emissive = new Color().fromArray(materialNode.EmissiveColor.value);\n      }\n\n      if (materialNode.EmissiveFactor) {\n        parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value);\n      }\n\n      if (materialNode.Opacity) {\n        parameters.opacity = parseFloat(materialNode.Opacity.value);\n      }\n\n      if (parameters.opacity < 1.0) {\n        parameters.transparent = true;\n      }\n\n      if (materialNode.ReflectionFactor) {\n        parameters.reflectivity = materialNode.ReflectionFactor.value;\n      }\n\n      if (materialNode.Shininess) {\n        parameters.shininess = materialNode.Shininess.value;\n      }\n\n      if (materialNode.Specular) {\n        parameters.specular = new Color().fromArray(materialNode.Specular.value);\n      } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color') {\n        // The blender exporter exports specular color here instead of in materialNode.Specular\n        parameters.specular = new Color().fromArray(materialNode.SpecularColor.value);\n      }\n\n      var scope = this;\n      connections.get(ID).children.forEach(function (child) {\n        var type = child.relationship;\n\n        switch (type) {\n          case 'Bump':\n            parameters.bumpMap = scope.getTexture(textureMap, child.ID);\n            break;\n\n          case 'Maya|TEX_ao_map':\n            parameters.aoMap = scope.getTexture(textureMap, child.ID);\n            break;\n\n          case 'DiffuseColor':\n          case 'Maya|TEX_color_map':\n            parameters.map = scope.getTexture(textureMap, child.ID);\n            parameters.map.encoding = sRGBEncoding;\n            break;\n\n          case 'DisplacementColor':\n            parameters.displacementMap = scope.getTexture(textureMap, child.ID);\n            break;\n\n          case 'EmissiveColor':\n            parameters.emissiveMap = scope.getTexture(textureMap, child.ID);\n            parameters.emissiveMap.encoding = sRGBEncoding;\n            break;\n\n          case 'NormalMap':\n          case 'Maya|TEX_normal_map':\n            parameters.normalMap = scope.getTexture(textureMap, child.ID);\n            break;\n\n          case 'ReflectionColor':\n            parameters.envMap = scope.getTexture(textureMap, child.ID);\n            parameters.envMap.mapping = EquirectangularReflectionMapping;\n            parameters.envMap.encoding = sRGBEncoding;\n            break;\n\n          case 'SpecularColor':\n            parameters.specularMap = scope.getTexture(textureMap, child.ID);\n            parameters.specularMap.encoding = sRGBEncoding;\n            break;\n\n          case 'TransparentColor':\n          case 'TransparencyFactor':\n            parameters.alphaMap = scope.getTexture(textureMap, child.ID);\n            parameters.transparent = true;\n            break;\n\n          case 'AmbientColor':\n          case 'ShininessExponent': // AKA glossiness map\n\n          case 'SpecularFactor': // AKA specularLevel\n\n          case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\n          default:\n            console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type);\n            break;\n        }\n      });\n      return parameters;\n    } // get a texture from the textureMap for use by a material.\n\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(textureMap, id) {\n      // if the texture is a layered texture, just use the first layer and issue a warning\n      if ('LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\n        console.warn('THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.');\n        id = connections.get(id).children[0].ID;\n      }\n\n      return textureMap.get(id);\n    } // Parse nodes in FBXTree.Objects.Deformer\n    // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n    // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\n  }, {\n    key: \"parseDeformers\",\n    value: function parseDeformers() {\n      var skeletons = {};\n      var morphTargets = {};\n\n      if ('Deformer' in fbxTree.Objects) {\n        var DeformerNodes = fbxTree.Objects.Deformer;\n\n        for (var nodeID in DeformerNodes) {\n          var deformerNode = DeformerNodes[nodeID];\n          var relationships = connections.get(parseInt(nodeID));\n\n          if (deformerNode.attrType === 'Skin') {\n            var skeleton = this.parseSkeleton(relationships, DeformerNodes);\n            skeleton.ID = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: skeleton attached to more than one geometry is not supported.');\n            skeleton.geometryID = relationships.parents[0].ID;\n            skeletons[nodeID] = skeleton;\n          } else if (deformerNode.attrType === 'BlendShape') {\n            var morphTarget = {\n              id: nodeID\n            };\n            morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes);\n            morphTarget.id = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: morph target attached to more than one geometry is not supported.');\n            morphTargets[nodeID] = morphTarget;\n          }\n        }\n      }\n\n      return {\n        skeletons: skeletons,\n        morphTargets: morphTargets\n      };\n    } // Parse single nodes in FBXTree.Objects.Deformer\n    // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n    // Each skin node represents a skeleton and each cluster node represents a bone\n\n  }, {\n    key: \"parseSkeleton\",\n    value: function parseSkeleton(relationships, deformerNodes) {\n      var rawBones = [];\n      relationships.children.forEach(function (child) {\n        var boneNode = deformerNodes[child.ID];\n        if (boneNode.attrType !== 'Cluster') return;\n        var rawBone = {\n          ID: child.ID,\n          indices: [],\n          weights: [],\n          transformLink: new Matrix4().fromArray(boneNode.TransformLink.a) // transform: new Matrix4().fromArray( boneNode.Transform.a ),\n          // linkMode: boneNode.Mode,\n\n        };\n\n        if ('Indexes' in boneNode) {\n          rawBone.indices = boneNode.Indexes.a;\n          rawBone.weights = boneNode.Weights.a;\n        }\n\n        rawBones.push(rawBone);\n      });\n      return {\n        rawBones: rawBones,\n        bones: []\n      };\n    } // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\n  }, {\n    key: \"parseMorphTargets\",\n    value: function parseMorphTargets(relationships, deformerNodes) {\n      var rawMorphTargets = [];\n\n      for (var i = 0; i < relationships.children.length; i++) {\n        var child = relationships.children[i];\n        var morphTargetNode = deformerNodes[child.ID];\n        var rawMorphTarget = {\n          name: morphTargetNode.attrName,\n          initialWeight: morphTargetNode.DeformPercent,\n          id: morphTargetNode.id,\n          fullWeights: morphTargetNode.FullWeights.a\n        };\n        if (morphTargetNode.attrType !== 'BlendShapeChannel') return;\n        rawMorphTarget.geoID = connections.get(parseInt(child.ID)).children.filter(function (child) {\n          return child.relationship === undefined;\n        })[0].ID;\n        rawMorphTargets.push(rawMorphTarget);\n      }\n\n      return rawMorphTargets;\n    } // create the main Group() to be returned by the loader\n\n  }, {\n    key: \"parseScene\",\n    value: function parseScene(deformers, geometryMap, materialMap) {\n      sceneGraph = new Group();\n      var modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap);\n      var modelNodes = fbxTree.Objects.Model;\n      var scope = this;\n      modelMap.forEach(function (model) {\n        var modelNode = modelNodes[model.ID];\n        scope.setLookAtProperties(model, modelNode);\n        var parentConnections = connections.get(model.ID).parents;\n        parentConnections.forEach(function (connection) {\n          var parent = modelMap.get(connection.ID);\n          if (parent !== undefined) parent.add(model);\n        });\n\n        if (model.parent === null) {\n          sceneGraph.add(model);\n        }\n      });\n      this.bindSkeleton(deformers.skeletons, geometryMap, modelMap);\n      this.createAmbientLight();\n      this.setupMorphMaterials();\n      sceneGraph.traverse(function (node) {\n        if (node.userData.transformData) {\n          if (node.parent) {\n            node.userData.transformData.parentMatrix = node.parent.matrix;\n            node.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n          }\n\n          var transform = generateTransform(node.userData.transformData);\n          node.applyMatrix4(transform);\n          node.updateWorldMatrix();\n        }\n      });\n      var animations = new AnimationParser().parse(); // if all the models where already combined in a single group, just return that\n\n      if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\n        sceneGraph.children[0].animations = animations;\n        sceneGraph = sceneGraph.children[0];\n      }\n\n      sceneGraph.animations = animations;\n    } // parse nodes in FBXTree.Objects.Model\n\n  }, {\n    key: \"parseModels\",\n    value: function parseModels(skeletons, geometryMap, materialMap) {\n      var modelMap = new Map();\n      var modelNodes = fbxTree.Objects.Model;\n\n      for (var nodeID in modelNodes) {\n        var id = parseInt(nodeID);\n        var node = modelNodes[nodeID];\n        var relationships = connections.get(id);\n        var model = this.buildSkeleton(relationships, skeletons, id, node.attrName);\n\n        if (!model) {\n          switch (node.attrType) {\n            case 'Camera':\n              model = this.createCamera(relationships);\n              break;\n\n            case 'Light':\n              model = this.createLight(relationships);\n              break;\n\n            case 'Mesh':\n              model = this.createMesh(relationships, geometryMap, materialMap);\n              break;\n\n            case 'NurbsCurve':\n              model = this.createCurve(relationships, geometryMap);\n              break;\n\n            case 'LimbNode':\n            case 'Root':\n              model = new Bone();\n              break;\n\n            case 'Null':\n            default:\n              model = new Group();\n              break;\n          }\n\n          model.name = node.attrName ? PropertyBinding.sanitizeNodeName(node.attrName) : '';\n          model.ID = id;\n        }\n\n        this.getTransformData(model, node);\n        modelMap.set(id, model);\n      }\n\n      return modelMap;\n    }\n  }, {\n    key: \"buildSkeleton\",\n    value: function buildSkeleton(relationships, skeletons, id, name) {\n      var bone = null;\n      relationships.parents.forEach(function (parent) {\n        var _loop = function _loop(ID) {\n          var skeleton = skeletons[ID];\n          skeleton.rawBones.forEach(function (rawBone, i) {\n            if (rawBone.ID === parent.ID) {\n              var subBone = bone;\n              bone = new Bone();\n              bone.matrixWorld.copy(rawBone.transformLink); // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n              bone.name = name ? PropertyBinding.sanitizeNodeName(name) : '';\n              bone.ID = id;\n              skeleton.bones[i] = bone; // In cases where a bone is shared between multiple meshes\n              // duplicate the bone here and and it as a child of the first bone\n\n              if (subBone !== null) {\n                bone.add(subBone);\n              }\n            }\n          });\n        };\n\n        for (var ID in skeletons) {\n          _loop(ID);\n        }\n      });\n      return bone;\n    } // create a PerspectiveCamera or OrthographicCamera\n\n  }, {\n    key: \"createCamera\",\n    value: function createCamera(relationships) {\n      var model;\n      var cameraAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          cameraAttribute = attr;\n        }\n      });\n\n      if (cameraAttribute === undefined) {\n        model = new Object3D();\n      } else {\n        var type = 0;\n\n        if (cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1) {\n          type = 1;\n        }\n\n        var nearClippingPlane = 1;\n\n        if (cameraAttribute.NearPlane !== undefined) {\n          nearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n        }\n\n        var farClippingPlane = 1000;\n\n        if (cameraAttribute.FarPlane !== undefined) {\n          farClippingPlane = cameraAttribute.FarPlane.value / 1000;\n        }\n\n        var width = window.innerWidth;\n        var height = window.innerHeight;\n\n        if (cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined) {\n          width = cameraAttribute.AspectWidth.value;\n          height = cameraAttribute.AspectHeight.value;\n        }\n\n        var aspect = width / height;\n        var fov = 45;\n\n        if (cameraAttribute.FieldOfView !== undefined) {\n          fov = cameraAttribute.FieldOfView.value;\n        }\n\n        var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n        switch (type) {\n          case 0:\n            // Perspective\n            model = new PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane);\n            if (focalLength !== null) model.setFocalLength(focalLength);\n            break;\n\n          case 1:\n            // Orthographic\n            model = new OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, nearClippingPlane, farClippingPlane);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown camera type ' + type + '.');\n            model = new Object3D();\n            break;\n        }\n      }\n\n      return model;\n    } // Create a DirectionalLight, PointLight or SpotLight\n\n  }, {\n    key: \"createLight\",\n    value: function createLight(relationships) {\n      var model;\n      var lightAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          lightAttribute = attr;\n        }\n      });\n\n      if (lightAttribute === undefined) {\n        model = new Object3D();\n      } else {\n        var type; // LightType can be undefined for Point lights\n\n        if (lightAttribute.LightType === undefined) {\n          type = 0;\n        } else {\n          type = lightAttribute.LightType.value;\n        }\n\n        var color = 0xffffff;\n\n        if (lightAttribute.Color !== undefined) {\n          color = new Color().fromArray(lightAttribute.Color.value);\n        }\n\n        var intensity = lightAttribute.Intensity === undefined ? 1 : lightAttribute.Intensity.value / 100; // light disabled\n\n        if (lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0) {\n          intensity = 0;\n        }\n\n        var distance = 0;\n\n        if (lightAttribute.FarAttenuationEnd !== undefined) {\n          if (lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0) {\n            distance = 0;\n          } else {\n            distance = lightAttribute.FarAttenuationEnd.value;\n          }\n        } // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\n\n        var decay = 1;\n\n        switch (type) {\n          case 0:\n            // Point\n            model = new PointLight(color, intensity, distance, decay);\n            break;\n\n          case 1:\n            // Directional\n            model = new DirectionalLight(color, intensity);\n            break;\n\n          case 2:\n            // Spot\n            var angle = Math.PI / 3;\n\n            if (lightAttribute.InnerAngle !== undefined) {\n              angle = MathUtils.degToRad(lightAttribute.InnerAngle.value);\n            }\n\n            var penumbra = 0;\n\n            if (lightAttribute.OuterAngle !== undefined) {\n              // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n              // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n              // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n              penumbra = MathUtils.degToRad(lightAttribute.OuterAngle.value);\n              penumbra = Math.max(penumbra, 1);\n            }\n\n            model = new SpotLight(color, intensity, distance, angle, penumbra, decay);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.');\n            model = new PointLight(color, intensity);\n            break;\n        }\n\n        if (lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1) {\n          model.castShadow = true;\n        }\n      }\n\n      return model;\n    }\n  }, {\n    key: \"createMesh\",\n    value: function createMesh(relationships, geometryMap, materialMap) {\n      var model;\n      var geometry = null;\n      var material = null;\n      var materials = []; // get geometry and materials(s) from connections\n\n      relationships.children.forEach(function (child) {\n        if (geometryMap.has(child.ID)) {\n          geometry = geometryMap.get(child.ID);\n        }\n\n        if (materialMap.has(child.ID)) {\n          materials.push(materialMap.get(child.ID));\n        }\n      });\n\n      if (materials.length > 1) {\n        material = materials;\n      } else if (materials.length > 0) {\n        material = materials[0];\n      } else {\n        material = new MeshPhongMaterial({\n          color: 0xcccccc\n        });\n        materials.push(material);\n      }\n\n      if ('color' in geometry.attributes) {\n        materials.forEach(function (material) {\n          material.vertexColors = true;\n        });\n      }\n\n      if (geometry.FBX_Deformer) {\n        materials.forEach(function (material) {\n          material.skinning = true;\n        });\n        model = new SkinnedMesh(geometry, material);\n        model.normalizeSkinWeights();\n      } else {\n        model = new Mesh(geometry, material);\n      }\n\n      return model;\n    }\n  }, {\n    key: \"createCurve\",\n    value: function createCurve(relationships, geometryMap) {\n      var geometry = relationships.children.reduce(function (geo, child) {\n        if (geometryMap.has(child.ID)) geo = geometryMap.get(child.ID);\n        return geo;\n      }, null); // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\n      var material = new LineBasicMaterial({\n        color: 0x3300ff,\n        linewidth: 1\n      });\n      return new Line(geometry, material);\n    } // parse the model node for transform data\n\n  }, {\n    key: \"getTransformData\",\n    value: function getTransformData(model, modelNode) {\n      var transformData = {};\n      if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value);\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value);else transformData.eulerOrder = 'ZYX';\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value;\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value;\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value;\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value;\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value;\n      if ('ScalingOffset' in modelNode) transformData.scalingOffset = modelNode.ScalingOffset.value;\n      if ('ScalingPivot' in modelNode) transformData.scalingPivot = modelNode.ScalingPivot.value;\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value;\n      if ('RotationPivot' in modelNode) transformData.rotationPivot = modelNode.RotationPivot.value;\n      model.userData.transformData = transformData;\n    }\n  }, {\n    key: \"setLookAtProperties\",\n    value: function setLookAtProperties(model, modelNode) {\n      if ('LookAtProperty' in modelNode) {\n        var children = connections.get(model.ID).children;\n        children.forEach(function (child) {\n          if (child.relationship === 'LookAtProperty') {\n            var lookAtTarget = fbxTree.Objects.Model[child.ID];\n\n            if ('Lcl_Translation' in lookAtTarget) {\n              var pos = lookAtTarget.Lcl_Translation.value; // DirectionalLight, SpotLight\n\n              if (model.target !== undefined) {\n                model.target.position.fromArray(pos);\n                sceneGraph.add(model.target);\n              } else {\n                // Cameras and other Object3Ds\n                model.lookAt(new Vector3().fromArray(pos));\n              }\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"bindSkeleton\",\n    value: function bindSkeleton(skeletons, geometryMap, modelMap) {\n      var bindMatrices = this.parsePoseNodes();\n\n      var _loop2 = function _loop2(ID) {\n        var skeleton = skeletons[ID];\n        var parents = connections.get(parseInt(skeleton.ID)).parents;\n        parents.forEach(function (parent) {\n          if (geometryMap.has(parent.ID)) {\n            var geoID = parent.ID;\n            var geoRelationships = connections.get(geoID);\n            geoRelationships.parents.forEach(function (geoConnParent) {\n              if (modelMap.has(geoConnParent.ID)) {\n                var model = modelMap.get(geoConnParent.ID);\n                model.bind(new Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID]);\n              }\n            });\n          }\n        });\n      };\n\n      for (var ID in skeletons) {\n        _loop2(ID);\n      }\n    }\n  }, {\n    key: \"parsePoseNodes\",\n    value: function parsePoseNodes() {\n      var bindMatrices = {};\n\n      if ('Pose' in fbxTree.Objects) {\n        var BindPoseNode = fbxTree.Objects.Pose;\n\n        for (var nodeID in BindPoseNode) {\n          if (BindPoseNode[nodeID].attrType === 'BindPose') {\n            var poseNodes = BindPoseNode[nodeID].PoseNode;\n\n            if (Array.isArray(poseNodes)) {\n              poseNodes.forEach(function (poseNode) {\n                bindMatrices[poseNode.Node] = new Matrix4().fromArray(poseNode.Matrix.a);\n              });\n            } else {\n              bindMatrices[poseNodes.Node] = new Matrix4().fromArray(poseNodes.Matrix.a);\n            }\n          }\n        }\n      }\n\n      return bindMatrices;\n    } // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\n  }, {\n    key: \"createAmbientLight\",\n    value: function createAmbientLight() {\n      if ('GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings) {\n        var ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n        var r = ambientColor[0];\n        var g = ambientColor[1];\n        var b = ambientColor[2];\n\n        if (r !== 0 || g !== 0 || b !== 0) {\n          var color = new Color(r, g, b);\n          sceneGraph.add(new AmbientLight(color, 1));\n        }\n      }\n    }\n  }, {\n    key: \"setupMorphMaterials\",\n    value: function setupMorphMaterials() {\n      var scope = this;\n      sceneGraph.traverse(function (child) {\n        if (child.isMesh) {\n          if (child.geometry.morphAttributes.position && child.geometry.morphAttributes.position.length) {\n            if (Array.isArray(child.material)) {\n              child.material.forEach(function (material, i) {\n                scope.setupMorphMaterial(child, material, i);\n              });\n            } else {\n              scope.setupMorphMaterial(child, child.material);\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"setupMorphMaterial\",\n    value: function setupMorphMaterial(child, material, index) {\n      var uuid = child.uuid;\n      var matUuid = material.uuid; // if a geometry has morph targets, it cannot share the material with other geometries\n\n      var sharedMat = false;\n      sceneGraph.traverse(function (node) {\n        if (node.isMesh) {\n          if (Array.isArray(node.material)) {\n            node.material.forEach(function (mat) {\n              if (mat.uuid === matUuid && node.uuid !== uuid) sharedMat = true;\n            });\n          } else if (node.material.uuid === matUuid && node.uuid !== uuid) sharedMat = true;\n        }\n      });\n\n      if (sharedMat === true) {\n        var clonedMat = material.clone();\n        clonedMat.morphTargets = true;\n        if (index === undefined) child.material = clonedMat;else child.material[index] = clonedMat;\n      } else material.morphTargets = true;\n    }\n  }]);\n\n  return FBXTreeParser;\n}(); // parse Geometry data from FBXTree and return map of BufferGeometries\n\n\nvar GeometryParser = /*#__PURE__*/function () {\n  function GeometryParser() {\n    _classCallCheck(this, GeometryParser);\n  }\n\n  _createClass(GeometryParser, [{\n    key: \"parse\",\n    // Parse nodes in FBXTree.Objects.Geometry\n    value: function parse(deformers) {\n      var geometryMap = new Map();\n\n      if ('Geometry' in fbxTree.Objects) {\n        var geoNodes = fbxTree.Objects.Geometry;\n\n        for (var nodeID in geoNodes) {\n          var relationships = connections.get(parseInt(nodeID));\n          var geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers);\n          geometryMap.set(parseInt(nodeID), geo);\n        }\n      }\n\n      return geometryMap;\n    } // Parse single node in FBXTree.Objects.Geometry\n\n  }, {\n    key: \"parseGeometry\",\n    value: function parseGeometry(relationships, geoNode, deformers) {\n      switch (geoNode.attrType) {\n        case 'Mesh':\n          return this.parseMeshGeometry(relationships, geoNode, deformers);\n          break;\n\n        case 'NurbsCurve':\n          return this.parseNurbsGeometry(geoNode);\n          break;\n      }\n    } // Parse single node mesh geometry in FBXTree.Objects.Geometry\n\n  }, {\n    key: \"parseMeshGeometry\",\n    value: function parseMeshGeometry(relationships, geoNode, deformers) {\n      var skeletons = deformers.skeletons;\n      var morphTargets = [];\n      var modelNodes = relationships.parents.map(function (parent) {\n        return fbxTree.Objects.Model[parent.ID];\n      }); // don't create geometry if it is not associated with any models\n\n      if (modelNodes.length === 0) return;\n      var skeleton = relationships.children.reduce(function (skeleton, child) {\n        if (skeletons[child.ID] !== undefined) skeleton = skeletons[child.ID];\n        return skeleton;\n      }, null);\n      relationships.children.forEach(function (child) {\n        if (deformers.morphTargets[child.ID] !== undefined) {\n          morphTargets.push(deformers.morphTargets[child.ID]);\n        }\n      }); // Assume one model and get the preRotation from that\n      // if there is more than one model associated with the geometry this may cause problems\n\n      var modelNode = modelNodes[0];\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value);\n      if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value);\n      if ('GeometricTranslation' in modelNode) transformData.translation = modelNode.GeometricTranslation.value;\n      if ('GeometricRotation' in modelNode) transformData.rotation = modelNode.GeometricRotation.value;\n      if ('GeometricScaling' in modelNode) transformData.scale = modelNode.GeometricScaling.value;\n      var transform = generateTransform(transformData);\n      return this.genGeometry(geoNode, skeleton, morphTargets, transform);\n    } // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\n  }, {\n    key: \"genGeometry\",\n    value: function genGeometry(geoNode, skeleton, morphTargets, preTransform) {\n      var geo = new BufferGeometry();\n      if (geoNode.attrName) geo.name = geoNode.attrName;\n      var geoInfo = this.parseGeoNode(geoNode, skeleton);\n      var buffers = this.genBuffers(geoInfo);\n      var positionAttribute = new Float32BufferAttribute(buffers.vertex, 3);\n      positionAttribute.applyMatrix4(preTransform);\n      geo.setAttribute('position', positionAttribute);\n\n      if (buffers.colors.length > 0) {\n        geo.setAttribute('color', new Float32BufferAttribute(buffers.colors, 3));\n      }\n\n      if (skeleton) {\n        geo.setAttribute('skinIndex', new Uint16BufferAttribute(buffers.weightsIndices, 4));\n        geo.setAttribute('skinWeight', new Float32BufferAttribute(buffers.vertexWeights, 4)); // used later to bind the skeleton to the model\n\n        geo.FBX_Deformer = skeleton;\n      }\n\n      if (buffers.normal.length > 0) {\n        var normalMatrix = new Matrix3().getNormalMatrix(preTransform);\n        var normalAttribute = new Float32BufferAttribute(buffers.normal, 3);\n        normalAttribute.applyNormalMatrix(normalMatrix);\n        geo.setAttribute('normal', normalAttribute);\n      }\n\n      buffers.uvs.forEach(function (uvBuffer, i) {\n        // subsequent uv buffers are called 'uv1', 'uv2', ...\n        var name = 'uv' + (i + 1).toString(); // the first uv buffer is just called 'uv'\n\n        if (i === 0) {\n          name = 'uv';\n        }\n\n        geo.setAttribute(name, new Float32BufferAttribute(buffers.uvs[i], 2));\n      });\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        // Convert the material indices of each vertex into rendering groups on the geometry.\n        var prevMaterialIndex = buffers.materialIndex[0];\n        var startIndex = 0;\n        buffers.materialIndex.forEach(function (currentIndex, i) {\n          if (currentIndex !== prevMaterialIndex) {\n            geo.addGroup(startIndex, i - startIndex, prevMaterialIndex);\n            prevMaterialIndex = currentIndex;\n            startIndex = i;\n          }\n        }); // the loop above doesn't add the last group, do that here.\n\n        if (geo.groups.length > 0) {\n          var lastGroup = geo.groups[geo.groups.length - 1];\n          var lastIndex = lastGroup.start + lastGroup.count;\n\n          if (lastIndex !== buffers.materialIndex.length) {\n            geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex);\n          }\n        } // case where there are multiple materials but the whole geometry is only\n        // using one of them\n\n\n        if (geo.groups.length === 0) {\n          geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0]);\n        }\n      }\n\n      this.addMorphTargets(geo, geoNode, morphTargets, preTransform);\n      return geo;\n    }\n  }, {\n    key: \"parseGeoNode\",\n    value: function parseGeoNode(geoNode, skeleton) {\n      var geoInfo = {};\n      geoInfo.vertexPositions = geoNode.Vertices !== undefined ? geoNode.Vertices.a : [];\n      geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== undefined ? geoNode.PolygonVertexIndex.a : [];\n\n      if (geoNode.LayerElementColor) {\n        geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0]);\n      }\n\n      if (geoNode.LayerElementMaterial) {\n        geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0]);\n      }\n\n      if (geoNode.LayerElementNormal) {\n        geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0]);\n      }\n\n      if (geoNode.LayerElementUV) {\n        geoInfo.uv = [];\n        var i = 0;\n\n        while (geoNode.LayerElementUV[i]) {\n          if (geoNode.LayerElementUV[i].UV) {\n            geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]));\n          }\n\n          i++;\n        }\n      }\n\n      geoInfo.weightTable = {};\n\n      if (skeleton !== null) {\n        geoInfo.skeleton = skeleton;\n        skeleton.rawBones.forEach(function (rawBone, i) {\n          // loop over the bone's vertex indices and weights\n          rawBone.indices.forEach(function (index, j) {\n            if (geoInfo.weightTable[index] === undefined) geoInfo.weightTable[index] = [];\n            geoInfo.weightTable[index].push({\n              id: i,\n              weight: rawBone.weights[j]\n            });\n          });\n        });\n      }\n\n      return geoInfo;\n    }\n  }, {\n    key: \"genBuffers\",\n    value: function genBuffers(geoInfo) {\n      var buffers = {\n        vertex: [],\n        normal: [],\n        colors: [],\n        uvs: [],\n        materialIndex: [],\n        vertexWeights: [],\n        weightsIndices: []\n      };\n      var polygonIndex = 0;\n      var faceLength = 0;\n      var displayedWeightsWarning = false; // these will hold data for a single face\n\n      var facePositionIndexes = [];\n      var faceNormals = [];\n      var faceColors = [];\n      var faceUVs = [];\n      var faceWeights = [];\n      var faceWeightIndices = [];\n      var scope = this;\n      geoInfo.vertexIndices.forEach(function (vertexIndex, polygonVertexIndex) {\n        var materialIndex;\n        var endOfFace = false; // Face index and vertex index arrays are combined in a single array\n        // A cube with quad faces looks like this:\n        // PolygonVertexIndex: *24 {\n        //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n        //  }\n        // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n        // to find index of last vertex bit shift the index: ^ - 1\n\n        if (vertexIndex < 0) {\n          vertexIndex = vertexIndex ^ -1; // equivalent to ( x * -1 ) - 1\n\n          endOfFace = true;\n        }\n\n        var weightIndices = [];\n        var weights = [];\n        facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2);\n\n        if (geoInfo.color) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color);\n          faceColors.push(data[0], data[1], data[2]);\n        }\n\n        if (geoInfo.skeleton) {\n          if (geoInfo.weightTable[vertexIndex] !== undefined) {\n            geoInfo.weightTable[vertexIndex].forEach(function (wt) {\n              weights.push(wt.weight);\n              weightIndices.push(wt.id);\n            });\n          }\n\n          if (weights.length > 4) {\n            if (!displayedWeightsWarning) {\n              console.warn('THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.');\n              displayedWeightsWarning = true;\n            }\n\n            var wIndex = [0, 0, 0, 0];\n            var Weight = [0, 0, 0, 0];\n            weights.forEach(function (weight, weightIndex) {\n              var currentWeight = weight;\n              var currentIndex = weightIndices[weightIndex];\n              Weight.forEach(function (comparedWeight, comparedWeightIndex, comparedWeightArray) {\n                if (currentWeight > comparedWeight) {\n                  comparedWeightArray[comparedWeightIndex] = currentWeight;\n                  currentWeight = comparedWeight;\n                  var tmp = wIndex[comparedWeightIndex];\n                  wIndex[comparedWeightIndex] = currentIndex;\n                  currentIndex = tmp;\n                }\n              });\n            });\n            weightIndices = wIndex;\n            weights = Weight;\n          } // if the weight array is shorter than 4 pad with 0s\n\n\n          while (weights.length < 4) {\n            weights.push(0);\n            weightIndices.push(0);\n          }\n\n          for (var i = 0; i < 4; ++i) {\n            faceWeights.push(weights[i]);\n            faceWeightIndices.push(weightIndices[i]);\n          }\n        }\n\n        if (geoInfo.normal) {\n          var _data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal);\n\n          faceNormals.push(_data[0], _data[1], _data[2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0];\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, i) {\n            var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv);\n\n            if (faceUVs[i] === undefined) {\n              faceUVs[i] = [];\n            }\n\n            faceUVs[i].push(data[0]);\n            faceUVs[i].push(data[1]);\n          });\n        }\n\n        faceLength++;\n\n        if (endOfFace) {\n          scope.genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength);\n          polygonIndex++;\n          faceLength = 0; // reset arrays for the next face\n\n          facePositionIndexes = [];\n          faceNormals = [];\n          faceColors = [];\n          faceUVs = [];\n          faceWeights = [];\n          faceWeightIndices = [];\n        }\n      });\n      return buffers;\n    } // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\n  }, {\n    key: \"genFace\",\n    value: function genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength) {\n      var _loop3 = function _loop3(i) {\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]]);\n\n        if (geoInfo.skeleton) {\n          buffers.vertexWeights.push(faceWeights[0]);\n          buffers.vertexWeights.push(faceWeights[1]);\n          buffers.vertexWeights.push(faceWeights[2]);\n          buffers.vertexWeights.push(faceWeights[3]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3]);\n          buffers.vertexWeights.push(faceWeights[i * 4]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[0]);\n          buffers.weightsIndices.push(faceWeightIndices[1]);\n          buffers.weightsIndices.push(faceWeightIndices[2]);\n          buffers.weightsIndices.push(faceWeightIndices[3]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3]);\n        }\n\n        if (geoInfo.color) {\n          buffers.colors.push(faceColors[0]);\n          buffers.colors.push(faceColors[1]);\n          buffers.colors.push(faceColors[2]);\n          buffers.colors.push(faceColors[(i - 1) * 3]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 1]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 2]);\n          buffers.colors.push(faceColors[i * 3]);\n          buffers.colors.push(faceColors[i * 3 + 1]);\n          buffers.colors.push(faceColors[i * 3 + 2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n        }\n\n        if (geoInfo.normal) {\n          buffers.normal.push(faceNormals[0]);\n          buffers.normal.push(faceNormals[1]);\n          buffers.normal.push(faceNormals[2]);\n          buffers.normal.push(faceNormals[(i - 1) * 3]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 1]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 2]);\n          buffers.normal.push(faceNormals[i * 3]);\n          buffers.normal.push(faceNormals[i * 3 + 1]);\n          buffers.normal.push(faceNormals[i * 3 + 2]);\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, j) {\n            if (buffers.uvs[j] === undefined) buffers.uvs[j] = [];\n            buffers.uvs[j].push(faceUVs[j][0]);\n            buffers.uvs[j].push(faceUVs[j][1]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1]);\n            buffers.uvs[j].push(faceUVs[j][i * 2]);\n            buffers.uvs[j].push(faceUVs[j][i * 2 + 1]);\n          });\n        }\n      };\n\n      for (var i = 2; i < faceLength; i++) {\n        _loop3(i);\n      }\n    }\n  }, {\n    key: \"addMorphTargets\",\n    value: function addMorphTargets(parentGeo, parentGeoNode, morphTargets, preTransform) {\n      if (morphTargets.length === 0) return;\n      parentGeo.morphTargetsRelative = true;\n      parentGeo.morphAttributes.position = []; // parentGeo.morphAttributes.normal = []; // not implemented\n\n      var scope = this;\n      morphTargets.forEach(function (morphTarget) {\n        morphTarget.rawTargets.forEach(function (rawTarget) {\n          var morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID];\n\n          if (morphGeoNode !== undefined) {\n            scope.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name);\n          }\n        });\n      });\n    } // a morph geometry node is similar to a standard  node, and the node is also contained\n    // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n    // and a special attribute Index defining which vertices of the original geometry are affected\n    // Normal and position attributes only have data for the vertices that are affected by the morph\n\n  }, {\n    key: \"genMorphGeometry\",\n    value: function genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, name) {\n      var vertexIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : [];\n      var morphPositionsSparse = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\n      var indices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\n      var length = parentGeo.attributes.position.count * 3;\n      var morphPositions = new Float32Array(length);\n\n      for (var i = 0; i < indices.length; i++) {\n        var morphIndex = indices[i] * 3;\n        morphPositions[morphIndex] = morphPositionsSparse[i * 3];\n        morphPositions[morphIndex + 1] = morphPositionsSparse[i * 3 + 1];\n        morphPositions[morphIndex + 2] = morphPositionsSparse[i * 3 + 2];\n      } // TODO: add morph normal support\n\n\n      var morphGeoInfo = {\n        vertexIndices: vertexIndices,\n        vertexPositions: morphPositions\n      };\n      var morphBuffers = this.genBuffers(morphGeoInfo);\n      var positionAttribute = new Float32BufferAttribute(morphBuffers.vertex, 3);\n      positionAttribute.name = name || morphGeoNode.attrName;\n      positionAttribute.applyMatrix4(preTransform);\n      parentGeo.morphAttributes.position.push(positionAttribute);\n    } // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\n  }, {\n    key: \"parseNormals\",\n    value: function parseNormals(NormalNode) {\n      var mappingType = NormalNode.MappingInformationType;\n      var referenceType = NormalNode.ReferenceInformationType;\n      var buffer = NormalNode.Normals.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        if ('NormalIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalIndex.a;\n        } else if ('NormalsIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalsIndex.a;\n        }\n      }\n\n      return {\n        dataSize: 3,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    } // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\n  }, {\n    key: \"parseUVs\",\n    value: function parseUVs(UVNode) {\n      var mappingType = UVNode.MappingInformationType;\n      var referenceType = UVNode.ReferenceInformationType;\n      var buffer = UVNode.UV.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = UVNode.UVIndex.a;\n      }\n\n      return {\n        dataSize: 2,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    } // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\n  }, {\n    key: \"parseVertexColors\",\n    value: function parseVertexColors(ColorNode) {\n      var mappingType = ColorNode.MappingInformationType;\n      var referenceType = ColorNode.ReferenceInformationType;\n      var buffer = ColorNode.Colors.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = ColorNode.ColorIndex.a;\n      }\n\n      return {\n        dataSize: 4,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    } // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\n  }, {\n    key: \"parseMaterialIndices\",\n    value: function parseMaterialIndices(MaterialNode) {\n      var mappingType = MaterialNode.MappingInformationType;\n      var referenceType = MaterialNode.ReferenceInformationType;\n\n      if (mappingType === 'NoMappingInformation') {\n        return {\n          dataSize: 1,\n          buffer: [0],\n          indices: [0],\n          mappingType: 'AllSame',\n          referenceType: referenceType\n        };\n      }\n\n      var materialIndexBuffer = MaterialNode.Materials.a; // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n      // we expect.So we create an intermediate buffer that points to the index in the buffer,\n      // for conforming with the other functions we've written for other data.\n\n      var materialIndices = [];\n\n      for (var i = 0; i < materialIndexBuffer.length; ++i) {\n        materialIndices.push(i);\n      }\n\n      return {\n        dataSize: 1,\n        buffer: materialIndexBuffer,\n        indices: materialIndices,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    } // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\n  }, {\n    key: \"parseNurbsGeometry\",\n    value: function parseNurbsGeometry(geoNode) {\n      if (NURBSCurve === undefined) {\n        console.error('THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.');\n        return new BufferGeometry();\n      }\n\n      var order = parseInt(geoNode.Order);\n\n      if (isNaN(order)) {\n        console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id);\n        return new BufferGeometry();\n      }\n\n      var degree = order - 1;\n      var knots = geoNode.KnotVector.a;\n      var controlPoints = [];\n      var pointsValues = geoNode.Points.a;\n\n      for (var i = 0, l = pointsValues.length; i < l; i += 4) {\n        controlPoints.push(new Vector4().fromArray(pointsValues, i));\n      }\n\n      var startKnot, endKnot;\n\n      if (geoNode.Form === 'Closed') {\n        controlPoints.push(controlPoints[0]);\n      } else if (geoNode.Form === 'Periodic') {\n        startKnot = degree;\n        endKnot = knots.length - 1 - startKnot;\n\n        for (var _i = 0; _i < degree; ++_i) {\n          controlPoints.push(controlPoints[_i]);\n        }\n      }\n\n      var curve = new NURBSCurve(degree, knots, controlPoints, startKnot, endKnot);\n      var vertices = curve.getPoints(controlPoints.length * 7);\n      var positions = new Float32Array(vertices.length * 3);\n      vertices.forEach(function (vertex, i) {\n        vertex.toArray(positions, i * 3);\n      });\n      var geometry = new BufferGeometry();\n      geometry.setAttribute('position', new BufferAttribute(positions, 3));\n      return geometry;\n    }\n  }]);\n\n  return GeometryParser;\n}(); // parse animation data from FBXTree\n\n\nvar AnimationParser = /*#__PURE__*/function () {\n  function AnimationParser() {\n    _classCallCheck(this, AnimationParser);\n  }\n\n  _createClass(AnimationParser, [{\n    key: \"parse\",\n    // take raw animation clips and turn them into three.js animation clips\n    value: function parse() {\n      var animationClips = [];\n      var rawClips = this.parseClips();\n\n      if (rawClips !== undefined) {\n        for (var key in rawClips) {\n          var rawClip = rawClips[key];\n          var clip = this.addClip(rawClip);\n          animationClips.push(clip);\n        }\n      }\n\n      return animationClips;\n    }\n  }, {\n    key: \"parseClips\",\n    value: function parseClips() {\n      // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n      // if this is undefined we can safely assume there are no animations\n      if (fbxTree.Objects.AnimationCurve === undefined) return undefined;\n      var curveNodesMap = this.parseAnimationCurveNodes();\n      this.parseAnimationCurves(curveNodesMap);\n      var layersMap = this.parseAnimationLayers(curveNodesMap);\n      var rawClips = this.parseAnimStacks(layersMap);\n      return rawClips;\n    } // parse nodes in FBXTree.Objects.AnimationCurveNode\n    // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n    // and is referenced by an AnimationLayer\n\n  }, {\n    key: \"parseAnimationCurveNodes\",\n    value: function parseAnimationCurveNodes() {\n      var rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n      var curveNodesMap = new Map();\n\n      for (var nodeID in rawCurveNodes) {\n        var rawCurveNode = rawCurveNodes[nodeID];\n\n        if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\n          var curveNode = {\n            id: rawCurveNode.id,\n            attr: rawCurveNode.attrName,\n            curves: {}\n          };\n          curveNodesMap.set(curveNode.id, curveNode);\n        }\n      }\n\n      return curveNodesMap;\n    } // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n    // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n    // axis ( e.g. times and values of x rotation)\n\n  }, {\n    key: \"parseAnimationCurves\",\n    value: function parseAnimationCurves(curveNodesMap) {\n      var rawCurves = fbxTree.Objects.AnimationCurve; // TODO: Many values are identical up to roundoff error, but won't be optimised\n      // e.g. position times: [0, 0.4, 0. 8]\n      // position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n      // clearly, this should be optimised to\n      // times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n      // this shows up in nearly every FBX file, and generally time array is length > 100\n\n      for (var nodeID in rawCurves) {\n        var animationCurve = {\n          id: rawCurves[nodeID].id,\n          times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\n          values: rawCurves[nodeID].KeyValueFloat.a\n        };\n        var relationships = connections.get(animationCurve.id);\n\n        if (relationships !== undefined) {\n          var animationCurveID = relationships.parents[0].ID;\n          var animationCurveRelationship = relationships.parents[0].relationship;\n\n          if (animationCurveRelationship.match(/X/)) {\n            curveNodesMap.get(animationCurveID).curves['x'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Y/)) {\n            curveNodesMap.get(animationCurveID).curves['y'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Z/)) {\n            curveNodesMap.get(animationCurveID).curves['z'] = animationCurve;\n          } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\n            curveNodesMap.get(animationCurveID).curves['morph'] = animationCurve;\n          }\n        }\n      }\n    } // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n    // to various AnimationCurveNodes and is referenced by an AnimationStack node\n    // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\n  }, {\n    key: \"parseAnimationLayers\",\n    value: function parseAnimationLayers(curveNodesMap) {\n      var rawLayers = fbxTree.Objects.AnimationLayer;\n      var layersMap = new Map();\n\n      var _loop4 = function _loop4(nodeID) {\n        var layerCurveNodes = [];\n        var connection = connections.get(parseInt(nodeID));\n\n        if (connection !== undefined) {\n          // all the animationCurveNodes used in the layer\n          var children = connection.children;\n          children.forEach(function (child, i) {\n            if (curveNodesMap.has(child.ID)) {\n              var curveNode = curveNodesMap.get(child.ID); // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\n              if (curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var modelID = connections.get(child.ID).parents.filter(function (parent) {\n                    return parent.relationship !== undefined;\n                  })[0].ID;\n\n                  if (modelID !== undefined) {\n                    var rawModel = fbxTree.Objects.Model[modelID.toString()];\n\n                    if (rawModel === undefined) {\n                      console.warn('THREE.FBXLoader: Encountered a unused curve.', child);\n                      return;\n                    }\n\n                    var node = {\n                      modelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName(rawModel.attrName) : '',\n                      ID: rawModel.id,\n                      initialPosition: [0, 0, 0],\n                      initialRotation: [0, 0, 0],\n                      initialScale: [1, 1, 1]\n                    };\n                    sceneGraph.traverse(function (child) {\n                      if (child.ID === rawModel.id) {\n                        node.transform = child.matrix;\n                        if (child.userData.transformData) node.eulerOrder = child.userData.transformData.eulerOrder;\n                      }\n                    });\n                    if (!node.transform) node.transform = new Matrix4(); // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                    // animation value as well\n\n                    if ('PreRotation' in rawModel) node.preRotation = rawModel.PreRotation.value;\n                    if ('PostRotation' in rawModel) node.postRotation = rawModel.PostRotation.value;\n                    layerCurveNodes[i] = node;\n                  }\n                }\n\n                if (layerCurveNodes[i]) layerCurveNodes[i][curveNode.attr] = curveNode;\n              } else if (curveNode.curves.morph !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var deformerID = connections.get(child.ID).parents.filter(function (parent) {\n                    return parent.relationship !== undefined;\n                  })[0].ID;\n                  var morpherID = connections.get(deformerID).parents[0].ID;\n                  var geoID = connections.get(morpherID).parents[0].ID; // assuming geometry is not used in more than one model\n\n                  var _modelID = connections.get(geoID).parents[0].ID;\n                  var _rawModel = fbxTree.Objects.Model[_modelID];\n                  var _node = {\n                    modelName: _rawModel.attrName ? PropertyBinding.sanitizeNodeName(_rawModel.attrName) : '',\n                    morphName: fbxTree.Objects.Deformer[deformerID].attrName\n                  };\n                  layerCurveNodes[i] = _node;\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode;\n              }\n            }\n          });\n          layersMap.set(parseInt(nodeID), layerCurveNodes);\n        }\n      };\n\n      for (var nodeID in rawLayers) {\n        _loop4(nodeID);\n      }\n\n      return layersMap;\n    } // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n    // hierarchy. Each Stack node will be used to create a AnimationClip\n\n  }, {\n    key: \"parseAnimStacks\",\n    value: function parseAnimStacks(layersMap) {\n      var rawStacks = fbxTree.Objects.AnimationStack; // connect the stacks (clips) up to the layers\n\n      var rawClips = {};\n\n      for (var nodeID in rawStacks) {\n        var children = connections.get(parseInt(nodeID)).children;\n\n        if (children.length > 1) {\n          // it seems like stacks will always be associated with a single layer. But just in case there are files\n          // where there are multiple layers per stack, we'll display a warning\n          console.warn('THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.');\n        }\n\n        var layer = layersMap.get(children[0].ID);\n        rawClips[nodeID] = {\n          name: rawStacks[nodeID].attrName,\n          layer: layer\n        };\n      }\n\n      return rawClips;\n    }\n  }, {\n    key: \"addClip\",\n    value: function addClip(rawClip) {\n      var tracks = [];\n      var scope = this;\n      rawClip.layer.forEach(function (rawTracks) {\n        tracks = tracks.concat(scope.generateTracks(rawTracks));\n      });\n      return new AnimationClip(rawClip.name, -1, tracks);\n    }\n  }, {\n    key: \"generateTracks\",\n    value: function generateTracks(rawTracks) {\n      var tracks = [];\n      var initialPosition = new Vector3();\n      var initialRotation = new Quaternion();\n      var initialScale = new Vector3();\n      if (rawTracks.transform) rawTracks.transform.decompose(initialPosition, initialRotation, initialScale);\n      initialPosition = initialPosition.toArray();\n      initialRotation = new Euler().setFromQuaternion(initialRotation, rawTracks.eulerOrder).toArray();\n      initialScale = initialScale.toArray();\n\n      if (rawTracks.T !== undefined && Object.keys(rawTracks.T.curves).length > 0) {\n        var positionTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position');\n        if (positionTrack !== undefined) tracks.push(positionTrack);\n      }\n\n      if (rawTracks.R !== undefined && Object.keys(rawTracks.R.curves).length > 0) {\n        var rotationTrack = this.generateRotationTrack(rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder);\n        if (rotationTrack !== undefined) tracks.push(rotationTrack);\n      }\n\n      if (rawTracks.S !== undefined && Object.keys(rawTracks.S.curves).length > 0) {\n        var scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale');\n        if (scaleTrack !== undefined) tracks.push(scaleTrack);\n      }\n\n      if (rawTracks.DeformPercent !== undefined) {\n        var morphTrack = this.generateMorphTrack(rawTracks);\n        if (morphTrack !== undefined) tracks.push(morphTrack);\n      }\n\n      return tracks;\n    }\n  }, {\n    key: \"generateVectorTrack\",\n    value: function generateVectorTrack(modelName, curves, initialValue, type) {\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n      return new VectorKeyframeTrack(modelName + '.' + type, times, values);\n    }\n  }, {\n    key: \"generateRotationTrack\",\n    value: function generateRotationTrack(modelName, curves, initialValue, preRotation, postRotation, eulerOrder) {\n      if (curves.x !== undefined) {\n        this.interpolateRotations(curves.x);\n        curves.x.values = curves.x.values.map(MathUtils.degToRad);\n      }\n\n      if (curves.y !== undefined) {\n        this.interpolateRotations(curves.y);\n        curves.y.values = curves.y.values.map(MathUtils.degToRad);\n      }\n\n      if (curves.z !== undefined) {\n        this.interpolateRotations(curves.z);\n        curves.z.values = curves.z.values.map(MathUtils.degToRad);\n      }\n\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n\n      if (preRotation !== undefined) {\n        preRotation = preRotation.map(MathUtils.degToRad);\n        preRotation.push(eulerOrder);\n        preRotation = new Euler().fromArray(preRotation);\n        preRotation = new Quaternion().setFromEuler(preRotation);\n      }\n\n      if (postRotation !== undefined) {\n        postRotation = postRotation.map(MathUtils.degToRad);\n        postRotation.push(eulerOrder);\n        postRotation = new Euler().fromArray(postRotation);\n        postRotation = new Quaternion().setFromEuler(postRotation).invert();\n      }\n\n      var quaternion = new Quaternion();\n      var euler = new Euler();\n      var quaternionValues = [];\n\n      for (var i = 0; i < values.length; i += 3) {\n        euler.set(values[i], values[i + 1], values[i + 2], eulerOrder);\n        quaternion.setFromEuler(euler);\n        if (preRotation !== undefined) quaternion.premultiply(preRotation);\n        if (postRotation !== undefined) quaternion.multiply(postRotation);\n        quaternion.toArray(quaternionValues, i / 3 * 4);\n      }\n\n      return new QuaternionKeyframeTrack(modelName + '.quaternion', times, quaternionValues);\n    }\n  }, {\n    key: \"generateMorphTrack\",\n    value: function generateMorphTrack(rawTracks) {\n      var curves = rawTracks.DeformPercent.curves.morph;\n      var values = curves.values.map(function (val) {\n        return val / 100;\n      });\n      var morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName];\n      return new NumberKeyframeTrack(rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values);\n    } // For all animated objects, times are defined separately for each axis\n    // Here we'll combine the times into one sorted array without duplicates\n\n  }, {\n    key: \"getTimesForAllAxes\",\n    value: function getTimesForAllAxes(curves) {\n      var times = []; // first join together the times for each axis, if defined\n\n      if (curves.x !== undefined) times = times.concat(curves.x.times);\n      if (curves.y !== undefined) times = times.concat(curves.y.times);\n      if (curves.z !== undefined) times = times.concat(curves.z.times); // then sort them\n\n      times = times.sort(function (a, b) {\n        return a - b;\n      }); // and remove duplicates\n\n      if (times.length > 1) {\n        var targetIndex = 1;\n        var lastValue = times[0];\n\n        for (var i = 1; i < times.length; i++) {\n          var currentValue = times[i];\n\n          if (currentValue !== lastValue) {\n            times[targetIndex] = currentValue;\n            lastValue = currentValue;\n            targetIndex++;\n          }\n        }\n\n        times = times.slice(0, targetIndex);\n      }\n\n      return times;\n    }\n  }, {\n    key: \"getKeyframeTrackValues\",\n    value: function getKeyframeTrackValues(times, curves, initialValue) {\n      var prevValue = initialValue;\n      var values = [];\n      var xIndex = -1;\n      var yIndex = -1;\n      var zIndex = -1;\n      times.forEach(function (time) {\n        if (curves.x) xIndex = curves.x.times.indexOf(time);\n        if (curves.y) yIndex = curves.y.times.indexOf(time);\n        if (curves.z) zIndex = curves.z.times.indexOf(time); // if there is an x value defined for this frame, use that\n\n        if (xIndex !== -1) {\n          var xValue = curves.x.values[xIndex];\n          values.push(xValue);\n          prevValue[0] = xValue;\n        } else {\n          // otherwise use the x value from the previous frame\n          values.push(prevValue[0]);\n        }\n\n        if (yIndex !== -1) {\n          var yValue = curves.y.values[yIndex];\n          values.push(yValue);\n          prevValue[1] = yValue;\n        } else {\n          values.push(prevValue[1]);\n        }\n\n        if (zIndex !== -1) {\n          var zValue = curves.z.values[zIndex];\n          values.push(zValue);\n          prevValue[2] = zValue;\n        } else {\n          values.push(prevValue[2]);\n        }\n      });\n      return values;\n    } // Rotations are defined as Euler angles which can have values  of any size\n    // These will be converted to quaternions which don't support values greater than\n    // PI, so we'll interpolate large rotations\n\n  }, {\n    key: \"interpolateRotations\",\n    value: function interpolateRotations(curve) {\n      for (var i = 1; i < curve.values.length; i++) {\n        var initialValue = curve.values[i - 1];\n        var valuesSpan = curve.values[i] - initialValue;\n        var absoluteSpan = Math.abs(valuesSpan);\n\n        if (absoluteSpan >= 180) {\n          var numSubIntervals = absoluteSpan / 180;\n          var step = valuesSpan / numSubIntervals;\n          var nextValue = initialValue + step;\n          var initialTime = curve.times[i - 1];\n          var timeSpan = curve.times[i] - initialTime;\n          var interval = timeSpan / numSubIntervals;\n          var nextTime = initialTime + interval;\n          var interpolatedTimes = [];\n          var interpolatedValues = [];\n\n          while (nextTime < curve.times[i]) {\n            interpolatedTimes.push(nextTime);\n            nextTime += interval;\n            interpolatedValues.push(nextValue);\n            nextValue += step;\n          }\n\n          curve.times = inject(curve.times, i, interpolatedTimes);\n          curve.values = inject(curve.values, i, interpolatedValues);\n        }\n      }\n    }\n  }]);\n\n  return AnimationParser;\n}(); // parse an FBX file in ASCII format\n\n\nvar TextParser = /*#__PURE__*/function () {\n  function TextParser() {\n    _classCallCheck(this, TextParser);\n  }\n\n  _createClass(TextParser, [{\n    key: \"getPrevNode\",\n    value: function getPrevNode() {\n      return this.nodeStack[this.currentIndent - 2];\n    }\n  }, {\n    key: \"getCurrentNode\",\n    value: function getCurrentNode() {\n      return this.nodeStack[this.currentIndent - 1];\n    }\n  }, {\n    key: \"getCurrentProp\",\n    value: function getCurrentProp() {\n      return this.currentProp;\n    }\n  }, {\n    key: \"pushStack\",\n    value: function pushStack(node) {\n      this.nodeStack.push(node);\n      this.currentIndent += 1;\n    }\n  }, {\n    key: \"popStack\",\n    value: function popStack() {\n      this.nodeStack.pop();\n      this.currentIndent -= 1;\n    }\n  }, {\n    key: \"setCurrentProp\",\n    value: function setCurrentProp(val, name) {\n      this.currentProp = val;\n      this.currentPropName = name;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(text) {\n      this.currentIndent = 0;\n      this.allNodes = new FBXTree();\n      this.nodeStack = [];\n      this.currentProp = [];\n      this.currentPropName = '';\n      var scope = this;\n      var split = text.split(/[\\r\\n]+/);\n      split.forEach(function (line, i) {\n        var matchComment = line.match(/^[\\s\\t]*;/);\n        var matchEmpty = line.match(/^[\\s\\t]*$/);\n        if (matchComment || matchEmpty) return;\n        var matchBeginning = line.match('^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '');\n        var matchProperty = line.match('^\\\\t{' + scope.currentIndent + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)');\n        var matchEnd = line.match('^\\\\t{' + (scope.currentIndent - 1) + '}}');\n\n        if (matchBeginning) {\n          scope.parseNodeBegin(line, matchBeginning);\n        } else if (matchProperty) {\n          scope.parseNodeProperty(line, matchProperty, split[++i]);\n        } else if (matchEnd) {\n          scope.popStack();\n        } else if (line.match(/^[^\\s\\t}]/)) {\n          // large arrays are split over multiple lines terminated with a ',' character\n          // if this is encountered the line needs to be joined to the previous line\n          scope.parseNodePropertyContinued(line);\n        }\n      });\n      return this.allNodes;\n    }\n  }, {\n    key: \"parseNodeBegin\",\n    value: function parseNodeBegin(line, property) {\n      var nodeName = property[1].trim().replace(/^\"/, '').replace(/\"$/, '');\n      var nodeAttrs = property[2].split(',').map(function (attr) {\n        return attr.trim().replace(/^\"/, '').replace(/\"$/, '');\n      });\n      var node = {\n        name: nodeName\n      };\n      var attrs = this.parseNodeAttr(nodeAttrs);\n      var currentNode = this.getCurrentNode(); // a top node\n\n      if (this.currentIndent === 0) {\n        this.allNodes.add(nodeName, node);\n      } else {\n        // a subnode\n        // if the subnode already exists, append it\n        if (nodeName in currentNode) {\n          // special case Pose needs PoseNodes as an array\n          if (nodeName === 'PoseNode') {\n            currentNode.PoseNode.push(node);\n          } else if (currentNode[nodeName].id !== undefined) {\n            currentNode[nodeName] = {};\n            currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName];\n          }\n\n          if (attrs.id !== '') currentNode[nodeName][attrs.id] = node;\n        } else if (typeof attrs.id === 'number') {\n          currentNode[nodeName] = {};\n          currentNode[nodeName][attrs.id] = node;\n        } else if (nodeName !== 'Properties70') {\n          if (nodeName === 'PoseNode') currentNode[nodeName] = [node];else currentNode[nodeName] = node;\n        }\n      }\n\n      if (typeof attrs.id === 'number') node.id = attrs.id;\n      if (attrs.name !== '') node.attrName = attrs.name;\n      if (attrs.type !== '') node.attrType = attrs.type;\n      this.pushStack(node);\n    }\n  }, {\n    key: \"parseNodeAttr\",\n    value: function parseNodeAttr(attrs) {\n      var id = attrs[0];\n\n      if (attrs[0] !== '') {\n        id = parseInt(attrs[0]);\n\n        if (isNaN(id)) {\n          id = attrs[0];\n        }\n      }\n\n      var name = '',\n          type = '';\n\n      if (attrs.length > 1) {\n        name = attrs[1].replace(/^(\\w+)::/, '');\n        type = attrs[2];\n      }\n\n      return {\n        id: id,\n        name: name,\n        type: type\n      };\n    }\n  }, {\n    key: \"parseNodeProperty\",\n    value: function parseNodeProperty(line, property, contentLine) {\n      var propName = property[1].replace(/^\"/, '').replace(/\"$/, '').trim();\n      var propValue = property[2].replace(/^\"/, '').replace(/\"$/, '').trim(); // for special case: base64 image data follows \"Content: ,\" line\n      //\tContent: ,\n      //\t \"/9j/4RDaRXhpZgAATU0A...\"\n\n      if (propName === 'Content' && propValue === ',') {\n        propValue = contentLine.replace(/\"/g, '').replace(/,$/, '').trim();\n      }\n\n      var currentNode = this.getCurrentNode();\n      var parentName = currentNode.name;\n\n      if (parentName === 'Properties70') {\n        this.parseNodeSpecialProperty(line, propName, propValue);\n        return;\n      } // Connections\n\n\n      if (propName === 'C') {\n        var connProps = propValue.split(',').slice(1);\n        var from = parseInt(connProps[0]);\n        var to = parseInt(connProps[1]);\n        var rest = propValue.split(',').slice(3);\n        rest = rest.map(function (elem) {\n          return elem.trim().replace(/^\"/, '');\n        });\n        propName = 'connections';\n        propValue = [from, to];\n        append(propValue, rest);\n\n        if (currentNode[propName] === undefined) {\n          currentNode[propName] = [];\n        }\n      } // Node\n\n\n      if (propName === 'Node') currentNode.id = propValue; // connections\n\n      if (propName in currentNode && Array.isArray(currentNode[propName])) {\n        currentNode[propName].push(propValue);\n      } else {\n        if (propName !== 'a') currentNode[propName] = propValue;else currentNode.a = propValue;\n      }\n\n      this.setCurrentProp(currentNode, propName); // convert string to array, unless it ends in ',' in which case more will be added to it\n\n      if (propName === 'a' && propValue.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(propValue);\n      }\n    }\n  }, {\n    key: \"parseNodePropertyContinued\",\n    value: function parseNodePropertyContinued(line) {\n      var currentNode = this.getCurrentNode();\n      currentNode.a += line; // if the line doesn't end in ',' we have reached the end of the property value\n      // so convert the string to an array\n\n      if (line.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(currentNode.a);\n      }\n    } // parse \"Property70\"\n\n  }, {\n    key: \"parseNodeSpecialProperty\",\n    value: function parseNodeSpecialProperty(line, propName, propValue) {\n      // split this\n      // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n      // into array like below\n      // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n      var props = propValue.split('\",').map(function (prop) {\n        return prop.trim().replace(/^\\\"/, '').replace(/\\s/, '_');\n      });\n      var innerPropName = props[0];\n      var innerPropType1 = props[1];\n      var innerPropType2 = props[2];\n      var innerPropFlag = props[3];\n      var innerPropValue = props[4]; // cast values where needed, otherwise leave as strings\n\n      switch (innerPropType1) {\n        case 'int':\n        case 'enum':\n        case 'bool':\n        case 'ULongLong':\n        case 'double':\n        case 'Number':\n        case 'FieldOfView':\n          innerPropValue = parseFloat(innerPropValue);\n          break;\n\n        case 'Color':\n        case 'ColorRGB':\n        case 'Vector3D':\n        case 'Lcl_Translation':\n        case 'Lcl_Rotation':\n        case 'Lcl_Scaling':\n          innerPropValue = parseNumberArray(innerPropValue);\n          break;\n      } // CAUTION: these props must append to parent's parent\n\n\n      this.getPrevNode()[innerPropName] = {\n        'type': innerPropType1,\n        'type2': innerPropType2,\n        'flag': innerPropFlag,\n        'value': innerPropValue\n      };\n      this.setCurrentProp(this.getPrevNode(), innerPropName);\n    }\n  }]);\n\n  return TextParser;\n}(); // Parse an FBX file in Binary format\n\n\nvar BinaryParser = /*#__PURE__*/function () {\n  function BinaryParser() {\n    _classCallCheck(this, BinaryParser);\n  }\n\n  _createClass(BinaryParser, [{\n    key: \"parse\",\n    value: function parse(buffer) {\n      var reader = new BinaryReader(buffer);\n      reader.skip(23); // skip magic 23 bytes\n\n      var version = reader.getUint32();\n\n      if (version < 6400) {\n        throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + version);\n      }\n\n      var allNodes = new FBXTree();\n\n      while (!this.endOfContent(reader)) {\n        var node = this.parseNode(reader, version);\n        if (node !== null) allNodes.add(node.name, node);\n      }\n\n      return allNodes;\n    } // Check if reader has reached the end of content.\n\n  }, {\n    key: \"endOfContent\",\n    value: function endOfContent(reader) {\n      // footer size: 160bytes + 16-byte alignment padding\n      // - 16bytes: magic\n      // - padding til 16-byte alignment (at least 1byte?)\n      //\t(seems like some exporters embed fixed 15 or 16bytes?)\n      // - 4bytes: magic\n      // - 4bytes: version\n      // - 120bytes: zero\n      // - 16bytes: magic\n      if (reader.size() % 16 === 0) {\n        return (reader.getOffset() + 160 + 16 & ~0xf) >= reader.size();\n      } else {\n        return reader.getOffset() + 160 + 16 >= reader.size();\n      }\n    } // recursively parse nodes until the end of the file is reached\n\n  }, {\n    key: \"parseNode\",\n    value: function parseNode(reader, version) {\n      var node = {}; // The first three data sizes depends on version.\n\n      var endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      var numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      version >= 7500 ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n      var nameLen = reader.getUint8();\n      var name = reader.getString(nameLen); // Regards this node as NULL-record if endOffset is zero\n\n      if (endOffset === 0) return null;\n      var propertyList = [];\n\n      for (var i = 0; i < numProperties; i++) {\n        propertyList.push(this.parseProperty(reader));\n      } // Regards the first three elements in propertyList as id, attrName, and attrType\n\n\n      var id = propertyList.length > 0 ? propertyList[0] : '';\n      var attrName = propertyList.length > 1 ? propertyList[1] : '';\n      var attrType = propertyList.length > 2 ? propertyList[2] : ''; // check if this node represents just a single property\n      // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\n      node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false;\n\n      while (endOffset > reader.getOffset()) {\n        var subNode = this.parseNode(reader, version);\n        if (subNode !== null) this.parseSubNode(name, node, subNode);\n      }\n\n      node.propertyList = propertyList; // raw property list used by parent\n\n      if (typeof id === 'number') node.id = id;\n      if (attrName !== '') node.attrName = attrName;\n      if (attrType !== '') node.attrType = attrType;\n      if (name !== '') node.name = name;\n      return node;\n    }\n  }, {\n    key: \"parseSubNode\",\n    value: function parseSubNode(name, node, subNode) {\n      // special case: child node is single property\n      if (subNode.singleProperty === true) {\n        var value = subNode.propertyList[0];\n\n        if (Array.isArray(value)) {\n          node[subNode.name] = subNode;\n          subNode.a = value;\n        } else {\n          node[subNode.name] = value;\n        }\n      } else if (name === 'Connections' && subNode.name === 'C') {\n        var array = [];\n        subNode.propertyList.forEach(function (property, i) {\n          // first Connection is FBX type (OO, OP, etc.). We'll discard these\n          if (i !== 0) array.push(property);\n        });\n\n        if (node.connections === undefined) {\n          node.connections = [];\n        }\n\n        node.connections.push(array);\n      } else if (subNode.name === 'Properties70') {\n        var keys = Object.keys(subNode);\n        keys.forEach(function (key) {\n          node[key] = subNode[key];\n        });\n      } else if (name === 'Properties70' && subNode.name === 'P') {\n        var innerPropName = subNode.propertyList[0];\n        var innerPropType1 = subNode.propertyList[1];\n        var innerPropType2 = subNode.propertyList[2];\n        var innerPropFlag = subNode.propertyList[3];\n        var innerPropValue;\n        if (innerPropName.indexOf('Lcl ') === 0) innerPropName = innerPropName.replace('Lcl ', 'Lcl_');\n        if (innerPropType1.indexOf('Lcl ') === 0) innerPropType1 = innerPropType1.replace('Lcl ', 'Lcl_');\n\n        if (innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf('Lcl_') === 0) {\n          innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]];\n        } else {\n          innerPropValue = subNode.propertyList[4];\n        } // this will be copied to parent, see above\n\n\n        node[innerPropName] = {\n          'type': innerPropType1,\n          'type2': innerPropType2,\n          'flag': innerPropFlag,\n          'value': innerPropValue\n        };\n      } else if (node[subNode.name] === undefined) {\n        if (typeof subNode.id === 'number') {\n          node[subNode.name] = {};\n          node[subNode.name][subNode.id] = subNode;\n        } else {\n          node[subNode.name] = subNode;\n        }\n      } else {\n        if (subNode.name === 'PoseNode') {\n          if (!Array.isArray(node[subNode.name])) {\n            node[subNode.name] = [node[subNode.name]];\n          }\n\n          node[subNode.name].push(subNode);\n        } else if (node[subNode.name][subNode.id] === undefined) {\n          node[subNode.name][subNode.id] = subNode;\n        }\n      }\n    }\n  }, {\n    key: \"parseProperty\",\n    value: function parseProperty(reader) {\n      var type = reader.getString(1);\n      var length;\n\n      switch (type) {\n        case 'C':\n          return reader.getBoolean();\n\n        case 'D':\n          return reader.getFloat64();\n\n        case 'F':\n          return reader.getFloat32();\n\n        case 'I':\n          return reader.getInt32();\n\n        case 'L':\n          return reader.getInt64();\n\n        case 'R':\n          length = reader.getUint32();\n          return reader.getArrayBuffer(length);\n\n        case 'S':\n          length = reader.getUint32();\n          return reader.getString(length);\n\n        case 'Y':\n          return reader.getInt16();\n\n        case 'b':\n        case 'c':\n        case 'd':\n        case 'f':\n        case 'i':\n        case 'l':\n          var arrayLength = reader.getUint32();\n          var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\n          var compressedLength = reader.getUint32();\n\n          if (encoding === 0) {\n            switch (type) {\n              case 'b':\n              case 'c':\n                return reader.getBooleanArray(arrayLength);\n\n              case 'd':\n                return reader.getFloat64Array(arrayLength);\n\n              case 'f':\n                return reader.getFloat32Array(arrayLength);\n\n              case 'i':\n                return reader.getInt32Array(arrayLength);\n\n              case 'l':\n                return reader.getInt64Array(arrayLength);\n            }\n          }\n\n          if (typeof fflate === 'undefined') {\n            console.error('THREE.FBXLoader: External library fflate.min.js required.');\n          }\n\n          var data = fflate.unzlibSync(new Uint8Array(reader.getArrayBuffer(compressedLength))); // eslint-disable-line no-undef\n\n          var reader2 = new BinaryReader(data.buffer);\n\n          switch (type) {\n            case 'b':\n            case 'c':\n              return reader2.getBooleanArray(arrayLength);\n\n            case 'd':\n              return reader2.getFloat64Array(arrayLength);\n\n            case 'f':\n              return reader2.getFloat32Array(arrayLength);\n\n            case 'i':\n              return reader2.getInt32Array(arrayLength);\n\n            case 'l':\n              return reader2.getInt64Array(arrayLength);\n          }\n\n        default:\n          throw new Error('THREE.FBXLoader: Unknown property type ' + type);\n      }\n    }\n  }]);\n\n  return BinaryParser;\n}();\n\nvar BinaryReader = /*#__PURE__*/function () {\n  function BinaryReader(buffer, littleEndian) {\n    _classCallCheck(this, BinaryReader);\n\n    this.dv = new DataView(buffer);\n    this.offset = 0;\n    this.littleEndian = littleEndian !== undefined ? littleEndian : true;\n  }\n\n  _createClass(BinaryReader, [{\n    key: \"getOffset\",\n    value: function getOffset() {\n      return this.offset;\n    }\n  }, {\n    key: \"size\",\n    value: function size() {\n      return this.dv.buffer.byteLength;\n    }\n  }, {\n    key: \"skip\",\n    value: function skip(length) {\n      this.offset += length;\n    } // seems like true/false representation depends on exporter.\n    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n    // then sees LSB.\n\n  }, {\n    key: \"getBoolean\",\n    value: function getBoolean() {\n      return (this.getUint8() & 1) === 1;\n    }\n  }, {\n    key: \"getBooleanArray\",\n    value: function getBooleanArray(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getBoolean());\n      }\n\n      return a;\n    }\n  }, {\n    key: \"getUint8\",\n    value: function getUint8() {\n      var value = this.dv.getUint8(this.offset);\n      this.offset += 1;\n      return value;\n    }\n  }, {\n    key: \"getInt16\",\n    value: function getInt16() {\n      var value = this.dv.getInt16(this.offset, this.littleEndian);\n      this.offset += 2;\n      return value;\n    }\n  }, {\n    key: \"getInt32\",\n    value: function getInt32() {\n      var value = this.dv.getInt32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    }\n  }, {\n    key: \"getInt32Array\",\n    value: function getInt32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt32());\n      }\n\n      return a;\n    }\n  }, {\n    key: \"getUint32\",\n    value: function getUint32() {\n      var value = this.dv.getUint32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    } // JavaScript doesn't support 64-bit integer so calculate this here\n    // 1 << 32 will return 1 so using multiply operation instead here.\n    // There's a possibility that this method returns wrong value if the value\n    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n    // TODO: safely handle 64-bit integer\n\n  }, {\n    key: \"getInt64\",\n    value: function getInt64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      } // calculate negative value\n\n\n      if (high & 0x80000000) {\n        high = ~high & 0xFFFFFFFF;\n        low = ~low & 0xFFFFFFFF;\n        if (low === 0xFFFFFFFF) high = high + 1 & 0xFFFFFFFF;\n        low = low + 1 & 0xFFFFFFFF;\n        return -(high * 0x100000000 + low);\n      }\n\n      return high * 0x100000000 + low;\n    }\n  }, {\n    key: \"getInt64Array\",\n    value: function getInt64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt64());\n      }\n\n      return a;\n    } // Note: see getInt64() comment\n\n  }, {\n    key: \"getUint64\",\n    value: function getUint64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      }\n\n      return high * 0x100000000 + low;\n    }\n  }, {\n    key: \"getFloat32\",\n    value: function getFloat32() {\n      var value = this.dv.getFloat32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    }\n  }, {\n    key: \"getFloat32Array\",\n    value: function getFloat32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat32());\n      }\n\n      return a;\n    }\n  }, {\n    key: \"getFloat64\",\n    value: function getFloat64() {\n      var value = this.dv.getFloat64(this.offset, this.littleEndian);\n      this.offset += 8;\n      return value;\n    }\n  }, {\n    key: \"getFloat64Array\",\n    value: function getFloat64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat64());\n      }\n\n      return a;\n    }\n  }, {\n    key: \"getArrayBuffer\",\n    value: function getArrayBuffer(size) {\n      var value = this.dv.buffer.slice(this.offset, this.offset + size);\n      this.offset += size;\n      return value;\n    }\n  }, {\n    key: \"getString\",\n    value: function getString(size) {\n      // note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a[i] = this.getUint8();\n      }\n\n      var nullByte = a.indexOf(0);\n      if (nullByte >= 0) a = a.slice(0, nullByte);\n      return LoaderUtils.decodeText(new Uint8Array(a));\n    }\n  }]);\n\n  return BinaryReader;\n}(); // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\n\n\nvar FBXTree = /*#__PURE__*/function () {\n  function FBXTree() {\n    _classCallCheck(this, FBXTree);\n  }\n\n  _createClass(FBXTree, [{\n    key: \"add\",\n    value: function add(key, val) {\n      this[key] = val;\n    }\n  }]);\n\n  return FBXTree;\n}(); // ************** UTILITY FUNCTIONS **************\n\n\nfunction isFbxFormatBinary(buffer) {\n  var CORRECT = \"Kaydara FBX Binary  \\0\";\n  return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length);\n}\n\nfunction isFbxFormatASCII(text) {\n  var CORRECT = ['K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\'];\n  var cursor = 0;\n\n  function read(offset) {\n    var result = text[offset - 1];\n    text = text.slice(cursor + offset);\n    cursor++;\n    return result;\n  }\n\n  for (var i = 0; i < CORRECT.length; ++i) {\n    var num = read(1);\n\n    if (num === CORRECT[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getFbxVersion(text) {\n  var versionRegExp = /FBXVersion: (\\d+)/;\n  var match = text.match(versionRegExp);\n\n  if (match) {\n    var version = parseInt(match[1]);\n    return version;\n  }\n\n  throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.');\n} // Converts FBX ticks into real time seconds.\n\n\nfunction convertFBXTimeToSeconds(time) {\n  return time / 46186158000;\n}\n\nvar dataArray = []; // extracts the data from the correct position in the FBX array based on indexing type\n\nfunction getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\n  var index;\n\n  switch (infoObject.mappingType) {\n    case 'ByPolygonVertex':\n      index = polygonVertexIndex;\n      break;\n\n    case 'ByPolygon':\n      index = polygonIndex;\n      break;\n\n    case 'ByVertice':\n      index = vertexIndex;\n      break;\n\n    case 'AllSame':\n      index = infoObject.indices[0];\n      break;\n\n    default:\n      console.warn('THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType);\n  }\n\n  if (infoObject.referenceType === 'IndexToDirect') index = infoObject.indices[index];\n  var from = index * infoObject.dataSize;\n  var to = from + infoObject.dataSize;\n  return slice(dataArray, infoObject.buffer, from, to);\n}\n\nvar tempEuler = new Euler();\nvar tempVec = new Vector3(); // generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\n\nfunction generateTransform(transformData) {\n  var lTranslationM = new Matrix4();\n  var lPreRotationM = new Matrix4();\n  var lRotationM = new Matrix4();\n  var lPostRotationM = new Matrix4();\n  var lScalingM = new Matrix4();\n  var lScalingPivotM = new Matrix4();\n  var lScalingOffsetM = new Matrix4();\n  var lRotationOffsetM = new Matrix4();\n  var lRotationPivotM = new Matrix4();\n  var lParentGX = new Matrix4();\n  var lParentLX = new Matrix4();\n  var lGlobalT = new Matrix4();\n  var inheritType = transformData.inheritType ? transformData.inheritType : 0;\n  if (transformData.translation) lTranslationM.setPosition(tempVec.fromArray(transformData.translation));\n\n  if (transformData.preRotation) {\n    var array = transformData.preRotation.map(MathUtils.degToRad);\n    array.push(transformData.eulerOrder);\n    lPreRotationM.makeRotationFromEuler(tempEuler.fromArray(array));\n  }\n\n  if (transformData.rotation) {\n    var _array = transformData.rotation.map(MathUtils.degToRad);\n\n    _array.push(transformData.eulerOrder);\n\n    lRotationM.makeRotationFromEuler(tempEuler.fromArray(_array));\n  }\n\n  if (transformData.postRotation) {\n    var _array2 = transformData.postRotation.map(MathUtils.degToRad);\n\n    _array2.push(transformData.eulerOrder);\n\n    lPostRotationM.makeRotationFromEuler(tempEuler.fromArray(_array2));\n    lPostRotationM.invert();\n  }\n\n  if (transformData.scale) lScalingM.scale(tempVec.fromArray(transformData.scale)); // Pivots and offsets\n\n  if (transformData.scalingOffset) lScalingOffsetM.setPosition(tempVec.fromArray(transformData.scalingOffset));\n  if (transformData.scalingPivot) lScalingPivotM.setPosition(tempVec.fromArray(transformData.scalingPivot));\n  if (transformData.rotationOffset) lRotationOffsetM.setPosition(tempVec.fromArray(transformData.rotationOffset));\n  if (transformData.rotationPivot) lRotationPivotM.setPosition(tempVec.fromArray(transformData.rotationPivot)); // parent transform\n\n  if (transformData.parentMatrixWorld) {\n    lParentLX.copy(transformData.parentMatrix);\n    lParentGX.copy(transformData.parentMatrixWorld);\n  }\n\n  var lLRM = new Matrix4().copy(lPreRotationM).multiply(lRotationM).multiply(lPostRotationM); // Global Rotation\n\n  var lParentGRM = new Matrix4();\n  lParentGRM.extractRotation(lParentGX); // Global Shear*Scaling\n\n  var lParentTM = new Matrix4();\n  lParentTM.copyPosition(lParentGX);\n  var lParentGSM = new Matrix4();\n  var lParentGRSM = new Matrix4().copy(lParentTM).invert().multiply(lParentGX);\n  lParentGSM.copy(lParentGRM).invert().multiply(lParentGRSM);\n  var lLSM = lScalingM;\n  var lGlobalRS = new Matrix4();\n\n  if (inheritType === 0) {\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM).multiply(lLSM);\n  } else if (inheritType === 1) {\n    lGlobalRS.copy(lParentGRM).multiply(lParentGSM).multiply(lLRM).multiply(lLSM);\n  } else {\n    var lParentLSM = new Matrix4().scale(new Vector3().setFromMatrixScale(lParentLX));\n    var lParentLSM_inv = new Matrix4().copy(lParentLSM).invert();\n    var lParentGSM_noLocal = new Matrix4().copy(lParentGSM).multiply(lParentLSM_inv);\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM_noLocal).multiply(lLSM);\n  }\n\n  var lRotationPivotM_inv = new Matrix4();\n  lRotationPivotM_inv.copy(lRotationPivotM).invert();\n  var lScalingPivotM_inv = new Matrix4();\n  lScalingPivotM_inv.copy(lScalingPivotM).invert(); // Calculate the local transform matrix\n\n  var lTransform = new Matrix4();\n  lTransform.copy(lTranslationM).multiply(lRotationOffsetM).multiply(lRotationPivotM).multiply(lPreRotationM).multiply(lRotationM).multiply(lPostRotationM).multiply(lRotationPivotM_inv).multiply(lScalingOffsetM).multiply(lScalingPivotM).multiply(lScalingM).multiply(lScalingPivotM_inv);\n  var lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition(lTransform);\n  var lGlobalTranslation = new Matrix4().copy(lParentGX).multiply(lLocalTWithAllPivotAndOffsetInfo);\n  lGlobalT.copyPosition(lGlobalTranslation);\n  lTransform = new Matrix4().copy(lGlobalT).multiply(lGlobalRS); // from global to local\n\n  lTransform.premultiply(lParentGX.invert());\n  return lTransform;\n} // Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\n\nfunction getEulerOrder(order) {\n  order = order || 0;\n  var enums = ['ZYX', // -> XYZ extrinsic\n  'YZX', // -> XZY extrinsic\n  'XZY', // -> YZX extrinsic\n  'ZXY', // -> YXZ extrinsic\n  'YXZ', // -> ZXY extrinsic\n  'XYZ' // -> ZYX extrinsic\n  //'SphericXYZ', // not possible to support\n  ];\n\n  if (order === 6) {\n    console.warn('THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.');\n    return enums[0];\n  }\n\n  return enums[order];\n} // Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\n\n\nfunction parseNumberArray(value) {\n  var array = value.split(',').map(function (val) {\n    return parseFloat(val);\n  });\n  return array;\n}\n\nfunction convertArrayBufferToString(buffer, from, to) {\n  if (from === undefined) from = 0;\n  if (to === undefined) to = buffer.byteLength;\n  return LoaderUtils.decodeText(new Uint8Array(buffer, from, to));\n}\n\nfunction append(a, b) {\n  for (var i = 0, j = a.length, l = b.length; i < l; i++, j++) {\n    a[j] = b[i];\n  }\n}\n\nfunction slice(a, b, from, to) {\n  for (var i = from, j = 0; i < to; i++, j++) {\n    a[j] = b[i];\n  }\n\n  return a;\n} // inject array a2 into array a1 at index\n\n\nfunction inject(a1, index, a2) {\n  return a1.slice(0, index).concat(a2).concat(a1.slice(index));\n}\n\nexport { FBXLoader };","import _assertThisInitialized from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/get\";\nimport _classCallCheck from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { AnimationClip, Bone, Box3, BufferAttribute, BufferGeometry, CanvasTexture, ClampToEdgeWrapping, Color, DirectionalLight, DoubleSide, FileLoader, FrontSide, Group, ImageBitmapLoader, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, Line, LineBasicMaterial, LineLoop, LineSegments, LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, Loader, LoaderUtils, Material, MathUtils, Matrix4, Mesh, MeshBasicMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MirroredRepeatWrapping, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NumberKeyframeTrack, Object3D, OrthographicCamera, PerspectiveCamera, PointLight, Points, PointsMaterial, PropertyBinding, QuaternionKeyframeTrack, RGBFormat, RepeatWrapping, Skeleton, SkinnedMesh, Sphere, SpotLight, TangentSpaceNormalMap, TextureLoader, TriangleFanDrawMode, TriangleStripDrawMode, Vector2, Vector3, VectorKeyframeTrack, sRGBEncoding } from 'three';\n\nvar GLTFLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(GLTFLoader, _Loader);\n\n  var _super = _createSuper(GLTFLoader);\n\n  function GLTFLoader(manager) {\n    var _this;\n\n    _classCallCheck(this, GLTFLoader);\n\n    _this = _super.call(this, manager);\n    _this.dracoLoader = null;\n    _this.ktx2Loader = null;\n    _this.meshoptDecoder = null;\n    _this.pluginCallbacks = [];\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsTransmissionExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFLightsExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n\n    return _this;\n  }\n\n  _createClass(GLTFLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath;\n      } else if (this.path !== '') {\n        resourcePath = this.path;\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url);\n      } // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n\n\n      this.manager.itemStart(url);\n\n      var _onError = function _onError(e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      };\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (data) {\n        try {\n          scope.parse(data, resourcePath, function (gltf) {\n            onLoad(gltf);\n            scope.manager.itemEnd(url);\n          }, _onError);\n        } catch (e) {\n          _onError(e);\n        }\n      }, onProgress, _onError);\n    }\n  }, {\n    key: \"setDRACOLoader\",\n    value: function setDRACOLoader(dracoLoader) {\n      this.dracoLoader = dracoLoader;\n      return this;\n    }\n  }, {\n    key: \"setDDSLoader\",\n    value: function setDDSLoader() {\n      throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n    }\n  }, {\n    key: \"setKTX2Loader\",\n    value: function setKTX2Loader(ktx2Loader) {\n      this.ktx2Loader = ktx2Loader;\n      return this;\n    }\n  }, {\n    key: \"setMeshoptDecoder\",\n    value: function setMeshoptDecoder(meshoptDecoder) {\n      this.meshoptDecoder = meshoptDecoder;\n      return this;\n    }\n  }, {\n    key: \"register\",\n    value: function register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data, path, onLoad, onError) {\n      var content;\n      var extensions = {};\n      var plugins = {};\n\n      if (typeof data === 'string') {\n        content = data;\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n          } catch (error) {\n            if (onError) onError(error);\n            return;\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data));\n        }\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n        return;\n      }\n\n      var parser = new GLTFParser(json, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        requestHeader: this.requestHeader,\n        manager: this.manager,\n        ktx2Loader: this.ktx2Loader,\n        meshoptDecoder: this.meshoptDecoder\n      });\n      parser.fileLoader.setRequestHeader(this.requestHeader);\n\n      for (var i = 0; i < this.pluginCallbacks.length; i++) {\n        var plugin = this.pluginCallbacks[i](parser);\n        plugins[plugin.name] = plugin; // Workaround to avoid determining as unknown extension\n        // in addUnknownExtensionsToUserData().\n        // Remove this workaround if we move all the existing\n        // extension handlers to plugin system\n\n        extensions[plugin.name] = true;\n      }\n\n      if (json.extensionsUsed) {\n        for (var _i = 0; _i < json.extensionsUsed.length; ++_i) {\n          var extensionName = json.extensionsUsed[_i];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension();\n              break;\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension();\n              break;\n\n            default:\n              if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === undefined) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n              }\n\n          }\n        }\n      }\n\n      parser.setExtensions(extensions);\n      parser.setPlugins(plugins);\n      parser.parse(onLoad, onError);\n    }\n  }]);\n\n  return GLTFLoader;\n}(Loader);\n/* GLTFREGISTRY */\n\n\nfunction GLTFRegistry() {\n  var objects = {};\n  return {\n    get: function get(key) {\n      return objects[key];\n    },\n    add: function add(key, object) {\n      objects[key] = object;\n    },\n    remove: function remove(key) {\n      delete objects[key];\n    },\n    removeAll: function removeAll() {\n      objects = {};\n    }\n  };\n}\n/*********************************/\n\n/********** EXTENSIONS ***********/\n\n/*********************************/\n\n\nvar EXTENSIONS = {\n  KHR_BINARY_GLTF: 'KHR_binary_glTF',\n  KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n  KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n  KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n  KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n  KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n  KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n  KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n  KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n  KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n  EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n  EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\nvar GLTFLightsExtension = /*#__PURE__*/function () {\n  function GLTFLightsExtension(parser) {\n    _classCallCheck(this, GLTFLightsExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL; // Object3D instance caches\n\n    this.cache = {\n      refs: {},\n      uses: {}\n    };\n  }\n\n  _createClass(GLTFLightsExtension, [{\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var parser = this.parser;\n      var nodeDefs = this.parser.json.nodes || [];\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== undefined) {\n          parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n        }\n      }\n    }\n  }, {\n    key: \"_loadLight\",\n    value: function _loadLight(lightIndex) {\n      var parser = this.parser;\n      var cacheKey = 'light:' + lightIndex;\n      var dependency = parser.cache.get(cacheKey);\n      if (dependency) return dependency;\n      var json = parser.json;\n      var extensions = json.extensions && json.extensions[this.name] || {};\n      var lightDefs = extensions.lights || [];\n      var lightDef = lightDefs[lightIndex];\n      var lightNode;\n      var color = new Color(0xffffff);\n      if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n      var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n      switch (lightDef.type) {\n        case 'directional':\n          lightNode = new DirectionalLight(color);\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        case 'point':\n          lightNode = new PointLight(color);\n          lightNode.distance = range;\n          break;\n\n        case 'spot':\n          lightNode = new SpotLight(color);\n          lightNode.distance = range; // Handle spotlight properties.\n\n          lightDef.spot = lightDef.spot || {};\n          lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n          lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n          lightNode.angle = lightDef.spot.outerConeAngle;\n          lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        default:\n          throw new Error('THREE.GLTFLoader: Unexpected light type: ' + lightDef.type);\n      } // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n      // here, because node-level parsing will only override position if explicitly specified.\n\n\n      lightNode.position.set(0, 0, 0);\n      lightNode.decay = 2;\n      if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n      lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex);\n      dependency = Promise.resolve(lightNode);\n      parser.cache.add(cacheKey, dependency);\n      return dependency;\n    }\n  }, {\n    key: \"createNodeAttachment\",\n    value: function createNodeAttachment(nodeIndex) {\n      var self = this;\n      var parser = this.parser;\n      var json = parser.json;\n      var nodeDef = json.nodes[nodeIndex];\n      var lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n      var lightIndex = lightDef.light;\n      if (lightIndex === undefined) return null;\n      return this._loadLight(lightIndex).then(function (light) {\n        return parser._getNodeRef(self.cache, lightIndex, light);\n      });\n    }\n  }]);\n\n  return GLTFLightsExtension;\n}();\n/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\n\nvar GLTFMaterialsUnlitExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsUnlitExtension() {\n    _classCallCheck(this, GLTFMaterialsUnlitExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  _createClass(GLTFMaterialsUnlitExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return MeshBasicMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pending = [];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n      if (metallicRoughness) {\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsUnlitExtension;\n}();\n/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\n\nvar GLTFMaterialsClearcoatExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsClearcoatExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsClearcoatExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  _createClass(GLTFMaterialsClearcoatExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.clearcoatFactor !== undefined) {\n        materialParams.clearcoat = extension.clearcoatFactor;\n      }\n\n      if (extension.clearcoatTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n      }\n\n      if (extension.clearcoatRoughnessFactor !== undefined) {\n        materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n      }\n\n      if (extension.clearcoatRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n      }\n\n      if (extension.clearcoatNormalTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n        if (extension.clearcoatNormalTexture.scale !== undefined) {\n          var scale = extension.clearcoatNormalTexture.scale; // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\n          materialParams.clearcoatNormalScale = new Vector2(scale, -scale);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsClearcoatExtension;\n}();\n/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\n\nvar GLTFMaterialsTransmissionExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsTransmissionExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsTransmissionExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n\n  _createClass(GLTFMaterialsTransmissionExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.transmissionFactor !== undefined) {\n        materialParams.transmission = extension.transmissionFactor;\n      }\n\n      if (extension.transmissionTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsTransmissionExtension;\n}();\n/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t */\n\n\nvar GLTFTextureBasisUExtension = /*#__PURE__*/function () {\n  function GLTFTextureBasisUExtension(parser) {\n    _classCallCheck(this, GLTFTextureBasisUExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n\n  _createClass(GLTFTextureBasisUExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[this.name];\n      var source = json.images[extension.source];\n      var loader = parser.options.ktx2Loader;\n\n      if (!loader) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error('THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures');\n        } else {\n          // Assumes that the extension is optional and that a fallback texture is present\n          return null;\n        }\n      }\n\n      return parser.loadTextureImage(textureIndex, source, loader);\n    }\n  }]);\n\n  return GLTFTextureBasisUExtension;\n}();\n/**\n\t * WebP Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n\t */\n\n\nvar GLTFTextureWebPExtension = /*#__PURE__*/function () {\n  function GLTFTextureWebPExtension(parser) {\n    _classCallCheck(this, GLTFTextureWebPExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n\n  _createClass(GLTFTextureWebPExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var name = this.name;\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[name];\n      var source = json.images[extension.source];\n      var loader = parser.textureLoader;\n\n      if (source.uri) {\n        var handler = parser.options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.detectSupport().then(function (isSupported) {\n        if (isSupported) return parser.loadTextureImage(textureIndex, source, loader);\n\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n          throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.');\n        } // Fall back to PNG or JPEG.\n\n\n        return parser.loadTexture(textureIndex);\n      });\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport() {\n      if (!this.isSupported) {\n        this.isSupported = new Promise(function (resolve) {\n          var image = new Image(); // Lossy test image. Support for lossy images doesn't guarantee support for all\n          // WebP images, unfortunately.\n\n          image.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n          image.onload = image.onerror = function () {\n            resolve(image.height === 1);\n          };\n        });\n      }\n\n      return this.isSupported;\n    }\n  }]);\n\n  return GLTFTextureWebPExtension;\n}();\n/**\n\t* meshopt BufferView Compression Extension\n\t*\n\t* Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n\t*/\n\n\nvar GLTFMeshoptCompression = /*#__PURE__*/function () {\n  function GLTFMeshoptCompression(parser) {\n    _classCallCheck(this, GLTFMeshoptCompression);\n\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n\n  _createClass(GLTFMeshoptCompression, [{\n    key: \"loadBufferView\",\n    value: function loadBufferView(index) {\n      var json = this.parser.json;\n      var bufferView = json.bufferViews[index];\n\n      if (bufferView.extensions && bufferView.extensions[this.name]) {\n        var extensionDef = bufferView.extensions[this.name];\n        var buffer = this.parser.getDependency('buffer', extensionDef.buffer);\n        var decoder = this.parser.options.meshoptDecoder;\n\n        if (!decoder || !decoder.supported) {\n          if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n            throw new Error('THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files');\n          } else {\n            // Assumes that the extension is optional and that fallback buffer data is present\n            return null;\n          }\n        }\n\n        return Promise.all([buffer, decoder.ready]).then(function (res) {\n          var byteOffset = extensionDef.byteOffset || 0;\n          var byteLength = extensionDef.byteLength || 0;\n          var count = extensionDef.count;\n          var stride = extensionDef.byteStride;\n          var result = new ArrayBuffer(count * stride);\n          var source = new Uint8Array(res[0], byteOffset, byteLength);\n          decoder.decodeGltfBuffer(new Uint8Array(result), count, stride, source, extensionDef.mode, extensionDef.filter);\n          return result;\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return GLTFMeshoptCompression;\n}();\n/* BINARY EXTENSION */\n\n\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = {\n  JSON: 0x4E4F534A,\n  BIN: 0x004E4942\n};\n\nvar GLTFBinaryExtension = function GLTFBinaryExtension(data) {\n  _classCallCheck(this, GLTFBinaryExtension);\n\n  this.name = EXTENSIONS.KHR_BINARY_GLTF;\n  this.content = null;\n  this.body = null;\n  var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n  this.header = {\n    magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n    version: headerView.getUint32(4, true),\n    length: headerView.getUint32(8, true)\n  };\n\n  if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n    throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n  } else if (this.header.version < 2.0) {\n    throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n  }\n\n  var chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n  var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n  var chunkIndex = 0;\n\n  while (chunkIndex < chunkContentsLength) {\n    var chunkLength = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n    var chunkType = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n\n    if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n      var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n      this.content = LoaderUtils.decodeText(contentArray);\n    } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n      var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n      this.body = data.slice(byteOffset, byteOffset + chunkLength);\n    } // Clients must ignore chunks with unknown types.\n\n\n    chunkIndex += chunkLength;\n  }\n\n  if (this.content === null) {\n    throw new Error('THREE.GLTFLoader: JSON content not found.');\n  }\n};\n/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\n\nvar GLTFDracoMeshCompressionExtension = /*#__PURE__*/function () {\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    _classCallCheck(this, GLTFDracoMeshCompressionExtension);\n\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  _createClass(GLTFDracoMeshCompressionExtension, [{\n    key: \"decodePrimitive\",\n    value: function decodePrimitive(primitive, parser) {\n      var json = this.json;\n      var dracoLoader = this.dracoLoader;\n      var bufferViewIndex = primitive.extensions[this.name].bufferView;\n      var gltfAttributeMap = primitive.extensions[this.name].attributes;\n      var threeAttributeMap = {};\n      var attributeNormalizedMap = {};\n      var attributeTypeMap = {};\n\n      for (var attributeName in gltfAttributeMap) {\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n        threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n      }\n\n      for (var _attributeName in primitive.attributes) {\n        var _threeAttributeName = ATTRIBUTES[_attributeName] || _attributeName.toLowerCase();\n\n        if (gltfAttributeMap[_attributeName] !== undefined) {\n          var accessorDef = json.accessors[primitive.attributes[_attributeName]];\n          var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n          attributeTypeMap[_threeAttributeName] = componentType;\n          attributeNormalizedMap[_threeAttributeName] = accessorDef.normalized === true;\n        }\n      }\n\n      return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n        return new Promise(function (resolve) {\n          dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n            for (var _attributeName2 in geometry.attributes) {\n              var attribute = geometry.attributes[_attributeName2];\n              var normalized = attributeNormalizedMap[_attributeName2];\n              if (normalized !== undefined) attribute.normalized = normalized;\n            }\n\n            resolve(geometry);\n          }, threeAttributeMap, attributeTypeMap);\n        });\n      });\n    }\n  }]);\n\n  return GLTFDracoMeshCompressionExtension;\n}();\n/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\n\nvar GLTFTextureTransformExtension = /*#__PURE__*/function () {\n  function GLTFTextureTransformExtension() {\n    _classCallCheck(this, GLTFTextureTransformExtension);\n\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  _createClass(GLTFTextureTransformExtension, [{\n    key: \"extendTexture\",\n    value: function extendTexture(texture, transform) {\n      texture = texture.clone();\n\n      if (transform.offset !== undefined) {\n        texture.offset.fromArray(transform.offset);\n      }\n\n      if (transform.rotation !== undefined) {\n        texture.rotation = transform.rotation;\n      }\n\n      if (transform.scale !== undefined) {\n        texture.repeat.fromArray(transform.scale);\n      }\n\n      if (transform.texCoord !== undefined) {\n        console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n      }\n\n      texture.needsUpdate = true;\n      return texture;\n    }\n  }]);\n\n  return GLTFTextureTransformExtension;\n}();\n/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\nvar GLTFMeshStandardSGMaterial = /*#__PURE__*/function (_MeshStandardMaterial) {\n  _inherits(GLTFMeshStandardSGMaterial, _MeshStandardMaterial);\n\n  var _super2 = _createSuper(GLTFMeshStandardSGMaterial);\n\n  function GLTFMeshStandardSGMaterial(params) {\n    var _this2;\n\n    _classCallCheck(this, GLTFMeshStandardSGMaterial);\n\n    _this2 = _super2.call(this);\n    _this2.isGLTFSpecularGlossinessMaterial = true; //various chunks that need replacing\n\n    var specularMapParsFragmentChunk = ['#ifdef USE_SPECULARMAP', '\tuniform sampler2D specularMap;', '#endif'].join('\\n');\n    var glossinessMapParsFragmentChunk = ['#ifdef USE_GLOSSINESSMAP', '\tuniform sampler2D glossinessMap;', '#endif'].join('\\n');\n    var specularMapFragmentChunk = ['vec3 specularFactor = specular;', '#ifdef USE_SPECULARMAP', '\tvec4 texelSpecular = texture2D( specularMap, vUv );', '\ttexelSpecular = sRGBToLinear( texelSpecular );', '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tspecularFactor *= texelSpecular.rgb;', '#endif'].join('\\n');\n    var glossinessMapFragmentChunk = ['float glossinessFactor = glossiness;', '#ifdef USE_GLOSSINESSMAP', '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );', '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tglossinessFactor *= texelGlossiness.a;', '#endif'].join('\\n');\n    var lightPhysicalFragmentChunk = ['PhysicalMaterial material;', 'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );', 'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );', 'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );', 'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.', 'material.specularRoughness += geometryRoughness;', 'material.specularRoughness = min( material.specularRoughness, 1.0 );', 'material.specularColor = specularFactor;'].join('\\n');\n    var uniforms = {\n      specular: {\n        value: new Color().setHex(0xffffff)\n      },\n      glossiness: {\n        value: 1\n      },\n      specularMap: {\n        value: null\n      },\n      glossinessMap: {\n        value: null\n      }\n    };\n    _this2._extraUniforms = uniforms;\n\n    _this2.onBeforeCompile = function (shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName];\n      }\n\n      shader.fragmentShader = shader.fragmentShader.replace('uniform float roughness;', 'uniform vec3 specular;').replace('uniform float metalness;', 'uniform float glossiness;').replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk).replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk).replace('#include <roughnessmap_fragment>', specularMapFragmentChunk).replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk).replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n    };\n\n    Object.defineProperties(_assertThisInitialized(_this2), {\n      specular: {\n        get: function get() {\n          return uniforms.specular.value;\n        },\n        set: function set(v) {\n          uniforms.specular.value = v;\n        }\n      },\n      specularMap: {\n        get: function get() {\n          return uniforms.specularMap.value;\n        },\n        set: function set(v) {\n          uniforms.specularMap.value = v;\n\n          if (v) {\n            this.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n          } else {\n            delete this.defines.USE_SPECULARMAP;\n          }\n        }\n      },\n      glossiness: {\n        get: function get() {\n          return uniforms.glossiness.value;\n        },\n        set: function set(v) {\n          uniforms.glossiness.value = v;\n        }\n      },\n      glossinessMap: {\n        get: function get() {\n          return uniforms.glossinessMap.value;\n        },\n        set: function set(v) {\n          uniforms.glossinessMap.value = v;\n\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = '';\n            this.defines.USE_UV = '';\n          } else {\n            delete this.defines.USE_GLOSSINESSMAP;\n            delete this.defines.USE_UV;\n          }\n        }\n      }\n    });\n    delete _this2.metalness;\n    delete _this2.roughness;\n    delete _this2.metalnessMap;\n    delete _this2.roughnessMap;\n\n    _this2.setValues(params);\n\n    return _this2;\n  }\n\n  _createClass(GLTFMeshStandardSGMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(GLTFMeshStandardSGMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.specularMap = source.specularMap;\n      this.specular.copy(source.specular);\n      this.glossinessMap = source.glossinessMap;\n      this.glossiness = source.glossiness;\n      delete this.metalness;\n      delete this.roughness;\n      delete this.metalnessMap;\n      delete this.roughnessMap;\n      return this;\n    }\n  }]);\n\n  return GLTFMeshStandardSGMaterial;\n}(MeshStandardMaterial);\n\nvar GLTFMaterialsPbrSpecularGlossinessExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    _classCallCheck(this, GLTFMaterialsPbrSpecularGlossinessExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.specularGlossinessParams = ['color', 'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity', 'emissive', 'emissiveIntensity', 'emissiveMap', 'bumpMap', 'bumpScale', 'normalMap', 'normalMapType', 'displacementMap', 'displacementScale', 'displacementBias', 'specularMap', 'specular', 'glossinessMap', 'glossiness', 'alphaMap', 'envMap', 'envMapIntensity', 'refractionRatio'];\n  }\n\n  _createClass(GLTFMaterialsPbrSpecularGlossinessExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return GLTFMeshStandardSGMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pbrSpecularGlossiness = materialDef.extensions[this.name];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var pending = [];\n\n      if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n        var array = pbrSpecularGlossiness.diffuseFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n      }\n\n      materialParams.emissive = new Color(0.0, 0.0, 0.0);\n      materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n      materialParams.specular = new Color(1.0, 1.0, 1.0);\n\n      if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n        materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n      }\n\n      if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n        var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n        pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n        pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n      }\n\n      return Promise.all(pending);\n    }\n  }, {\n    key: \"createMaterial\",\n    value: function createMaterial(materialParams) {\n      var material = new GLTFMeshStandardSGMaterial(materialParams);\n      material.fog = true;\n      material.color = materialParams.color;\n      material.map = materialParams.map === undefined ? null : materialParams.map;\n      material.lightMap = null;\n      material.lightMapIntensity = 1.0;\n      material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n      material.aoMapIntensity = 1.0;\n      material.emissive = materialParams.emissive;\n      material.emissiveIntensity = 1.0;\n      material.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n      material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n      material.bumpScale = 1;\n      material.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n      material.normalMapType = TangentSpaceNormalMap;\n      if (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n      material.displacementMap = null;\n      material.displacementScale = 1;\n      material.displacementBias = 0;\n      material.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n      material.specular = materialParams.specular;\n      material.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n      material.glossiness = materialParams.glossiness;\n      material.alphaMap = null;\n      material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n      material.envMapIntensity = 1.0;\n      material.refractionRatio = 0.98;\n      return material;\n    }\n  }]);\n\n  return GLTFMaterialsPbrSpecularGlossinessExtension;\n}();\n/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\n\nvar GLTFMeshQuantizationExtension = function GLTFMeshQuantizationExtension() {\n  _classCallCheck(this, GLTFMeshQuantizationExtension);\n\n  this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n};\n/*********************************/\n\n/********** INTERPOLATION ********/\n\n/*********************************/\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\nvar GLTFCubicSplineInterpolant = /*#__PURE__*/function (_Interpolant) {\n  _inherits(GLTFCubicSplineInterpolant, _Interpolant);\n\n  var _super3 = _createSuper(GLTFCubicSplineInterpolant);\n\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, GLTFCubicSplineInterpolant);\n\n    return _super3.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(GLTFCubicSplineInterpolant, [{\n    key: \"copySampleValue_\",\n    value: function copySampleValue_(index) {\n      // Copies a sample value to the result buffer. See description of glTF\n      // CUBICSPLINE values layout in interpolate_() function below.\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          valueSize = this.valueSize,\n          offset = index * valueSize * 3 + valueSize;\n\n      for (var i = 0; i !== valueSize; i++) {\n        result[i] = values[offset + i];\n      }\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineInterpolant;\n}(Interpolant);\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n  var result = this.resultBuffer;\n  var values = this.sampleValues;\n  var stride = this.valueSize;\n  var stride2 = stride * 2;\n  var stride3 = stride * 3;\n  var td = t1 - t0;\n  var p = (t - t0) / td;\n  var pp = p * p;\n  var ppp = pp * p;\n  var offset1 = i1 * stride3;\n  var offset0 = offset1 - stride3;\n  var s2 = -2 * ppp + 3 * pp;\n  var s3 = ppp - pp;\n  var s0 = 1 - s2;\n  var s1 = s3 - pp + p; // Layout of keyframe output values for CUBICSPLINE animations:\n  //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\n  for (var i = 0; i !== stride; i++) {\n    var p0 = values[offset0 + i + stride]; // splineVertex_k\n\n    var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\n    var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n\n    var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n    result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n  }\n\n  return result;\n};\n/*********************************/\n\n/********** INTERNALS ************/\n\n/*********************************/\n\n/* CONSTANTS */\n\n\nvar WEBGL_CONSTANTS = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nvar WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nvar WEBGL_FILTERS = {\n  9728: NearestFilter,\n  9729: LinearFilter,\n  9984: NearestMipmapNearestFilter,\n  9985: LinearMipmapNearestFilter,\n  9986: NearestMipmapLinearFilter,\n  9987: LinearMipmapLinearFilter\n};\nvar WEBGL_WRAPPINGS = {\n  33071: ClampToEdgeWrapping,\n  33648: MirroredRepeatWrapping,\n  10497: RepeatWrapping\n};\nvar WEBGL_TYPE_SIZES = {\n  'SCALAR': 1,\n  'VEC2': 2,\n  'VEC3': 3,\n  'VEC4': 4,\n  'MAT2': 4,\n  'MAT3': 9,\n  'MAT4': 16\n};\nvar ATTRIBUTES = {\n  POSITION: 'position',\n  NORMAL: 'normal',\n  TANGENT: 'tangent',\n  TEXCOORD_0: 'uv',\n  TEXCOORD_1: 'uv2',\n  COLOR_0: 'color',\n  WEIGHTS_0: 'skinWeight',\n  JOINTS_0: 'skinIndex'\n};\nvar PATH_PROPERTIES = {\n  scale: 'scale',\n  translation: 'position',\n  rotation: 'quaternion',\n  weights: 'morphTargetInfluences'\n};\nvar INTERPOLATION = {\n  CUBICSPLINE: undefined,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: InterpolateLinear,\n  STEP: InterpolateDiscrete\n};\nvar ALPHA_MODES = {\n  OPAQUE: 'OPAQUE',\n  MASK: 'MASK',\n  BLEND: 'BLEND'\n};\n/* UTILITY FUNCTIONS */\n\nfunction resolveURL(url, path) {\n  // Invalid URL\n  if (typeof url !== 'string' || url === '') return ''; // Host Relative URL\n\n  if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n    path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n  } // Absolute URL http://,https://,//\n\n\n  if (/^(https?:)?\\/\\//i.test(url)) return url; // Data URI\n\n  if (/^data:.*,.*$/i.test(url)) return url; // Blob URL\n\n  if (/^blob:.*$/i.test(url)) return url; // Relative URL\n\n  return path + url;\n}\n/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\n\nfunction createDefaultMaterial(cache) {\n  if (cache['DefaultMaterial'] === undefined) {\n    cache['DefaultMaterial'] = new MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: FrontSide\n    });\n  }\n\n  return cache['DefaultMaterial'];\n}\n\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  // Add unknown glTF extensions to an object's userData.\n  for (var name in objectDef.extensions) {\n    if (knownExtensions[name] === undefined) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\n/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\n\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== undefined) {\n    if (typeof gltfDef.extras === 'object') {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n    }\n  }\n}\n/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\n\nfunction addMorphTargets(geometry, targets, parser) {\n  var hasMorphPosition = false;\n  var hasMorphNormal = false;\n\n  for (var i = 0, il = targets.length; i < il; i++) {\n    var target = targets[i];\n    if (target.POSITION !== undefined) hasMorphPosition = true;\n    if (target.NORMAL !== undefined) hasMorphNormal = true;\n    if (hasMorphPosition && hasMorphNormal) break;\n  }\n\n  if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n  var pendingPositionAccessors = [];\n  var pendingNormalAccessors = [];\n\n  for (var _i2 = 0, _il = targets.length; _i2 < _il; _i2++) {\n    var _target = targets[_i2];\n\n    if (hasMorphPosition) {\n      var pendingAccessor = _target.POSITION !== undefined ? parser.getDependency('accessor', _target.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphNormal) {\n      var _pendingAccessor = _target.NORMAL !== undefined ? parser.getDependency('accessor', _target.NORMAL) : geometry.attributes.normal;\n\n      pendingNormalAccessors.push(_pendingAccessor);\n    }\n  }\n\n  return Promise.all([Promise.all(pendingPositionAccessors), Promise.all(pendingNormalAccessors)]).then(function (accessors) {\n    var morphPositions = accessors[0];\n    var morphNormals = accessors[1];\n    if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\n/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\n\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n\n  if (meshDef.weights !== undefined) {\n    for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\n    }\n  } // .extras has user-defined data, so check that .extras.targetNames is an array.\n\n\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    var targetNames = meshDef.extras.targetNames;\n\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n\n      for (var _i3 = 0, _il2 = targetNames.length; _i3 < _il2; _i3++) {\n        mesh.morphTargetDictionary[targetNames[_i3]] = _i3;\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n    }\n  }\n}\n\nfunction createPrimitiveKey(primitiveDef) {\n  var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  var geometryKey;\n\n  if (dracoExtension) {\n    geometryKey = 'draco:' + dracoExtension.bufferView + ':' + dracoExtension.indices + ':' + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n  }\n\n  return geometryKey;\n}\n\nfunction createAttributesKey(attributes) {\n  var attributesKey = '';\n  var keys = Object.keys(attributes).sort();\n\n  for (var i = 0, il = keys.length; i < il; i++) {\n    attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n  }\n\n  return attributesKey;\n}\n\nfunction getNormalizedComponentScale(constructor) {\n  // Reference:\n  // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n\n    case Uint8Array:\n      return 1 / 255;\n\n    case Int16Array:\n      return 1 / 32767;\n\n    case Uint16Array:\n      return 1 / 65535;\n\n    default:\n      throw new Error('THREE.GLTFLoader: Unsupported normalized accessor component type.');\n  }\n}\n/* GLTF PARSER */\n\n\nvar GLTFParser = /*#__PURE__*/function () {\n  function GLTFParser() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, GLTFParser);\n\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options; // loader object cache\n\n    this.cache = new GLTFRegistry(); // associations between Three.js objects and glTF elements\n\n    this.associations = new Map(); // BufferGeometry caching\n\n    this.primitiveCache = {}; // Object3D instance caches\n\n    this.meshCache = {\n      refs: {},\n      uses: {}\n    };\n    this.cameraCache = {\n      refs: {},\n      uses: {}\n    };\n    this.lightCache = {\n      refs: {},\n      uses: {}\n    }; // Track node names, to ensure no duplicates\n\n    this.nodeNamesUsed = {}; // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n\n    if (typeof createImageBitmap !== 'undefined' && /Firefox/.test(navigator.userAgent) === false) {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\n    } else {\n      this.textureLoader = new TextureLoader(this.options.manager);\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  _createClass(GLTFParser, [{\n    key: \"setExtensions\",\n    value: function setExtensions(extensions) {\n      this.extensions = extensions;\n    }\n  }, {\n    key: \"setPlugins\",\n    value: function setPlugins(plugins) {\n      this.plugins = plugins;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(onLoad, onError) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions; // Clear the loader cache\n\n      this.cache.removeAll(); // Mark the special nodes/meshes in json for efficient parse\n\n      this._invokeAll(function (ext) {\n        return ext._markDefs && ext._markDefs();\n      });\n\n      Promise.all(this._invokeAll(function (ext) {\n        return ext.beforeRoot && ext.beforeRoot();\n      })).then(function () {\n        return Promise.all([parser.getDependencies('scene'), parser.getDependencies('animation'), parser.getDependencies('camera')]);\n      }).then(function (dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {}\n        };\n        addUnknownExtensionsToUserData(extensions, result, json);\n        assignExtrasToUserData(result, json);\n        Promise.all(parser._invokeAll(function (ext) {\n          return ext.afterRoot && ext.afterRoot(result);\n        })).then(function () {\n          onLoad(result);\n        });\n      }).catch(onError);\n    }\n    /**\n     * Marks the special nodes/meshes in json for efficient parse.\n     */\n\n  }, {\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var nodeDefs = this.json.nodes || [];\n      var skinDefs = this.json.skins || [];\n      var meshDefs = this.json.meshes || []; // Nothing in the node definition indicates whether it is a Bone or an\n      // Object3D. Use the skins' joint references to mark bones.\n\n      for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n        var joints = skinDefs[skinIndex].joints;\n\n        for (var i = 0, il = joints.length; i < il; i++) {\n          nodeDefs[joints[i]].isBone = true;\n        }\n      } // Iterate over all nodes, marking references to shared resources,\n      // as well as skeleton joints.\n\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.mesh !== undefined) {\n          this._addNodeRef(this.meshCache, nodeDef.mesh); // Nothing in the mesh definition indicates whether it is\n          // a SkinnedMesh or Mesh. Use the node's mesh reference\n          // to mark SkinnedMesh if node has skin.\n\n\n          if (nodeDef.skin !== undefined) {\n            meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n          }\n        }\n\n        if (nodeDef.camera !== undefined) {\n          this._addNodeRef(this.cameraCache, nodeDef.camera);\n        }\n      }\n    }\n    /**\n     * Counts references to shared node / Object3D resources. These resources\n     * can be reused, or \"instantiated\", at multiple nodes in the scene\n     * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n     * be marked. Non-scenegraph resources (like Materials, Geometries, and\n     * Textures) can be reused directly and are not marked here.\n     *\n     * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n     */\n\n  }, {\n    key: \"_addNodeRef\",\n    value: function _addNodeRef(cache, index) {\n      if (index === undefined) return;\n\n      if (cache.refs[index] === undefined) {\n        cache.refs[index] = cache.uses[index] = 0;\n      }\n\n      cache.refs[index]++;\n    }\n    /** Returns a reference to a shared resource, cloning it if necessary. */\n\n  }, {\n    key: \"_getNodeRef\",\n    value: function _getNodeRef(cache, index, object) {\n      if (cache.refs[index] <= 1) return object;\n      var ref = object.clone();\n      ref.name += '_instance_' + cache.uses[index]++;\n      return ref;\n    }\n  }, {\n    key: \"_invokeOne\",\n    value: function _invokeOne(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.push(this);\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) return result;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_invokeAll\",\n    value: function _invokeAll(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.unshift(this);\n      var pending = [];\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) pending.push(result);\n      }\n\n      return pending;\n    }\n    /**\n     * Requests the specified dependency asynchronously, with caching.\n     * @param {string} type\n     * @param {number} index\n     * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n     */\n\n  }, {\n    key: \"getDependency\",\n    value: function getDependency(type, index) {\n      var cacheKey = type + ':' + index;\n      var dependency = this.cache.get(cacheKey);\n\n      if (!dependency) {\n        switch (type) {\n          case 'scene':\n            dependency = this.loadScene(index);\n            break;\n\n          case 'node':\n            dependency = this.loadNode(index);\n            break;\n\n          case 'mesh':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMesh && ext.loadMesh(index);\n            });\n            break;\n\n          case 'accessor':\n            dependency = this.loadAccessor(index);\n            break;\n\n          case 'bufferView':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadBufferView && ext.loadBufferView(index);\n            });\n            break;\n\n          case 'buffer':\n            dependency = this.loadBuffer(index);\n            break;\n\n          case 'material':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMaterial && ext.loadMaterial(index);\n            });\n            break;\n\n          case 'texture':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadTexture && ext.loadTexture(index);\n            });\n            break;\n\n          case 'skin':\n            dependency = this.loadSkin(index);\n            break;\n\n          case 'animation':\n            dependency = this.loadAnimation(index);\n            break;\n\n          case 'camera':\n            dependency = this.loadCamera(index);\n            break;\n\n          default:\n            throw new Error('Unknown type: ' + type);\n        }\n\n        this.cache.add(cacheKey, dependency);\n      }\n\n      return dependency;\n    }\n    /**\n     * Requests all dependencies of the specified type asynchronously, with caching.\n     * @param {string} type\n     * @return {Promise<Array<Object>>}\n     */\n\n  }, {\n    key: \"getDependencies\",\n    value: function getDependencies(type) {\n      var dependencies = this.cache.get(type);\n\n      if (!dependencies) {\n        var parser = this;\n        var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n        dependencies = Promise.all(defs.map(function (def, index) {\n          return parser.getDependency(type, index);\n        }));\n        this.cache.add(type, dependencies);\n      }\n\n      return dependencies;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(bufferIndex) {\n      var bufferDef = this.json.buffers[bufferIndex];\n      var loader = this.fileLoader;\n\n      if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n        throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n      } // If present, GLB container is required to be the first buffer.\n\n\n      if (bufferDef.uri === undefined && bufferIndex === 0) {\n        return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n      }\n\n      var options = this.options;\n      return new Promise(function (resolve, reject) {\n        loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n          reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n        });\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferViewIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBufferView\",\n    value: function loadBufferView(bufferViewIndex) {\n      var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n      return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n        var byteLength = bufferViewDef.byteLength || 0;\n        var byteOffset = bufferViewDef.byteOffset || 0;\n        return buffer.slice(byteOffset, byteOffset + byteLength);\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n     * @param {number} accessorIndex\n     * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n     */\n\n  }, {\n    key: \"loadAccessor\",\n    value: function loadAccessor(accessorIndex) {\n      var parser = this;\n      var json = this.json;\n      var accessorDef = this.json.accessors[accessorIndex];\n\n      if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n        // Ignore empty accessors, which may be used to declare runtime\n        // information about attributes coming from another source (e.g. Draco\n        // compression extension).\n        return Promise.resolve(null);\n      }\n\n      var pendingBufferViews = [];\n\n      if (accessorDef.bufferView !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n      } else {\n        pendingBufferViews.push(null);\n      }\n\n      if (accessorDef.sparse !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n      }\n\n      return Promise.all(pendingBufferViews).then(function (bufferViews) {\n        var bufferView = bufferViews[0];\n        var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n        var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\n        var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n        var itemBytes = elementBytes * itemSize;\n        var byteOffset = accessorDef.byteOffset || 0;\n        var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n        var normalized = accessorDef.normalized === true;\n        var array, bufferAttribute; // The buffer is not interleaved if the stride is the item size in bytes.\n\n        if (byteStride && byteStride !== itemBytes) {\n          // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n          // This makes sure that IBA.count reflects accessor.count properly\n          var ibSlice = Math.floor(byteOffset / byteStride);\n          var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n          var ib = parser.cache.get(ibCacheKey);\n\n          if (!ib) {\n            array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes); // Integer parameters to IB/IBA are in array elements, not bytes.\n\n            ib = new InterleavedBuffer(array, byteStride / elementBytes);\n            parser.cache.add(ibCacheKey, ib);\n          }\n\n          bufferAttribute = new InterleavedBufferAttribute(ib, itemSize, byteOffset % byteStride / elementBytes, normalized);\n        } else {\n          if (bufferView === null) {\n            array = new TypedArray(accessorDef.count * itemSize);\n          } else {\n            array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n          }\n\n          bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n        } // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\n\n        if (accessorDef.sparse !== undefined) {\n          var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n          var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n          var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n          var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n          var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n          var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n          if (bufferView !== null) {\n            // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n            bufferAttribute = new BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n          }\n\n          for (var i = 0, il = sparseIndices.length; i < il; i++) {\n            var index = sparseIndices[i];\n            bufferAttribute.setX(index, sparseValues[i * itemSize]);\n            if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n            if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n            if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n            if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n          }\n        }\n\n        return bufferAttribute;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n     * @param {number} textureIndex\n     * @return {Promise<THREE.Texture>}\n     */\n\n  }, {\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var source = json.images[textureDef.source];\n      var loader = this.textureLoader;\n\n      if (source.uri) {\n        var handler = options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.loadTextureImage(textureIndex, source, loader);\n    }\n  }, {\n    key: \"loadTextureImage\",\n    value: function loadTextureImage(textureIndex, source, loader) {\n      var parser = this;\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var URL = self.URL || self.webkitURL;\n      var sourceURI = source.uri;\n      var isObjectURL = false;\n      var hasAlpha = true;\n      if (source.mimeType === 'image/jpeg') hasAlpha = false;\n\n      if (source.bufferView !== undefined) {\n        // Load binary image data from bufferView, if provided.\n        sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n          if (source.mimeType === 'image/png') {\n            // Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n            // alpha channel. This check is conservative  the image could have an alpha\n            // channel with all values == 1, and the indexed type (colorType == 3) only\n            // sometimes contains alpha.\n            //\n            // https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n            var colorType = new DataView(bufferView, 25, 1).getUint8(0, false);\n            hasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n          }\n\n          isObjectURL = true;\n          var blob = new Blob([bufferView], {\n            type: source.mimeType\n          });\n          sourceURI = URL.createObjectURL(blob);\n          return sourceURI;\n        });\n      } else if (source.uri === undefined) {\n        throw new Error('THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView');\n      }\n\n      return Promise.resolve(sourceURI).then(function (sourceURI) {\n        return new Promise(function (resolve, reject) {\n          var onLoad = resolve;\n\n          if (loader.isImageBitmapLoader === true) {\n            onLoad = function onLoad(imageBitmap) {\n              resolve(new CanvasTexture(imageBitmap));\n            };\n          }\n\n          loader.load(resolveURL(sourceURI, options.path), onLoad, undefined, reject);\n        });\n      }).then(function (texture) {\n        // Clean up resources and configure Texture.\n        if (isObjectURL === true) {\n          URL.revokeObjectURL(sourceURI);\n        }\n\n        texture.flipY = false;\n        if (textureDef.name) texture.name = textureDef.name; // When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\n        if (!hasAlpha) texture.format = RGBFormat;\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n        parser.associations.set(texture, {\n          type: 'textures',\n          index: textureIndex\n        });\n        return texture;\n      });\n    }\n    /**\n     * Asynchronously assigns a texture to the given material parameters.\n     * @param {Object} materialParams\n     * @param {string} mapName\n     * @param {Object} mapDef\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"assignTexture\",\n    value: function assignTexture(materialParams, mapName, mapDef) {\n      var parser = this;\n      return this.getDependency('texture', mapDef.index).then(function (texture) {\n        // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n        // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n        if (mapDef.texCoord !== undefined && mapDef.texCoord != 0 && !(mapName === 'aoMap' && mapDef.texCoord == 1)) {\n          console.warn('THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.');\n        }\n\n        if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n          var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n          if (transform) {\n            var gltfReference = parser.associations.get(texture);\n            texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n            parser.associations.set(texture, gltfReference);\n          }\n        }\n\n        materialParams[mapName] = texture;\n      });\n    }\n    /**\n     * Assigns final material to a Mesh, Line, or Points instance. The instance\n     * already has a material (generated from the glTF material options alone)\n     * but reuse of the same glTF material may require multiple threejs materials\n     * to accommodate different primitive types, defines, etc. New materials will\n     * be created if necessary, and reused from a cache.\n     * @param  {Object3D} mesh Mesh, Line, or Points instance.\n     */\n\n  }, {\n    key: \"assignFinalMaterial\",\n    value: function assignFinalMaterial(mesh) {\n      var geometry = mesh.geometry;\n      var material = mesh.material;\n      var useVertexTangents = geometry.attributes.tangent !== undefined;\n      var useVertexColors = geometry.attributes.color !== undefined;\n      var useFlatShading = geometry.attributes.normal === undefined;\n      var useSkinning = mesh.isSkinnedMesh === true;\n      var useMorphTargets = Object.keys(geometry.morphAttributes).length > 0;\n      var useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n      if (mesh.isPoints) {\n        var cacheKey = 'PointsMaterial:' + material.uuid;\n        var pointsMaterial = this.cache.get(cacheKey);\n\n        if (!pointsMaterial) {\n          pointsMaterial = new PointsMaterial();\n          Material.prototype.copy.call(pointsMaterial, material);\n          pointsMaterial.color.copy(material.color);\n          pointsMaterial.map = material.map;\n          pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n          this.cache.add(cacheKey, pointsMaterial);\n        }\n\n        material = pointsMaterial;\n      } else if (mesh.isLine) {\n        var _cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n        var lineMaterial = this.cache.get(_cacheKey);\n\n        if (!lineMaterial) {\n          lineMaterial = new LineBasicMaterial();\n          Material.prototype.copy.call(lineMaterial, material);\n          lineMaterial.color.copy(material.color);\n          this.cache.add(_cacheKey, lineMaterial);\n        }\n\n        material = lineMaterial;\n      } // Clone the material if it will be modified\n\n\n      if (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n        var _cacheKey2 = 'ClonedMaterial:' + material.uuid + ':';\n\n        if (material.isGLTFSpecularGlossinessMaterial) _cacheKey2 += 'specular-glossiness:';\n        if (useSkinning) _cacheKey2 += 'skinning:';\n        if (useVertexTangents) _cacheKey2 += 'vertex-tangents:';\n        if (useVertexColors) _cacheKey2 += 'vertex-colors:';\n        if (useFlatShading) _cacheKey2 += 'flat-shading:';\n        if (useMorphTargets) _cacheKey2 += 'morph-targets:';\n        if (useMorphNormals) _cacheKey2 += 'morph-normals:';\n        var cachedMaterial = this.cache.get(_cacheKey2);\n\n        if (!cachedMaterial) {\n          cachedMaterial = material.clone();\n          if (useSkinning) cachedMaterial.skinning = true;\n          if (useVertexColors) cachedMaterial.vertexColors = true;\n          if (useFlatShading) cachedMaterial.flatShading = true;\n          if (useMorphTargets) cachedMaterial.morphTargets = true;\n          if (useMorphNormals) cachedMaterial.morphNormals = true;\n\n          if (useVertexTangents) {\n            cachedMaterial.vertexTangents = true; // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\n            if (cachedMaterial.normalScale) cachedMaterial.normalScale.y *= -1;\n            if (cachedMaterial.clearcoatNormalScale) cachedMaterial.clearcoatNormalScale.y *= -1;\n          }\n\n          this.cache.add(_cacheKey2, cachedMaterial);\n          this.associations.set(cachedMaterial, this.associations.get(material));\n        }\n\n        material = cachedMaterial;\n      } // workarounds for mesh and geometry\n\n\n      if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n        geometry.setAttribute('uv2', geometry.attributes.uv);\n      }\n\n      mesh.material = material;\n    }\n  }, {\n    key: \"getMaterialType\",\n    value: function getMaterialType()\n    /* materialIndex */\n    {\n      return MeshStandardMaterial;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n     * @param {number} materialIndex\n     * @return {Promise<Material>}\n     */\n\n  }, {\n    key: \"loadMaterial\",\n    value: function loadMaterial(materialIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var materialDef = json.materials[materialIndex];\n      var materialType;\n      var materialParams = {};\n      var materialExtensions = materialDef.extensions || {};\n      var pending = [];\n\n      if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n        var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        materialType = sgExtension.getMaterialType();\n        pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n      } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n        var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n        materialType = kmuExtension.getMaterialType();\n        pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n      } else {\n        // Specification:\n        // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n        var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n        materialParams.color = new Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n        }\n\n        materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n        materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n        if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n          pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n        }\n\n        materialType = this._invokeOne(function (ext) {\n          return ext.getMaterialType && ext.getMaterialType(materialIndex);\n        });\n        pending.push(Promise.all(this._invokeAll(function (ext) {\n          return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n        })));\n      }\n\n      if (materialDef.doubleSided === true) {\n        materialParams.side = DoubleSide;\n      }\n\n      var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n      if (alphaMode === ALPHA_MODES.BLEND) {\n        materialParams.transparent = true; // See: https://github.com/mrdoob/three.js/issues/17706\n\n        materialParams.depthWrite = false;\n      } else {\n        materialParams.transparent = false;\n\n        if (alphaMode === ALPHA_MODES.MASK) {\n          materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n        }\n      }\n\n      if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture)); // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\n        materialParams.normalScale = new Vector2(1, -1);\n\n        if (materialDef.normalTexture.scale !== undefined) {\n          materialParams.normalScale.set(materialDef.normalTexture.scale, -materialDef.normalTexture.scale);\n        }\n      }\n\n      if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n        }\n      }\n\n      if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n        materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n      }\n\n      if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n      }\n\n      return Promise.all(pending).then(function () {\n        var material;\n\n        if (materialType === GLTFMeshStandardSGMaterial) {\n          material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n        } else {\n          material = new materialType(materialParams);\n        }\n\n        if (materialDef.name) material.name = materialDef.name; // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\n        if (material.map) material.map.encoding = sRGBEncoding;\n        if (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding;\n        assignExtrasToUserData(material, materialDef);\n        parser.associations.set(material, {\n          type: 'materials',\n          index: materialIndex\n        });\n        if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n        return material;\n      });\n    }\n    /** When Object3D instances are targeted by animation, they need unique names. */\n\n  }, {\n    key: \"createUniqueName\",\n    value: function createUniqueName(originalName) {\n      var sanitizedName = PropertyBinding.sanitizeNodeName(originalName || '');\n      var name = sanitizedName;\n\n      for (var i = 1; this.nodeNamesUsed[name]; ++i) {\n        name = sanitizedName + '_' + i;\n      }\n\n      this.nodeNamesUsed[name] = true;\n      return name;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n     *\n     * Creates BufferGeometries from primitives.\n     *\n     * @param {Array<GLTF.Primitive>} primitives\n     * @return {Promise<Array<BufferGeometry>>}\n     */\n\n  }, {\n    key: \"loadGeometries\",\n    value: function loadGeometries(primitives) {\n      var parser = this;\n      var extensions = this.extensions;\n      var cache = this.primitiveCache;\n\n      function createDracoPrimitive(primitive) {\n        return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function (geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser);\n        });\n      }\n\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var primitive = primitives[i];\n        var cacheKey = createPrimitiveKey(primitive); // See if we've already created this geometry\n\n        var cached = cache[cacheKey];\n\n        if (cached) {\n          // Use the cached geometry if it exists\n          pending.push(cached.promise);\n        } else {\n          var geometryPromise = void 0;\n\n          if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n            // Use DRACO geometry if available\n            geometryPromise = createDracoPrimitive(primitive);\n          } else {\n            // Otherwise create a new geometry\n            geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n          } // Cache this geometry\n\n\n          cache[cacheKey] = {\n            primitive: primitive,\n            promise: geometryPromise\n          };\n          pending.push(geometryPromise);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n     * @param {number} meshIndex\n     * @return {Promise<Group|Mesh|SkinnedMesh>}\n     */\n\n  }, {\n    key: \"loadMesh\",\n    value: function loadMesh(meshIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var meshDef = json.meshes[meshIndex];\n      var primitives = meshDef.primitives;\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var material = primitives[i].material === undefined ? createDefaultMaterial(this.cache) : this.getDependency('material', primitives[i].material);\n        pending.push(material);\n      }\n\n      pending.push(parser.loadGeometries(primitives));\n      return Promise.all(pending).then(function (results) {\n        var materials = results.slice(0, results.length - 1);\n        var geometries = results[results.length - 1];\n        var meshes = [];\n\n        for (var _i4 = 0, _il3 = geometries.length; _i4 < _il3; _i4++) {\n          var geometry = geometries[_i4];\n          var primitive = primitives[_i4]; // 1. create Mesh\n\n          var mesh = void 0;\n          var _material = materials[_i4];\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === undefined) {\n            // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n            mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, _material) : new Mesh(geometry, _material);\n\n            if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n              // we normalize floating point skin weight array to fix malformed assets (see #15319)\n              // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n              mesh.normalizeSkinWeights();\n            }\n\n            if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n            } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n            }\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n            mesh = new LineSegments(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n            mesh = new Line(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n            mesh = new LineLoop(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n            mesh = new Points(geometry, _material);\n          } else {\n            throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n          }\n\n          if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n            updateMorphTargets(mesh, meshDef);\n          }\n\n          mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex);\n          assignExtrasToUserData(mesh, meshDef);\n          if (primitive.extensions) addUnknownExtensionsToUserData(extensions, mesh, primitive);\n          parser.assignFinalMaterial(mesh);\n          meshes.push(mesh);\n        }\n\n        if (meshes.length === 1) {\n          return meshes[0];\n        }\n\n        var group = new Group();\n\n        for (var _i5 = 0, _il4 = meshes.length; _i5 < _il4; _i5++) {\n          group.add(meshes[_i5]);\n        }\n\n        return group;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n     * @param {number} cameraIndex\n     * @return {Promise<THREE.Camera>}\n     */\n\n  }, {\n    key: \"loadCamera\",\n    value: function loadCamera(cameraIndex) {\n      var camera;\n      var cameraDef = this.json.cameras[cameraIndex];\n      var params = cameraDef[cameraDef.type];\n\n      if (!params) {\n        console.warn('THREE.GLTFLoader: Missing camera parameters.');\n        return;\n      }\n\n      if (cameraDef.type === 'perspective') {\n        camera = new PerspectiveCamera(MathUtils.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n      } else if (cameraDef.type === 'orthographic') {\n        camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n      }\n\n      if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name);\n      assignExtrasToUserData(camera, cameraDef);\n      return Promise.resolve(camera);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n     * @param {number} skinIndex\n     * @return {Promise<Object>}\n     */\n\n  }, {\n    key: \"loadSkin\",\n    value: function loadSkin(skinIndex) {\n      var skinDef = this.json.skins[skinIndex];\n      var skinEntry = {\n        joints: skinDef.joints\n      };\n\n      if (skinDef.inverseBindMatrices === undefined) {\n        return Promise.resolve(skinEntry);\n      }\n\n      return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n        skinEntry.inverseBindMatrices = accessor;\n        return skinEntry;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<AnimationClip>}\n     */\n\n  }, {\n    key: \"loadAnimation\",\n    value: function loadAnimation(animationIndex) {\n      var json = this.json;\n      var animationDef = json.animations[animationIndex];\n      var pendingNodes = [];\n      var pendingInputAccessors = [];\n      var pendingOutputAccessors = [];\n      var pendingSamplers = [];\n      var pendingTargets = [];\n\n      for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n        var channel = animationDef.channels[i];\n        var sampler = animationDef.samplers[channel.sampler];\n        var target = channel.target;\n        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\n        var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n        var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n        pendingNodes.push(this.getDependency('node', name));\n        pendingInputAccessors.push(this.getDependency('accessor', input));\n        pendingOutputAccessors.push(this.getDependency('accessor', output));\n        pendingSamplers.push(sampler);\n        pendingTargets.push(target);\n      }\n\n      return Promise.all([Promise.all(pendingNodes), Promise.all(pendingInputAccessors), Promise.all(pendingOutputAccessors), Promise.all(pendingSamplers), Promise.all(pendingTargets)]).then(function (dependencies) {\n        var nodes = dependencies[0];\n        var inputAccessors = dependencies[1];\n        var outputAccessors = dependencies[2];\n        var samplers = dependencies[3];\n        var targets = dependencies[4];\n        var tracks = [];\n\n        var _loop = function _loop(_i6, _il5) {\n          var node = nodes[_i6];\n          var inputAccessor = inputAccessors[_i6];\n          var outputAccessor = outputAccessors[_i6];\n          var sampler = samplers[_i6];\n          var target = targets[_i6];\n          if (node === undefined) return \"continue\";\n          node.updateMatrix();\n          node.matrixAutoUpdate = true;\n          var TypedKeyframeTrack = void 0;\n\n          switch (PATH_PROPERTIES[target.path]) {\n            case PATH_PROPERTIES.weights:\n              TypedKeyframeTrack = NumberKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.rotation:\n              TypedKeyframeTrack = QuaternionKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.position:\n            case PATH_PROPERTIES.scale:\n            default:\n              TypedKeyframeTrack = VectorKeyframeTrack;\n              break;\n          }\n\n          var targetName = node.name ? node.name : node.uuid;\n          var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n          var targetNames = [];\n\n          if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n            // Node may be a Group (glTF mesh with several primitives) or a Mesh.\n            node.traverse(function (object) {\n              if (object.isMesh === true && object.morphTargetInfluences) {\n                targetNames.push(object.name ? object.name : object.uuid);\n              }\n            });\n          } else {\n            targetNames.push(targetName);\n          }\n\n          var outputArray = outputAccessor.array;\n\n          if (outputAccessor.normalized) {\n            var scale = getNormalizedComponentScale(outputArray.constructor);\n            var scaled = new Float32Array(outputArray.length);\n\n            for (var j = 0, jl = outputArray.length; j < jl; j++) {\n              scaled[j] = outputArray[j] * scale;\n            }\n\n            outputArray = scaled;\n          }\n\n          for (var _j = 0, _jl = targetNames.length; _j < _jl; _j++) {\n            var track = new TypedKeyframeTrack(targetNames[_j] + '.' + PATH_PROPERTIES[target.path], inputAccessor.array, outputArray, interpolation); // Override interpolation with custom factory method.\n\n            if (sampler.interpolation === 'CUBICSPLINE') {\n              track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n                // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n                // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n                // must be divided by three to get the interpolant's sampleSize argument.\n                return new GLTFCubicSplineInterpolant(this.times, this.values, this.getValueSize() / 3, result);\n              }; // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\n\n              track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n            }\n\n            tracks.push(track);\n          }\n        };\n\n        for (var _i6 = 0, _il5 = nodes.length; _i6 < _il5; _i6++) {\n          var _ret = _loop(_i6, _il5);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n        return new AnimationClip(name, undefined, tracks);\n      });\n    }\n  }, {\n    key: \"createNodeMesh\",\n    value: function createNodeMesh(nodeIndex) {\n      var json = this.json;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex];\n      if (nodeDef.mesh === undefined) return null;\n      return parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n        var node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh); // if weights are provided on the node, override weights on the mesh.\n\n\n        if (nodeDef.weights !== undefined) {\n          node.traverse(function (o) {\n            if (!o.isMesh) return;\n\n            for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n              o.morphTargetInfluences[i] = nodeDef.weights[i];\n            }\n          });\n        }\n\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n     * @param {number} nodeIndex\n     * @return {Promise<Object3D>}\n     */\n\n  }, {\n    key: \"loadNode\",\n    value: function loadNode(nodeIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex]; // reserve node's name before its dependencies, so the root has the intended name.\n\n      var nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : '';\n      return function () {\n        var pending = [];\n\n        var meshPromise = parser._invokeOne(function (ext) {\n          return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n        });\n\n        if (meshPromise) {\n          pending.push(meshPromise);\n        }\n\n        if (nodeDef.camera !== undefined) {\n          pending.push(parser.getDependency('camera', nodeDef.camera).then(function (camera) {\n            return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n          }));\n        }\n\n        parser._invokeAll(function (ext) {\n          return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n        }).forEach(function (promise) {\n          pending.push(promise);\n        });\n\n        return Promise.all(pending);\n      }().then(function (objects) {\n        var node; // .isBone isn't in glTF spec. See ._markDefs\n\n        if (nodeDef.isBone === true) {\n          node = new Bone();\n        } else if (objects.length > 1) {\n          node = new Group();\n        } else if (objects.length === 1) {\n          node = objects[0];\n        } else {\n          node = new Object3D();\n        }\n\n        if (node !== objects[0]) {\n          for (var i = 0, il = objects.length; i < il; i++) {\n            node.add(objects[i]);\n          }\n        }\n\n        if (nodeDef.name) {\n          node.userData.name = nodeDef.name;\n          node.name = nodeName;\n        }\n\n        assignExtrasToUserData(node, nodeDef);\n        if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n        if (nodeDef.matrix !== undefined) {\n          var matrix = new Matrix4();\n          matrix.fromArray(nodeDef.matrix);\n          node.applyMatrix4(matrix);\n        } else {\n          if (nodeDef.translation !== undefined) {\n            node.position.fromArray(nodeDef.translation);\n          }\n\n          if (nodeDef.rotation !== undefined) {\n            node.quaternion.fromArray(nodeDef.rotation);\n          }\n\n          if (nodeDef.scale !== undefined) {\n            node.scale.fromArray(nodeDef.scale);\n          }\n        }\n\n        parser.associations.set(node, {\n          type: 'nodes',\n          index: nodeIndex\n        });\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n     * @param {number} sceneIndex\n     * @return {Promise<Group>}\n     */\n\n  }, {\n    key: \"loadScene\",\n    value: function loadScene(sceneIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this; // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\n      var scene = new Group();\n      if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name);\n      assignExtrasToUserData(scene, sceneDef);\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n      var nodeIds = sceneDef.nodes || [];\n      var pending = [];\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n        pending.push(buildNodeHierachy(nodeIds[i], scene, json, parser));\n      }\n\n      return Promise.all(pending).then(function () {\n        return scene;\n      });\n    }\n  }]);\n\n  return GLTFParser;\n}();\n\nfunction buildNodeHierachy(nodeId, parentObject, json, parser) {\n  var nodeDef = json.nodes[nodeId];\n  return parser.getDependency('node', nodeId).then(function (node) {\n    if (nodeDef.skin === undefined) return node; // build skeleton here as well\n\n    var skinEntry;\n    return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n      skinEntry = skin;\n      var pendingJoints = [];\n\n      for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n        pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n      }\n\n      return Promise.all(pendingJoints);\n    }).then(function (jointNodes) {\n      node.traverse(function (mesh) {\n        if (!mesh.isMesh) return;\n        var bones = [];\n        var boneInverses = [];\n\n        for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n          var jointNode = jointNodes[j];\n\n          if (jointNode) {\n            bones.push(jointNode);\n            var mat = new Matrix4();\n\n            if (skinEntry.inverseBindMatrices !== undefined) {\n              mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n            }\n\n            boneInverses.push(mat);\n          } else {\n            console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n          }\n        }\n\n        mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n      });\n      return node;\n    });\n  }).then(function (node) {\n    // build node hierachy\n    parentObject.add(node);\n    var pending = [];\n\n    if (nodeDef.children) {\n      var children = nodeDef.children;\n\n      for (var i = 0, il = children.length; i < il; i++) {\n        var child = children[i];\n        pending.push(buildNodeHierachy(child, node, json, parser));\n      }\n    }\n\n    return Promise.all(pending);\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\n\n\nfunction computeBounds(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var box = new Box3();\n\n  if (attributes.POSITION !== undefined) {\n    var accessor = parser.json.accessors[attributes.POSITION];\n    var min = accessor.min;\n    var max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n    if (min !== undefined && max !== undefined) {\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n\n      if (accessor.normalized) {\n        var boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var targets = primitiveDef.targets;\n\n  if (targets !== undefined) {\n    var maxDisplacement = new Vector3();\n    var vector = new Vector3();\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i];\n\n      if (target.POSITION !== undefined) {\n        var _accessor = parser.json.accessors[target.POSITION];\n        var _min = _accessor.min;\n        var _max = _accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n        if (_min !== undefined && _max !== undefined) {\n          // we need to get max of absolute components because target weight is [-1,1]\n          vector.setX(Math.max(Math.abs(_min[0]), Math.abs(_max[0])));\n          vector.setY(Math.max(Math.abs(_min[1]), Math.abs(_max[1])));\n          vector.setZ(Math.max(Math.abs(_min[2]), Math.abs(_max[2])));\n\n          if (_accessor.normalized) {\n            var _boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_accessor.componentType]);\n\n            vector.multiplyScalar(_boxScale);\n          } // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n          // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n          // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n          // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\n\n          maxDisplacement.max(vector);\n        } else {\n          console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n        }\n      }\n    } // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\n\n    box.expandByVector(maxDisplacement);\n  }\n\n  geometry.boundingBox = box;\n  var sphere = new Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var pending = [];\n\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n\n  for (var gltfAttributeName in attributes) {\n    var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase(); // Skip attributes already provided by e.g. Draco extension.\n\n    if (threeAttributeName in geometry.attributes) continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n\n  if (primitiveDef.indices !== undefined && !geometry.index) {\n    var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n      geometry.setIndex(accessor);\n    });\n    pending.push(accessor);\n  }\n\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function () {\n    return primitiveDef.targets !== undefined ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\n\n\nfunction toTrianglesDrawMode(geometry, drawMode) {\n  var index = geometry.getIndex(); // generate index if not present\n\n  if (index === null) {\n    var indices = [];\n    var position = geometry.getAttribute('position');\n\n    if (position !== undefined) {\n      for (var i = 0; i < position.count; i++) {\n        indices.push(i);\n      }\n\n      geometry.setIndex(indices);\n      index = geometry.getIndex();\n    } else {\n      console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.');\n      return geometry;\n    }\n  } //\n\n\n  var numberOfTriangles = index.count - 2;\n  var newIndices = [];\n\n  if (drawMode === TriangleFanDrawMode) {\n    // gl.TRIANGLE_FAN\n    for (var _i7 = 1; _i7 <= numberOfTriangles; _i7++) {\n      newIndices.push(index.getX(0));\n      newIndices.push(index.getX(_i7));\n      newIndices.push(index.getX(_i7 + 1));\n    }\n  } else {\n    // gl.TRIANGLE_STRIP\n    for (var _i8 = 0; _i8 < numberOfTriangles; _i8++) {\n      if (_i8 % 2 === 0) {\n        newIndices.push(index.getX(_i8));\n        newIndices.push(index.getX(_i8 + 1));\n        newIndices.push(index.getX(_i8 + 2));\n      } else {\n        newIndices.push(index.getX(_i8 + 2));\n        newIndices.push(index.getX(_i8 + 1));\n        newIndices.push(index.getX(_i8));\n      }\n    }\n  }\n\n  if (newIndices.length / 3 !== numberOfTriangles) {\n    console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.');\n  } // build final geometry\n\n\n  var newGeometry = geometry.clone();\n  newGeometry.setIndex(newIndices);\n  return newGeometry;\n}\n\nexport { GLTFLoader };","var __jsx = React.createElement;\nimport React, { useRef, useEffect } from 'react';\nimport { Scene, TextureLoader, Vector2, PerspectiveCamera, WebGLRenderer, Clock, AmbientLight, BufferGeometry, BufferAttribute, Object3D, Float32BufferAttribute, PointsMaterial, AdditiveBlending, Color, Points, PointLight, Vector3, AnimationClip, AnimationMixer, MeshBasicMaterial, SphereGeometry, Mesh } from 'three/build/three.module'; //add more imports here, such as the controllers and loaders etc\n\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\nimport { gsap } from 'gsap';\nimport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass.js';\n\nfunction Art() {\n  var inputEl = useRef(null);\n  useEffect(function () {\n    var quote = ['\"Of all the hardships a person had to face,\\nNone was more punishing than the simple act of waiting.\"', '\"One could not count the moons that shimmer on her roofs,\\nOr the thousand splendid suns that hide behind her walls.\"', '\"Marriage can wait,\\nEducation cannot.\"', '\"Behind every trial and sorrow that He makes us shoulder,\\nGod has a reason.\"', '\"Like a compass facing north, a mans accusing finger always finds a woman.\"', '\"You see, some things I can teach you. Some you learn from books. But there are things that, well, you have to see and feel.\"', '\"I only have eyes for you.\"', '\"And the past held only this wisdom: that love was a damaging mistake, and its accomplice, hope, a treacherous illusion.\"', '\"yet love can move people to act in unexpected ways and move them to overcome the most daunting obstacles with startling heroism\"', '\"she was leaving the world as a woman who had love and been loved back\"', '\"But we are like those walls up there. Battered, and nothing pretty to look at, but still standing.\"', '\"Each snowflake was a sigh heard by an aggrieved woman somewhere in the world.\"', '\"Tell your secret to the wind, but dont blame it for telling the trees.\"', '\"People should not be allowed to have new children if they had already given away all their love to their old ones.\"', '\"You are not going to cry, are you?\\n- I am not going to cry! Not over you. Not in a thousand years.\"'];\n    var camera = new PerspectiveCamera(100, inputEl.current.offsetWidth / inputEl.current.offsetHeight, 0.1, 1000);\n    var renderer = new WebGLRenderer();\n    renderer.setSize(inputEl.current.offsetWidth, inputEl.current.offsetHeight);\n    document.getElementById('canvasclass').append(renderer.domElement);\n    var scene = new Scene();\n    camera.position.z = 3;\n    var quote_index = 0;\n    var renderScene = new RenderPass(scene, camera);\n    var bloomPass = new UnrealBloomPass(new Vector2(inputEl.current.offsetWidth, inputEl.current.offsetHeight), 1.5, 0.4, 0.85);\n    var bloomStrength = 3;\n    var bloomRadius = 1;\n    var bloomThreshold = 0.1;\n    bloomPass.threshold = bloomThreshold;\n    bloomPass.strength = bloomStrength;\n    bloomPass.radius = bloomRadius;\n    bloomPass.renderToScreen = true;\n    var filmPass = new FilmPass(0.35, // noise intensity\n    0.025, // scanline intensity\n    648, // scanline count\n    false // grayscale\n    );\n    filmPass.renderToScreen = true;\n    var composer = new EffectComposer(renderer);\n    composer.addPass(renderScene);\n    composer.addPass(bloomPass);\n    composer.addPass(filmPass);\n    var titleWrapper = document.getElementById('author');\n    var textWrapper = document.getElementById('quote'); //quote text`\n\n    function text() {\n      var tl = gsap.timeline();\n      textWrapper.innerHTML = quote[quote_index];\n      tl.to(textWrapper, {\n        opacity: 1,\n        ease: 'sine',\n        duration: 2,\n        scale: 0.9\n      });\n      tl.to(textWrapper, {\n        opacity: 0,\n        ease: 'linear.out',\n        duration: 2,\n        scale: 1.1,\n        delay: 4,\n        onComplete: updateTXT\n      });\n    }\n\n    function updateTXT() {\n      quote_index++;\n\n      if (quote_index >= quote.length) {\n        quote_index = 0;\n      }\n\n      text();\n    }\n\n    function main() {\n      {\n        var geometry = new SphereGeometry(500, 60, 40); // invert the geometry on the x-axis so that all of the faces point inward\n\n        geometry.scale(-1, 1, 1);\n        var texture = new TextureLoader().load('../../assets/models/sky2.jpeg');\n        var material = new MeshBasicMaterial({\n          map: texture\n        });\n        var mesh = new Mesh(geometry, material);\n        scene.add(mesh);\n      } // terrain\n\n      var loader_terrain = new FBXLoader();\n      loader_terrain.load('../../assets/models/desert/desert_Pillar_terrain.fbx', function (obj) {\n        obj.position.set(-10, -4, -25);\n        obj.scale.set(0.05, 0.05, 0.05);\n        obj.rotation.set(0, 90, 0);\n        scene.add(obj);\n      }); //trees\n\n      var mixer;\n      var loader_trees = new GLTFLoader();\n      loader_trees.load('../../assets/models/pinktree/source/pinktree.glb', function (obj) {\n        var clips = obj.animations;\n        mixer = new AnimationMixer(obj.scene);\n        var clip = AnimationClip.findByName(clips, 'windAction.001');\n        var action = mixer.clipAction(clip);\n        action.play();\n        obj.scene.position.set(2, -4, -30);\n        scene.add(obj.scene);\n      }); //birds\n\n      var mixer_birds;\n      var birds = new Object3D();\n      var loader_birds = new GLTFLoader();\n      loader_birds.load('../../assets/models/birds/scene.gltf', function (gltf) {\n        gltf.scene.position.set(-120, 50, 10);\n        gltf.scene.scale.set(2, 2, 2);\n        gltf.scene.rotation.set(0, 1.57079633, -3.141592);\n        var clips = gltf.animations;\n        mixer_birds = new AnimationMixer(gltf.scene);\n        var clip = AnimationClip.findByName(clips, 'Scene');\n        var action = mixer_birds.clipAction(clip);\n        action.play();\n        gsap.to(birds.position, {\n          duration: 25,\n          x: -birds.position.x,\n          ease: 'sine',\n          onComplete: invertBirds\n        });\n        scene.add(gltf.scene);\n        birds = gltf.scene;\n      });\n      var orignalpos_birds = birds.position.z;\n      var rot_bird = true;\n\n      function invertBirds() {\n        if (rot_bird) {\n          birds.rotation.z = 0;\n          rot_bird = false;\n        } else {\n          birds.rotation.z = -3.141592;\n          rot_bird = true;\n        }\n\n        orignalpos_birds = -1 * birds.position.x;\n        gsap.to(birds.position, {\n          duration: 25,\n          x: orignalpos_birds,\n          ease: 'sine',\n          onComplete: invertBirds\n        });\n      } // adding particles\n\n\n      var cross = new TextureLoader().load('../../assets/models/glow2.png');\n      var particleGeometry = new BufferGeometry();\n      var particlesCnt = 200;\n      var posArray = new Float32Array(particlesCnt * 3);\n\n      for (var _i = 0; _i < particlesCnt * 3; _i++) {\n        posArray[_i] = (Math.random() - 0.5) * 2;\n      }\n\n      particleGeometry.setAttribute('position', new BufferAttribute(posArray, 3));\n      var particlematerial = new PointsMaterial({\n        size: 0.085,\n        map: cross,\n        transparent: true,\n        blending: AdditiveBlending\n      });\n      var particleMesh = new Points(particleGeometry, particlematerial);\n      particleMesh.scale.set(18, 18, 18);\n      particleMesh.position.set(0, 0, -25);\n      scene.add(particleMesh); // adding sun\n\n      var v = new Vector3();\n\n      function randomPointInSphere(radius) {\n        var x = Math.random() * 2 - 1;\n        var y = Math.random() * 2 - 1;\n        var z = Math.random() * 2 - 1;\n        var normalizationFactor = 1 / Math.sqrt(x * x + y * y + z * z);\n        v.x = x * normalizationFactor * radius;\n        v.y = y * normalizationFactor * radius;\n        v.z = z * normalizationFactor * radius;\n        return v;\n      }\n\n      var sphereGeometry = new BufferGeometry();\n      var positions = [];\n\n      for (var i = 0; i < 5000; i++) {\n        var vertex = randomPointInSphere(3);\n        positions.push(vertex.x, vertex.y, vertex.z);\n      }\n\n      sphereGeometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n      var material_sphere = new PointsMaterial({\n        size: 0.15,\n        map: cross,\n        transparent: true,\n        blending: AdditiveBlending\n      });\n      material_sphere.color = new Color(0xe6e600);\n      var sphere = new Points(sphereGeometry, material_sphere);\n      sphere.position.set(30, 75, -20);\n      scene.add(sphere); //LIGHT\n\n      var light = new PointLight(0xfcd962, 0.1, 100);\n      light.position.set(7, 20, -20);\n      var ambientLight = new AmbientLight(0xffffff, 1);\n      scene.add(ambientLight);\n      light.castShadow = true;\n      light.shadow.camera.near = 0.1;\n      light.shadow.camera.far = 25;\n      scene.add(light);\n\n      function resizeRendererToDisplaySize(renderer) {\n        var canvas = renderer.domElement;\n        var width = canvas.clientWidth;\n        var height = canvas.clientHeight;\n        var needResize = canvas.width !== width || canvas.height !== height;\n\n        if (needResize) {\n          renderer.setSize(width, height, false);\n        }\n\n        return needResize;\n      } //Mouse\n\n\n      document.addEventListener('mousemove', animateParticles);\n      var mouseY = 0;\n      var mouseX = 0;\n\n      function animateParticles(event) {\n        mouseY = event.clientX;\n        mouseX = event.clientY;\n      } // VARIABLES for\n\n\n      var clock = new Clock();\n      var delta, time, elapsedTime;\n      var orbitRadius = 50;\n\n      function render() {\n        if (resizeRendererToDisplaySize(renderer)) {\n          var canvas = renderer.domElement;\n          camera.aspect = canvas.clientWidth / canvas.clientHeight;\n          camera.updateProjectionMatrix();\n        }\n\n        time = Date.now() / 3000;\n        sphere.position.x = orbitRadius * Math.cos(time);\n        sphere.position.z = orbitRadius * Math.sin(time) - 10;\n        delta = clock.getDelta();\n        if (mixer) mixer.update(delta);\n        if (mixer_birds) mixer_birds.update(delta);\n        elapsedTime = clock.getElapsedTime();\n\n        if (mouseX > 0) {\n          particleMesh.rotation.x = -mouseY * (elapsedTime * 0.00008);\n          particleMesh.rotation.y = mouseX * (elapsedTime * 0.00008);\n        } else {\n          particleMesh.rotation.y = -0.1 * elapsedTime;\n        }\n\n        composer.render();\n        requestAnimationFrame(render);\n      }\n\n      function revealtitle() {\n        var tl2 = gsap.timeline();\n        titleWrapper.innerHTML = 'A Thousand Splendid Suns\\n- Khaled Hosseini';\n        tl2.to(titleWrapper, {\n          opacity: 1,\n          scale: 1.1,\n          ease: 'sine',\n          duration: 5\n        });\n        tl2.to(titleWrapper, {\n          opacity: 0,\n          scale: 0.8,\n          ease: 'sine',\n          duration: 4\n        });\n      }\n\n      var tl = gsap.timeline();\n      tl.to(camera.position, {\n        duration: 15,\n        z: -20,\n        ease: 'sine',\n        onComplete: text\n      });\n      tl.to(camera.rotation, {\n        duration: 10,\n        x: 1.3,\n        ease: 'back'\n      }, '-=7');\n      tl.to(camera.rotation, {\n        duration: 10,\n        x: 1.8,\n        repeat: -1,\n        yoyo: true\n      });\n      gsap.to(bloomPass, {\n        duration: 6,\n        threshold: 0.55,\n        ease: 'sine'\n      });\n      gsap.to(bloomPass, {\n        duration: 6,\n        strength: 0.5,\n        ease: 'sine'\n      });\n      gsap.to(bloomPass, {\n        duration: 1,\n        radius: 1,\n        ease: 'sine',\n        onComplete: revealtitle\n      });\n      render();\n    }\n\n    main();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    ref: inputEl\n  }));\n}\n\nexport default Art;","/**\n * Film grain & scanlines shader\n *\n * - ported from HLSL to WebGL / GLSL\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\n *\n * Screen Space Static Postprocessor\n *\n * Produces an analogue noise overlay similar to a film grain / TV static\n *\n * Original implementation and noise algorithm\n * Pat 'Hawthorne' Shearon\n *\n * Optimized scanlines + noise version with intensity scaling\n * Georg 'Leviathan' Steinrohder\n *\n * This version is provided under a Creative Commons Attribution 3.0 License\n * http://creativecommons.org/licenses/by/3.0/\n */\nvar FilmShader = {\n  uniforms: {\n    'tDiffuse': {\n      value: null\n    },\n    'time': {\n      value: 0.0\n    },\n    'nIntensity': {\n      value: 0.5\n    },\n    'sIntensity': {\n      value: 0.05\n    },\n    'sCount': {\n      value: 4096\n    },\n    'grayscale': {\n      value: 1\n    }\n  },\n  vertexShader:\n  /* glsl */\n  \"\\n\\n\\t\\tvarying vec2 vUv;\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvUv = uv;\\n\\t\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\n\\t\\t}\",\n  fragmentShader:\n  /* glsl */\n  \"\\n\\n\\t\\t#include <common>\\n\\n\\t\\t// control parameter\\n\\t\\tuniform float time;\\n\\n\\t\\tuniform bool grayscale;\\n\\n\\t\\t// noise effect intensity value (0 = no effect, 1 = full effect)\\n\\t\\tuniform float nIntensity;\\n\\n\\t\\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\\n\\t\\tuniform float sIntensity;\\n\\n\\t\\t// scanlines effect count value (0 = no effect, 4096 = full effect)\\n\\t\\tuniform float sCount;\\n\\n\\t\\tuniform sampler2D tDiffuse;\\n\\n\\t\\tvarying vec2 vUv;\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t// sample the source\\n\\t\\t\\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );\\n\\n\\t\\t// make some noise\\n\\t\\t\\tfloat dx = rand( vUv + time );\\n\\n\\t\\t// add noise\\n\\t\\t\\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\\n\\n\\t\\t// get us a sine and cosine\\n\\t\\t\\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\\n\\n\\t\\t// add scanlines\\n\\t\\t\\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\\n\\n\\t\\t// interpolate between source and result by intensity\\n\\t\\t\\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\\n\\n\\t\\t// convert to grayscale if desired\\n\\t\\t\\tif( grayscale ) {\\n\\n\\t\\t\\t\\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tgl_FragColor =  vec4( cResult, cTextureScreen.a );\\n\\n\\t\\t}\"\n};\nexport { FilmShader };","import _classCallCheck from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mariana/GitHub/intern-we3-webgl-gallery/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { ShaderMaterial, UniformsUtils } from 'three';\nimport { Pass, FullScreenQuad } from '../postprocessing/Pass.js';\nimport { FilmShader } from '../shaders/FilmShader.js';\n\nvar FilmPass = /*#__PURE__*/function (_Pass) {\n  _inherits(FilmPass, _Pass);\n\n  var _super = _createSuper(FilmPass);\n\n  function FilmPass(noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale) {\n    var _this;\n\n    _classCallCheck(this, FilmPass);\n\n    _this = _super.call(this);\n    if (FilmShader === undefined) console.error('THREE.FilmPass relies on FilmShader');\n    var shader = FilmShader;\n    _this.uniforms = UniformsUtils.clone(shader.uniforms);\n    _this.material = new ShaderMaterial({\n      uniforms: _this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n    if (grayscale !== undefined) _this.uniforms.grayscale.value = grayscale;\n    if (noiseIntensity !== undefined) _this.uniforms.nIntensity.value = noiseIntensity;\n    if (scanlinesIntensity !== undefined) _this.uniforms.sIntensity.value = scanlinesIntensity;\n    if (scanlinesCount !== undefined) _this.uniforms.sCount.value = scanlinesCount;\n    _this.fsQuad = new FullScreenQuad(_this.material);\n    return _this;\n  }\n\n  _createClass(FilmPass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer, deltaTime\n    /*, maskActive */\n    ) {\n      this.uniforms['tDiffuse'].value = readBuffer.texture;\n      this.uniforms['time'].value += deltaTime;\n\n      if (this.renderToScreen) {\n        renderer.setRenderTarget(null);\n        this.fsQuad.render(renderer);\n      } else {\n        renderer.setRenderTarget(writeBuffer);\n        if (this.clear) renderer.clear();\n        this.fsQuad.render(renderer);\n      }\n    }\n  }]);\n\n  return FilmPass;\n}(Pass);\n\nexport { FilmPass };"],"sourceRoot":""}